function e(e,t){"error"===t?(e.addClass("error"),e.removeClass("correcto"),cumple=0):"valido"===t&&(e.addClass("correcto"),e.removeClass("error"),cumple=1)}function t(e,t,n){const o=$("div.alert-container");o.find("div.alert-content").empty(),o.removeClass(),o.addClass("alert-container"),"nice"===e?o.addClass("alert-check").find("div.alert-content").text("Nice !"):"error"===e?o.addClass("alert-error").find("div.alert-content").text("Hmm, something went wrong"):"serverDown"===e?o.addClass("alert-server").find("div.alert-content").text("Maybe the server is down :("):"entryDuplicate"===e&&o.addClass("alert-duplicate").find("div.alert-content").text("This user already exists"),o.fadeIn(t,"linear",(function(){setTimeout((function(){o.fadeOut().animate({bottom:"0%"},{duration:"slow",queue:!1})}),n)})).animate({bottom:"20vh"},{duration:"slow",queue:!1})}function n(e,t,n){return!!(e>=t&e<=n)}function o(t){event.preventDefault();$(t).find("input,select");let o=$(t).find("input:visible,select:visible").length,s=($(t).find('button[type="submit"]'),0);const i=/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/,c=/^\d+$/;return $(t).find("input,select").each((function(t,o){let a=$(o).val(),r=$(o).prop("checked"),l=$(o).val(),d=$(o).parent().find("div.custom-checkbox");if(0!==$(o).length){switch($(o).attr("type")){case"text":case"password":case"date":e($(o),""!==a?"valido":"error");break;case"identification":c.test($(o).prop("value"))&n(a.length,10,10)?e($(o),"valido"):e($(o),"error");break;case"emailCustom":i.test($(o).prop("value"))?e($(o),"valido"):e($(o),"error");break;case"checkbox":e(d,!1!==r?"valido":"error");break;case"select":e($(o),1!=l?"valido":"error")}s+=cumple}})),s===o}var s;$(document).ready((function(){navigator.userAgent.indexOf("Trident/")>-1&&(window.location.href="https://www.google.com.mx/chrome/?brand=CHBF&ds_kid=43700034632748694&utm_source=bing&utm_medium=cpc&utm_campaign=1005992%20%7C%20Chrome%20Win10%20%7C%20DR%20%7C%20ESS01%20%7C%20NA%20%7C%20NA%20%7C%20es%20%7C%20Desk%20%7C%20BING%20SEM%20%7C%20BKWS%20~%20Top%20KWDS%20-%20Exact&utm_term=descargar%20chrome&utm_content=Download%20Chrome%20-%20Exact&gclid=CO70m6TT-eUCFUTCDQodmiwDRQ&gclsrc=ds"),setTimeout((function(){$("section#login").fadeIn(1500).css({display:"flex"})}),500);(new WOW).init();$('input[type="checkbox"]').click((function(){let e=$(this).parent().find("div.custom-checkbox");$(this).prop("checked")?e.text("âœ”"):e.text("")})),$("div.icon-menu").click((function(){let e=$("div.menu-container");"none"==e.css("display")?e.slideDown():e.slideUp()})),$("#acountbtn").click((function(){let e=$(".account-container");"none"==e.css("display")?e.slideDown():e.slideUp()})),$("#editUser").click((function(){$("#modalEditUser").fadeIn().css({display:"flex"})})),$("#addRelative").click((function(){let e=$("#modalNewRelative");$(this).closest(".modal").css({"z-index":"10"}),e.fadeIn().css({display:"flex"})})),$("#newStudent").click((function(){let e=$("#modalNewStudent");$(this).closest(".modal").css({"z-index":"10"}),e.fadeIn().css({display:"flex"})})),$(".btn-cancel").click((function(){$(this).closest(".modal,.modal-tittle").fadeOut(),$(".alert-container").fadeOut()})),$("#btn-editStudent").click((function(){let e=$(this).closest(".modal"),t=e.find("select,input");e.find(".btn-submitModal").fadeIn("500"),t.attr("disabled",!1)})),$(window).resize((function(){window.innerWidth<=520&&$("table").css({"overflow-x":"scroll"})}))})),$.ajaxSetup({url:"services/process.php",type:"POST",async:!0,error:function(e){console.log("response",e),t("serverDown",1e3,3e3)}});var i=$("#searchAll");function c(e){e.val();let n=e;clearTimeout(s),s=setTimeout((function(){let e="idForm=serachEstu&"+n.serialize();$.post("services/process.php",e,(function(n){console.log(e);var o=JSON.parse(n);"Error"==o.success?t("error",1e3,3e3):"Don't exists"==o.success?t("error",1e3,3e3):(console.log(o),a(o))}))}),1e3)}function a(e){$("#showStudents").empty(),$.each(e,(function(e,t){$("#showStudents").append(`\n      <tr>\n        <td>${e+1}</td>\n        <td>${t.ndoc}</td>\n        <td>${t.tdoc_persona}</td>\n        <td>${t.nombre1} ${t.nombre2}</td>\n        <td>${t.apellido1} ${t.apellido2}</td>\n        <td class="table-options"><span class="icon-eye"></span><?php if($rol === 'Coordinador'){ ?><span class="icon-plus"></span><span class="icon-bin"></span><?php } ?></td>\n      </tr>\n      `)})),r()}function r(){$("span.icon-bin").click((function(){$("#modalDelete").fadeIn().css({display:"flex"})})),$("span.icon-eye").click((function(){let e=$("#modalEditShow"),t=e.find("select,input"),n=e.find(".btn-submitModal");e.fadeIn().css({display:"flex"}),t.attr("disabled",!0),n.hide()})),$("span.icon-plus").click((function(){$("#modalMatricula").fadeIn().css({display:"flex"})}))}function l(e,n=!0){let s=$(e).attr("id"),i=$(e).find("input,select");if(o(e)){var c="idForm="+s+"&"+$(e).serialize();console.log(c),$.ajax({data:c,beforeSend:function(){$(e).parent().find(".loading").show()},success:function(o){$(e).parent().find(".loading").fadeOut(1e3);var s=JSON.parse(o);"Cool"==s.success?(n&&$(e).closest(".modal").fadeOut(),i.val("").removeClass("correcto"),t("nice",1e3,3e3)):"Error"==s.success?t("error",1e3,3e3):"Entry duplicate"==s.success&&t("entryDuplicate",1e3,3e3)}})}}i.keypress((function(){c($(this))})),$("span.icon-search").click((function(){c(i)})),$("form#login").submit((function(e){e.preventDefault();var n=$(this).serialize();console.log(n),$.post("services/login.php?log=true",n,(function(e){"Cool"==JSON.parse(e).success?(t("nice",1e3,3e3),location.href="home.php"):t("error",1e3,3e3)}))})),$("#logOut").click((function(){$.post("services/login.php?log=false",(function(e){"Cool"==JSON.parse(e).success?location.href="index.php":t("error",1e3,3e3)}))})),$("form.edit").submit((function(e){l(this,!1)})),$("form#editUsername").submit((function(e){l(this,!1)})),$("form#editPassword").submit((function(e){l(this,!1)})),$("form#estudiante").submit((function(e){l(this)})),$("form#responsable").submit((function(e){l(this)})),$("form#delete").submit((function(e){l(this)})),$("form#matricula").submit((function(e){l(this)})),$.getJSON("assets/json/citys.json",(function(e){var t=[];let n=$("select.citys");for(var o=0;o<e.length;o++)for(var s=0;s<e[o].ciudades.length;s++)t.push("<option value='"+e[o].ciudades[s]+"'>"+e[o].departamento+"-"+e[o].ciudades[s]+"</option>");for(o=0;o<t.length;o++)n.append(t[o])})),$.getJSON("assets/json/bloodTypes.json",(function(e){var t=[];let n=$("select.bloodTypes");$.each(e,(function(e){t.push("<option value='"+e+"'>"+e+"</option>")}));for(var o=0;o<t.length;o++)n.append(t[o])}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl9fZm9ybXMuanMiLCJfZG9tLmpzIl0sIm5hbWVzIjpbInBpbnRhclN0aWxvcyIsImVsZW0iLCJ0aXBvIiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsImN1bXBsZSIsInNob3dBbGVydCIsInRpbWVJbiIsInRpbWVPdXQiLCJkaXZBbGVydCIsIiQiLCJmaW5kIiwiZW1wdHkiLCJ0ZXh0IiwiZmFkZUluIiwic2V0VGltZW91dCIsImZhZGVPdXQiLCJhbmltYXRlIiwiYm90dG9tIiwiZHVyYXRpb24iLCJxdWV1ZSIsInZhbGlkYXJMZW5ndGgiLCJ2YWxvciIsIm1pbkxlbmd0aCIsIm1heExlbmd0aCIsInZhbGlkYXRlRm9ybSIsImZvcm0iLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiY2FtcG9zT2JsaWdhIiwibGVuZ3RoIiwidG90YWwiLCJyZWdFeHBFbWFpbCIsInJlZ0V4cE51bWJlciIsImVhY2giLCJpIiwiZSIsInZhbG9ySW5wdXQiLCJ2YWwiLCJ2YWxvckNoZWNrYm94IiwicHJvcCIsInZhbG9yU2VsZWN0IiwiY3VzdG9tRGl2Q2hlY2siLCJwYXJlbnQiLCJhdHRyIiwidGVzdCIsInBldGljaW9uIiwiZG9jdW1lbnQiLCJyZWFkeSIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsImluZGV4T2YiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJjc3MiLCJkaXNwbGF5IiwiV09XIiwiaW5pdCIsImNsaWNrIiwiY3VzdG9tQ2hlY2siLCJ0aGlzIiwibWVudSIsInNsaWRlRG93biIsInNsaWRlVXAiLCJhY291bnRDb250YWluZXIiLCJtb2RhbCIsImNsb3Nlc3QiLCJ6LWluZGV4IiwiaW5wdXRzIiwicmVzaXplIiwiaW5uZXJXaWR0aCIsIm92ZXJmbG93LXgiLCJhamF4U2V0dXAiLCJ1cmwiLCJ0eXBlIiwiYXN5bmMiLCJlcnJvciIsInJlc3BvbnNlIiwiY29uc29sZSIsImxvZyIsImJ1dHRvblNlYXJjaCIsInNlYXJjaFN0dWRlbnQiLCJidXR0b24iLCJpbnB1dCIsImNsZWFyVGltZW91dCIsImRhdGEiLCJzZXJpYWxpemUiLCJwb3N0Iiwic3R1ZGVudHMiLCJKU09OIiwicGFyc2UiLCJzdWNjZXNzIiwic2hvd1N0dWRlbnRzIiwiaWQiLCJzdHVkZW50IiwiYXBwZW5kIiwibmRvYyIsInRkb2NfcGVyc29uYSIsIm5vbWJyZTEiLCJub21icmUyIiwiYXBlbGxpZG8xIiwiYXBlbGxpZG8yIiwib3B0aW9uc1N0dWRlbnRzIiwibW9kYWxTaG93Iiwic2F2ZUJ1dHRvbnMiLCJoaWRlIiwic2VuZEZvcm0iLCJjbG9zZU1vZGFsIiwiaWRGb3JtIiwiYWpheCIsImJlZm9yZVNlbmQiLCJzaG93IiwianNvbkRhdGEiLCJrZXlwcmVzcyIsInN1Ym1pdCIsImdldEpTT04iLCJvcHRpb25zIiwic2VsZWN0IiwieiIsImNpdWRhZGVzIiwicHVzaCIsImRlcGFydGFtZW50byIsImtleSJdLCJtYXBwaW5ncyI6IkFBQ0EsU0FBQUEsRUFBQUMsRUFBQUMsR0FFQSxVQUFBQSxHQUNBRCxFQUFBRSxTQUFBLFNBQ0FGLEVBQUFHLFlBQUEsWUFDQUMsT0FBQSxHQUVBLFdBQUFILElBQ0FELEVBQUFFLFNBQUEsWUFDQUYsRUFBQUcsWUFBQSxTQUNBQyxPQUFBLEdBTUEsU0FBQUMsRUFBQUQsRUFBQUUsRUFBQUMsR0FFQSxNQUFBQyxFQUFBQyxFQUFBLHVCQUdBRCxFQUFBRSxLQUFBLHFCQUFBQyxRQUNBSCxFQUFBTCxjQUNBSyxFQUFBTixTQUFBLG1CQUVBLFNBQUFFLEVBQ0FJLEVBQUFOLFNBQUEsZUFBQVEsS0FQQSxxQkFPQUUsS0FBQSxVQUVBLFVBQUFSLEVBQ0FJLEVBQUFOLFNBQUEsZUFBQVEsS0FWQSxxQkFVQUUsS0FBQSw2QkFFQSxlQUFBUixFQUNBSSxFQUFBTixTQUFBLGdCQUFBUSxLQWJBLHFCQWFBRSxLQUFBLCtCQUVBLG1CQUFBUixHQUNBSSxFQUFBTixTQUFBLG1CQUFBUSxLQWhCQSxxQkFnQkFFLEtBQUEsNEJBR0FKLEVBQUFLLE9BQUFQLEVBQUEsVUFBQSxX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QUFDLEVBQUE1RyxFQUFBLGdCQUVBLElBQUEsSUFBQXlCLEVBQUEsRUFBQUEsRUFBQW1ELEVBQUF4RCxPQUFBSyxJQUNBLElBQUEsSUFBQW9GLEVBQUEsRUFBQUEsRUFBQWpDLEVBQUFuRCxHQUFBcUYsU0FBQTFGLE9BQUF5RixJQUNBRixFQUFBSSxLQUFBLGtCQUFBbkMsRUFBQW5ELEdBQUFxRixTQUFBRCxHQUFBLEtBQUFqQyxFQUFBbkQsR0FBQXVGLGFBQUEsSUFBQXBDLEVBQUFuRCxHQUFBcUYsU0FBQUQsR0FBQSxhQUdBLElBQUFwRixFQUFBLEVBQUFBLEVBQUFrRixFQUFBdkYsT0FBQUssSUFDQW1GLEVBQUF0QixPQUFBcUIsRUFBQWxGLE9BS0F6QixFQUFBMEcsUUFBQSwrQkFBQSxTQUFBOUIsR0FFQSxJQUFBK0IsRUFBQSxHQUNBLElBQUFDLEVBQUE1RyxFQUFBLHFCQUVBQSxFQUFBd0IsS0FBQW9ELEdBQUEsU0FBQXFDLEdBQ0FOLEVBQUFJLEtBQUEsa0JBQUFFLEVBQUEsS0FBQUEsRUFBQSxnQkFHQSxJQUFBLElBQUF4RixFQUFBLEVBQUFBLEVBQUFrRixFQUFBdkYsT0FBQUssSUFDQW1GLEVBQUF0QixPQUFBcUIsRUFBQWxGIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vLy8vLy8vLy8vLyBQaW50YSBlc3RpbG9zIGRlIGVycm9yIHkgdmFsaWRvXHJcbmZ1bmN0aW9uIHBpbnRhclN0aWxvcyhlbGVtLCB0aXBvKSB7XHJcblxyXG4gIGlmICh0aXBvID09PSAnZXJyb3InKSB7XHJcbiAgICBlbGVtLmFkZENsYXNzKCdlcnJvcicpO1xyXG4gICAgZWxlbS5yZW1vdmVDbGFzcygnY29ycmVjdG8nKTtcclxuICAgIGN1bXBsZSA9IDA7XHJcblxyXG4gIH0gZWxzZSBpZiAodGlwbyA9PT0gJ3ZhbGlkbycpIHtcclxuICAgIGVsZW0uYWRkQ2xhc3MoJ2NvcnJlY3RvJyk7XHJcbiAgICBlbGVtLnJlbW92ZUNsYXNzKCdlcnJvcicpO1xyXG4gICAgY3VtcGxlID0gMTtcclxuICB9XHJcblxyXG59XHJcblxyXG4vLy8vLy8vLy8vLy8gTXVlc3RyYSBhbGVydGEgZGUgbG9zIGZvcm11bGFyaW9zXHJcbmZ1bmN0aW9uIHNob3dBbGVydChjdW1wbGUsIHRpbWVJbiwgdGltZU91dCkge1xyXG5cclxuICBjb25zdCBkaXZBbGVydCA9ICQoJ2Rpdi5hbGVydC1jb250YWluZXInKTtcclxuICBjb25zdCBjb250ZW50QWxlcnQgPSAnZGl2LmFsZXJ0LWNvbnRlbnQnO1xyXG5cclxuICBkaXZBbGVydC5maW5kKCdkaXYuYWxlcnQtY29udGVudCcpLmVtcHR5KCk7XHJcbiAgZGl2QWxlcnQucmVtb3ZlQ2xhc3MoKTtcclxuICBkaXZBbGVydC5hZGRDbGFzcygnYWxlcnQtY29udGFpbmVyJyk7XHJcblxyXG4gIGlmIChjdW1wbGUgPT09IFwibmljZVwiKSB7XHJcbiAgICBkaXZBbGVydC5hZGRDbGFzcygnYWxlcnQtY2hlY2snKS5maW5kKGNvbnRlbnRBbGVydCkudGV4dCgnTmljZSAhJyk7XHJcblxyXG4gIH0gZWxzZSBpZiAoY3VtcGxlID09PSBcImVycm9yXCIpIHtcclxuICAgIGRpdkFsZXJ0LmFkZENsYXNzKCdhbGVydC1lcnJvcicpLmZpbmQoY29udGVudEFsZXJ0KS50ZXh0KCdIbW0sIHNvbWV0aGluZyB3ZW50IHdyb25nJyk7XHJcblxyXG4gIH0gZWxzZSBpZiAoY3VtcGxlID09PSBcInNlcnZlckRvd25cIikge1xyXG4gICAgZGl2QWxlcnQuYWRkQ2xhc3MoJ2FsZXJ0LXNlcnZlcicpLmZpbmQoY29udGVudEFsZXJ0KS50ZXh0KCdNYXliZSB0aGUgc2VydmVyIGlzIGRvd24gOignKTtcclxuXHJcbiAgfSBlbHNlIGlmIChjdW1wbGUgPT09IFwiZW50cnlEdXBsaWNhdGVcIikge1xyXG4gICAgZGl2QWxlcnQuYWRkQ2xhc3MoJ2FsZXJ0LWR1cGxpY2F0ZScpLmZpbmQoY29udGVudEFsZXJ0KS50ZXh0KCdUaGlzIHVzZXIgYWxyZWFkeSBleGlzdHMnKTtcclxuICB9XHJcblxyXG4gIGRpdkFsZXJ0LmZhZGVJbih0aW1lSW4sIFwibGluZWFyXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgZGl2QWxlcnQuZmFkZU91dCgpLmFuaW1hdGUoe1xyXG4gICAgICAgICdib3R0b20nOiAnMCUnXHJcbiAgICAgIH0sIHtcclxuICAgICAgICBkdXJhdGlvbjogJ3Nsb3cnLFxyXG4gICAgICAgIHF1ZXVlOiBmYWxzZVxyXG4gICAgICB9KTtcclxuICAgIH0sIHRpbWVPdXQpO1xyXG4gIH0pLmFuaW1hdGUoe1xyXG4gICAgJ2JvdHRvbSc6ICcyMHZoJ1xyXG4gIH0sIHtcclxuICAgIGR1cmF0aW9uOiAnc2xvdycsXHJcbiAgICBxdWV1ZTogZmFsc2VcclxuICB9KTtcclxuXHJcbn1cclxuXHJcbi8vLy8vLy8vLy8vLyBWYWxpZGEgbG9uZ2l0dWRcclxuZnVuY3Rpb24gdmFsaWRhckxlbmd0aCh2YWxvciwgbWluTGVuZ3RoLCBtYXhMZW5ndGgpIHtcclxuICBpZiAoKHZhbG9yID49IG1pbkxlbmd0aCkgJiAodmFsb3IgPD0gbWF4TGVuZ3RoKSkge1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHZhbGlkYXRlRm9ybShmb3JtKSB7XHJcblxyXG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgbGV0IGlucHV0cyA9ICQoZm9ybSkuZmluZCgnaW5wdXQsc2VsZWN0Jyk7XHJcbiAgbGV0IGNhbXBvc09ibGlnYSA9ICQoZm9ybSkuZmluZCgnaW5wdXQ6dmlzaWJsZSxzZWxlY3Q6dmlzaWJsZScpLmxlbmd0aDtcclxuICBsZXQgYm90b25TdWJtaXQgPSAkKGZvcm0pLmZpbmQoJ2J1dHRvblt0eXBlPVwic3VibWl0XCJdJyk7XHJcblxyXG4gIC8vVmFyaWFibGUgcGFyYSBjb21wcmFyIGxvcyBpbnB1dHMgcXVlIGVzdGFuIGJpZW4gY29uIGxhIGNhbnRpZGFkIGRlIGlucHV0cyBkZWwgZm9ybXVsYXJpb1xyXG4gIGxldCB0b3RhbCA9IDA7XHJcbiAgLy9leHByZXNpb25lcyBSZWd1bGFyZXNcclxuICBjb25zdCByZWdFeHBFbWFpbCA9IC9eW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKyg/OlxcLlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSspKkAoPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XFwuKStbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/JC87XHJcbiAgY29uc3QgcmVnRXhwTnVtYmVyID0gL15cXGQrJC87XHJcblxyXG5cclxuXHJcblxyXG4gIC8vLy9WYWxpZGFyIGxvcyBjYW1wb3NcclxuICAkKGZvcm0pLmZpbmQoJ2lucHV0LHNlbGVjdCcpLmVhY2goZnVuY3Rpb24oaSwgZSkge1xyXG5cclxuXHJcbiAgICBsZXQgdmFsb3JJbnB1dCA9ICQoZSkudmFsKCk7XHJcbiAgICBsZXQgdmFsb3JDaGVja2JveCA9ICQoZSkucHJvcCgnY2hlY2tlZCcpO1xyXG4gICAgbGV0IHZhbG9yU2VsZWN0ID0gJChlKS52YWwoKTtcclxuICAgIGxldCBjdXN0b21EaXZDaGVjayA9ICQoZSkucGFyZW50KCkuZmluZCgnZGl2LmN1c3RvbS1jaGVja2JveCcpO1xyXG5cclxuXHJcbiAgICBpZiAoJChlKS5sZW5ndGggIT09IDApIHtcclxuICAgICAgc3dpdGNoICgkKGUpLmF0dHIoJ3R5cGUnKSkge1xyXG5cclxuICAgICAgICBjYXNlIFwidGV4dFwiOlxyXG4gICAgICAgICAgdmFsb3JJbnB1dCAhPT0gXCJcIiA/IHBpbnRhclN0aWxvcygkKGUpLCAndmFsaWRvJykgOiBwaW50YXJTdGlsb3MoJChlKSwgJ2Vycm9yJyk7XHJcbiAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgY2FzZSBcInBhc3N3b3JkXCI6XHJcbiAgICAgICAgICB2YWxvcklucHV0ICE9PSBcIlwiID8gcGludGFyU3RpbG9zKCQoZSksICd2YWxpZG8nKSA6IHBpbnRhclN0aWxvcygkKGUpLCAnZXJyb3InKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBjYXNlIFwiZGF0ZVwiOlxyXG4gICAgICAgICAgdmFsb3JJbnB1dCAhPT0gXCJcIiA/IHBpbnRhclN0aWxvcygkKGUpLCAndmFsaWRvJykgOiBwaW50YXJTdGlsb3MoJChlKSwgJ2Vycm9yJyk7XHJcbiAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgY2FzZSBcImlkZW50aWZpY2F0aW9uXCI6XHJcbiAgICAgICAgICBpZiAoKHJlZ0V4cE51bWJlci50ZXN0KCQoZSkucHJvcCgndmFsdWUnKSkpICYgKHZhbGlkYXJMZW5ndGgodmFsb3JJbnB1dC5sZW5ndGgsIDEwLCAxMCkpKSB7XHJcbiAgICAgICAgICAgIHBpbnRhclN0aWxvcygkKGUpLCAndmFsaWRvJyk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBwaW50YXJTdGlsb3MoJChlKSwgJ2Vycm9yJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgY2FzZSBcImVtYWlsQ3VzdG9tXCI6XHJcbiAgICAgICAgICByZWdFeHBFbWFpbC50ZXN0KCQoZSkucHJvcCgndmFsdWUnKSkgPyBwaW50YXJTdGlsb3MoJChlKSwgJ3ZhbGlkbycpIDogcGludGFyU3RpbG9zKCQoZSksICdlcnJvcicpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIGNhc2UgXCJjaGVja2JveFwiOlxyXG4gICAgICAgICAgdmFsb3JDaGVja2JveCAhPT0gZmFsc2UgPyBwaW50YXJTdGlsb3MoY3VzdG9tRGl2Q2hlY2ssICd2YWxpZG8nKSA6IHBpbnRhclN0aWxvcyhjdXN0b21EaXZDaGVjaywgJ2Vycm9yJyk7XHJcbiAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgY2FzZSBcInNlbGVjdFwiOlxyXG4gICAgICAgICAgdmFsb3JTZWxlY3QgIT0gMSA/IHBpbnRhclN0aWxvcygkKGUpLCAndmFsaWRvJykgOiBwaW50YXJTdGlsb3MoJChlKSwgJ2Vycm9yJyk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICB0b3RhbCA9IHRvdGFsICsgY3VtcGxlO1xyXG4gICAgfVxyXG5cclxuICB9KTtcclxuXHJcbiAgaWYgKHRvdGFsID09PSBjYW1wb3NPYmxpZ2EpIHtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG5cclxufVxyXG4vLyBOT1RFOiBDT05GSUcgQ09OU1VMVEFTXHJcbiQuYWpheFNldHVwKHtcclxuICB1cmw6ICdzZXJ2aWNlcy9wcm9jZXNzLnBocCcsXHJcbiAgdHlwZTogJ1BPU1QnLFxyXG4gIGFzeW5jOiB0cnVlLFxyXG4gIGVycm9yOiBmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgY29uc29sZS5sb2coJ3Jlc3BvbnNlJywgcmVzcG9uc2UpO1xyXG4gICAgc2hvd0FsZXJ0KFwic2VydmVyRG93blwiLCAxMDAwLCAzMDAwKTtcclxuICB9XHJcbn0pO1xyXG5cclxuLy8vLyBOT1RFOiBCVVNDQURPUlxyXG5cclxudmFyIHBldGljaW9uO1xyXG52YXIgYnV0dG9uU2VhcmNoID0gJCgnI3NlYXJjaEFsbCcpO1xyXG5cclxuYnV0dG9uU2VhcmNoLmtleXByZXNzKGZ1bmN0aW9uKCkge1xyXG4gIHNlYXJjaFN0dWRlbnQoJCh0aGlzKSk7XHJcbn0pO1xyXG4kKCdzcGFuLmljb24tc2VhcmNoJykuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgc2VhcmNoU3R1ZGVudChidXR0b25TZWFyY2gpO1xyXG59KTtcclxuXHJcbmZ1bmN0aW9uIHNlYXJjaFN0dWRlbnQoYnV0dG9uKSB7XHJcblxyXG4gIGxldCB2YWx1ZSA9IGJ1dHRvbi52YWwoKTtcclxuICBsZXQgaW5wdXQgPSBidXR0b247XHJcblxyXG5cclxuICBjbGVhclRpbWVvdXQocGV0aWNpb24pO1xyXG4gIHBldGljaW9uID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgIGxldCBkYXRhID0gJ2lkRm9ybT1zZXJhY2hFc3R1JicgKyBpbnB1dC5zZXJpYWxpemUoKTtcclxuXHJcblxyXG5cclxuICAgICQucG9zdChcInNlcnZpY2VzL3Byb2Nlc3MucGhwXCIsIGRhdGEsIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICB2YXIgc3R1ZGVudHMgPSBKU09OLnBhcnNlKHJlc3BvbnNlKTs7XHJcblxyXG4gICAgICBpZiAoc3R1ZGVudHMuc3VjY2VzcyA9PSBcIkVycm9yXCIpIHtcclxuICAgICAgICBzaG93QWxlcnQoXCJlcnJvclwiLCAxMDAwLCAzMDAwKTtcclxuICAgICAgfSBlbHNlIGlmIChzdHVkZW50cy5zdWNjZXNzID09IFwiRG9uJ3QgZXhpc3RzXCIpIHtcclxuICAgICAgICBzaG93QWxlcnQoXCJlcnJvclwiLCAxMDAwLCAzMDAwKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhzdHVkZW50cyk7XHJcbiAgICAgICAgc2hvd1N0dWRlbnRzKHN0dWRlbnRzKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG5cclxuICB9LCAxMDAwKTtcclxuXHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiBzaG93U3R1ZGVudHMoc3R1ZGVudHMpIHtcclxuICAkKCcjc2hvd1N0dWRlbnRzJykuZW1wdHkoKTtcclxuICAkLmVhY2goc3R1ZGVudHMsIGZ1bmN0aW9uKGlkLCBzdHVkZW50KSB7XHJcblxyXG4gICAgLy8gJC5lYWNoKHN0dWRlbnQsIGZ1bmN0aW9uKGNhbXBvLCB2YWx1ZSkge1xyXG4gICAgLy8gICBpZiAodmFsdWUgPT0gbnVsbCkge1xyXG4gICAgLy9cclxuICAgIC8vICAgICB2YWx1ZSA9IFwiIFwiO1xyXG4gICAgLy8gICB9XHJcbiAgICAvL1xyXG4gICAgLy9cclxuICAgIC8vIH0pO1xyXG5cclxuICAgICQoJyNzaG93U3R1ZGVudHMnKS5hcHBlbmQoXHJcbiAgICAgIGBcclxuICAgICAgPHRyPlxyXG4gICAgICAgIDx0ZD4ke2lkKzF9PC90ZD5cclxuICAgICAgICA8dGQ+JHtzdHVkZW50Lm5kb2N9PC90ZD5cclxuICAgICAgICA8dGQ+JHtzdHVkZW50LnRkb2NfcGVyc29uYX08L3RkPlxyXG4gICAgICAgIDx0ZD4ke3N0dWRlbnQubm9tYnJlMX0gJHtzdHVkZW50Lm5vbWJyZTJ9PC90ZD5cclxuICAgICAgICA8dGQ+JHtzdHVkZW50LmFwZWxsaWRvMX0gJHtzdHVkZW50LmFwZWxsaWRvMn08L3RkPlxyXG4gICAgICAgIDx0ZCBjbGFzcz1cInRhYmxlLW9wdGlvbnNcIj48c3BhbiBjbGFzcz1cImljb24tZXllXCI+PC9zcGFuPjw/cGhwIGlmKCRyb2wgPT09ICdDb29yZGluYWRvcicpeyA/PjxzcGFuIGNsYXNzPVwiaWNvbi1wbHVzXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwiaWNvbi1iaW5cIj48L3NwYW4+PD9waHAgfSA/PjwvdGQ+XHJcbiAgICAgIDwvdHI+XHJcbiAgICAgIGBcclxuICAgICk7XHJcblxyXG4gIH0pO1xyXG5cclxuICBvcHRpb25zU3R1ZGVudHMoKTtcclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9wdGlvbnNTdHVkZW50cygpIHtcclxuICAvLy8vRWxpbWluYXIgRVNUVURJQU5URVxyXG5cclxuICAkKCdzcGFuLmljb24tYmluJykuY2xpY2soZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgJCgnI21vZGFsRGVsZXRlJykuZmFkZUluKCkuY3NzKHtcclxuICAgICAgXCJkaXNwbGF5XCI6IFwiZmxleFwiXHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgLy8vL01vc3RyYXIgSU5GTyAvIEVESVRBUlxyXG4gICQoJ3NwYW4uaWNvbi1leWUnKS5jbGljayhmdW5jdGlvbigpIHtcclxuXHJcbiAgICBsZXQgbW9kYWxTaG93ID0gJCgnI21vZGFsRWRpdFNob3cnKTtcclxuICAgIGxldCBpbnB1dHMgPSBtb2RhbFNob3cuZmluZCgnc2VsZWN0LGlucHV0Jyk7XHJcbiAgICBsZXQgc2F2ZUJ1dHRvbnMgPSBtb2RhbFNob3cuZmluZCgnLmJ0bi1zdWJtaXRNb2RhbCcpO1xyXG5cclxuXHJcbiAgICBtb2RhbFNob3cuZmFkZUluKCkuY3NzKHtcclxuICAgICAgXCJkaXNwbGF5XCI6IFwiZmxleFwiXHJcbiAgICB9KTtcclxuXHJcbiAgICBpbnB1dHMuYXR0cignZGlzYWJsZWQnLCB0cnVlKTtcclxuICAgIHNhdmVCdXR0b25zLmhpZGUoKTtcclxuXHJcbiAgfSk7XHJcblxyXG5cclxuICAvLy8vTlVFVkEgTUFUUklDVUxBXHJcbiAgJCgnc3Bhbi5pY29uLXBsdXMnKS5jbGljayhmdW5jdGlvbigpIHtcclxuXHJcbiAgICBsZXQgbW9kYWxNYXRyaSA9ICQoJyNtb2RhbE1hdHJpY3VsYScpO1xyXG5cclxuICAgIG1vZGFsTWF0cmkuZmFkZUluKCkuY3NzKHtcclxuICAgICAgXCJkaXNwbGF5XCI6IFwiZmxleFwiXHJcbiAgICB9KTtcclxuXHJcbiAgfSk7XHJcbn1cclxuXHJcblxyXG4vLyBOT1RFOiBDT05TVUxUQSBMT0dJTlxyXG4kKCdmb3JtI2xvZ2luJykuc3VibWl0KGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgdmFyIGZvcm11bGFyaW8gPSAkKHRoaXMpO1xyXG4gIHZhciBkYXRhID0gZm9ybXVsYXJpby5zZXJpYWxpemUoKTtcclxuICBjb25zb2xlLmxvZyhkYXRhKTtcclxuXHJcbiAgJC5wb3N0KFwic2VydmljZXMvbG9naW4ucGhwP2xvZz10cnVlXCIsIGRhdGEsIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcblxyXG4gICAgdmFyIGpzb25EYXRhID0gSlNPTi5wYXJzZShyZXNwb25zZSk7XHJcbiAgICBpZiAoanNvbkRhdGEuc3VjY2VzcyA9PSBcIkNvb2xcIikge1xyXG5cclxuICAgICAgc2hvd0FsZXJ0KFwibmljZVwiLCAxMDAwLCAzMDAwKTtcclxuICAgICAgbG9jYXRpb24uaHJlZiA9ICdob21lLnBocCc7XHJcblxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc2hvd0FsZXJ0KFwiZXJyb3JcIiwgMTAwMCwgMzAwMCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG59KTtcclxuXHJcbi8vIE5PVEU6IExPRyBPVVRcclxuJCgnI2xvZ091dCcpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICQucG9zdChcInNlcnZpY2VzL2xvZ2luLnBocD9sb2c9ZmFsc2VcIiwgZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgIHZhciBqc29uRGF0YSA9IEpTT04ucGFyc2UocmVzcG9uc2UpO1xyXG4gICAgaWYgKGpzb25EYXRhLnN1Y2Nlc3MgPT0gXCJDb29sXCIpIHtcclxuICAgICAgbG9jYXRpb24uaHJlZiA9ICdpbmRleC5waHAnO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc2hvd0FsZXJ0KFwiZXJyb3JcIiwgMTAwMCwgMzAwMCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn0pO1xyXG5cclxuXHJcblxyXG5cclxuLy8gTk9URTogQ09OU1VMVEEgRURJVFxyXG4kKCdmb3JtLmVkaXQnKS5zdWJtaXQoZnVuY3Rpb24oZXZlbnQpIHtcclxuICBzZW5kRm9ybSh0aGlzLCBmYWxzZSk7XHJcbn0pO1xyXG5cclxuLy8gTk9URTogQ09OU1VMVEEgRURJVEFSIFVTRVJOQU1FXHJcbiQoJ2Zvcm0jZWRpdFVzZXJuYW1lJykuc3VibWl0KGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgc2VuZEZvcm0odGhpcywgZmFsc2UpO1xyXG59KTtcclxuXHJcbi8vIE5PVEU6IENPTlNVTFRBIEVESVRBUiBQQVNTV09SRFxyXG4kKCdmb3JtI2VkaXRQYXNzd29yZCcpLnN1Ym1pdChmdW5jdGlvbihldmVudCkge1xyXG4gIHNlbmRGb3JtKHRoaXMsIGZhbHNlKTtcclxufSk7XHJcblxyXG4vLyBOT1RFOiBDT05TVUxUQSBOVUVWTyBFU1RVRElBTlRFXHJcbiQoJ2Zvcm0jZXN0dWRpYW50ZScpLnN1Ym1pdChmdW5jdGlvbihldmVudCkge1xyXG4gIHNlbmRGb3JtKHRoaXMpO1xyXG59KTsgLy8gTk9URTogQ09OU1VMVEEgTlVFVk8gUkVTUE9OU0FCTEVcclxuJCgnZm9ybSNyZXNwb25zYWJsZScpLnN1Ym1pdChmdW5jdGlvbihldmVudCkge1xyXG4gIHNlbmRGb3JtKHRoaXMpO1xyXG59KTtcclxuLy8gTk9URTogQ09OU1VMVEEgRUxJTUlOQVJcclxuJCgnZm9ybSNkZWxldGUnKS5zdWJtaXQoZnVuY3Rpb24oZXZlbnQpIHtcclxuICBzZW5kRm9ybSh0aGlzKTtcclxufSk7XHJcbi8vIE5PVEU6IENPTlNVTFRBIE5VRVZBIE1BVFJJQ1VMQVxyXG4kKCdmb3JtI21hdHJpY3VsYScpLnN1Ym1pdChmdW5jdGlvbihldmVudCkge1xyXG4gIHNlbmRGb3JtKHRoaXMpO1xyXG59KTtcclxuXHJcbmZ1bmN0aW9uIHNlbmRGb3JtKGZvcm0sIGNsb3NlTW9kYWwgPSB0cnVlKSB7XHJcblxyXG4gIGxldCBpZEZvcm0gPSAkKGZvcm0pLmF0dHIoJ2lkJyk7XHJcbiAgbGV0IGlucHV0cyA9ICQoZm9ybSkuZmluZCgnaW5wdXQsc2VsZWN0Jyk7XHJcblxyXG4gIGlmICh2YWxpZGF0ZUZvcm0oZm9ybSkpIHtcclxuXHJcbiAgICB2YXIgZGF0YSA9ICdpZEZvcm09JyArIGlkRm9ybSArICcmJyArICQoZm9ybSkuc2VyaWFsaXplKCk7XHJcbiAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuXHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICBkYXRhOiBkYXRhLFxyXG4gICAgICBiZWZvcmVTZW5kOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAkKGZvcm0pLnBhcmVudCgpLmZpbmQoJy5sb2FkaW5nJykuc2hvdygpO1xyXG4gICAgICB9LFxyXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICQoZm9ybSkucGFyZW50KCkuZmluZCgnLmxvYWRpbmcnKS5mYWRlT3V0KDEwMDApO1xyXG4gICAgICAgIHZhciBqc29uRGF0YSA9IEpTT04ucGFyc2UocmVzcG9uc2UpO1xyXG4gICAgICAgIGlmIChqc29uRGF0YS5zdWNjZXNzID09IFwiQ29vbFwiKSB7XHJcblxyXG4gICAgICAgICAgaWYgKGNsb3NlTW9kYWwpIHtcclxuICAgICAgICAgICAgJChmb3JtKS5jbG9zZXN0KCcubW9kYWwnKS5mYWRlT3V0KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpbnB1dHMudmFsKCcnKS5yZW1vdmVDbGFzcygnY29ycmVjdG8nKTtcclxuICAgICAgICAgIHNob3dBbGVydChcIm5pY2VcIiwgMTAwMCwgMzAwMCk7XHJcblxyXG4gICAgICAgIH0gZWxzZSBpZiAoanNvbkRhdGEuc3VjY2VzcyA9PSBcIkVycm9yXCIpIHtcclxuICAgICAgICAgIHNob3dBbGVydChcImVycm9yXCIsIDEwMDAsIDMwMDApO1xyXG5cclxuICAgICAgICB9IGVsc2UgaWYgKGpzb25EYXRhLnN1Y2Nlc3MgPT0gXCJFbnRyeSBkdXBsaWNhdGVcIikge1xyXG4gICAgICAgICAgc2hvd0FsZXJ0KFwiZW50cnlEdXBsaWNhdGVcIiwgMTAwMCwgMzAwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5cclxuXHJcblxyXG4kLmdldEpTT04oJ2Fzc2V0cy9qc29uL2NpdHlzLmpzb24nLCBmdW5jdGlvbihkYXRhKSB7XHJcbiAgLy8gdmFyIGpzb25EYXRhID0gSlNPTi5wYXJzZShkYXRhKTtcclxuICB2YXIgb3B0aW9ucyA9IFtdO1xyXG4gIGxldCBzZWxlY3QgPSAkKCdzZWxlY3QuY2l0eXMnKTtcclxuXHJcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBmb3IgKHZhciB6ID0gMDsgeiA8IGRhdGFbaV0uY2l1ZGFkZXMubGVuZ3RoOyB6KyspIHtcclxuICAgICAgb3B0aW9ucy5wdXNoKFwiPG9wdGlvbiB2YWx1ZT0nXCIgKyBkYXRhW2ldLmNpdWRhZGVzW3pdICsgXCInPlwiICsgZGF0YVtpXS5kZXBhcnRhbWVudG8gKyAnLScgKyBkYXRhW2ldLmNpdWRhZGVzW3pdICsgXCI8L29wdGlvbj5cIik7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgb3B0aW9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgc2VsZWN0LmFwcGVuZChvcHRpb25zW2ldKTtcclxuICB9XHJcblxyXG59KTtcclxuXHJcbiQuZ2V0SlNPTignYXNzZXRzL2pzb24vYmxvb2RUeXBlcy5qc29uJywgZnVuY3Rpb24oZGF0YSkge1xyXG5cclxuICB2YXIgb3B0aW9ucyA9IFtdO1xyXG4gIGxldCBzZWxlY3QgPSAkKCdzZWxlY3QuYmxvb2RUeXBlcycpO1xyXG5cclxuICAkLmVhY2goZGF0YSwgZnVuY3Rpb24oa2V5KSB7XHJcbiAgICBvcHRpb25zLnB1c2goXCI8b3B0aW9uIHZhbHVlPSdcIiArIGtleSArIFwiJz5cIiArIGtleSArIFwiPC9vcHRpb24+XCIpO1xyXG4gIH0pXHJcblxyXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgb3B0aW9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgc2VsZWN0LmFwcGVuZChvcHRpb25zW2ldKTtcclxuICB9XHJcblxyXG59KTtcclxuIiwiJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XHJcbiAgLy9WQWxpZGFyIHNpIGVsIG5hdmVnYWRvciBlcyBJRS4gU2kgbG8gZXMsIGRpcmVjY2lvbmFybG8gYSBvdHJhIHBhZ2luYVxyXG4gIGlmIChuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoXCJUcmlkZW50L1wiKSA+IC0xKSB7XHJcbiAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICdodHRwczovL3d3dy5nb29nbGUuY29tLm14L2Nocm9tZS8/YnJhbmQ9Q0hCRiZkc19raWQ9NDM3MDAwMzQ2MzI3NDg2OTQmdXRtX3NvdXJjZT1iaW5nJnV0bV9tZWRpdW09Y3BjJnV0bV9jYW1wYWlnbj0xMDA1OTkyJTIwJTdDJTIwQ2hyb21lJTIwV2luMTAlMjAlN0MlMjBEUiUyMCU3QyUyMEVTUzAxJTIwJTdDJTIwTkElMjAlN0MlMjBOQSUyMCU3QyUyMGVzJTIwJTdDJTIwRGVzayUyMCU3QyUyMEJJTkclMjBTRU0lMjAlN0MlMjBCS1dTJTIwfiUyMFRvcCUyMEtXRFMlMjAtJTIwRXhhY3QmdXRtX3Rlcm09ZGVzY2FyZ2FyJTIwY2hyb21lJnV0bV9jb250ZW50PURvd25sb2FkJTIwQ2hyb21lJTIwLSUyMEV4YWN0JmdjbGlkPUNPNzBtNlRULWVVQ0ZVVENEUW9kbWl3RFJRJmdjbHNyYz1kcydcclxuICB9XHJcbiAgLy9GYWRlIGluIGRlIGxhIHDDoWdpbmEgTG9naW4gYWwgaW5pY2lhciBlbCBuYXZlZ2Fkb3JcclxuXHJcbiAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICQoJ3NlY3Rpb24jbG9naW4nKS5mYWRlSW4oMTUwMCkuY3NzKHtcclxuICAgICAgXCJkaXNwbGF5XCI6IFwiZmxleFwiXHJcbiAgICB9KTtcclxuICB9LCA1MDApO1xyXG4gIC8vSW5pY2lhbGl6YXIgbGFzIGFuaW1hY2lvbmVzIGRlIGxhIGxpYnJlcmlhIFdPVyAoYW5pbWFjaW9uZXMpXHJcbiAgdmFyIHdvdyA9IG5ldyBXT1coKS5pbml0KCk7XHJcblxyXG4gIC8vIEhhY2VyIHF1ZSBsb3MgY2hlY2tib3ggY29uIGVzdGlsb3MgZnVuY2lvbmVuXHJcbiAgJCgnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJykuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICBsZXQgY3VzdG9tQ2hlY2sgPSAkKHRoaXMpLnBhcmVudCgpLmZpbmQoJ2Rpdi5jdXN0b20tY2hlY2tib3gnKTtcclxuICAgICQodGhpcykucHJvcCgnY2hlY2tlZCcpID8gY3VzdG9tQ2hlY2sudGV4dCgn4pyUJykgOiBjdXN0b21DaGVjay50ZXh0KCcnKTtcclxuICB9KTtcclxuXHJcbiAgLy8gRWZlY3RvcyBtZW51IGJ1cmd1ZXJcclxuICAkKCdkaXYuaWNvbi1tZW51JykuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICBsZXQgbWVudSA9ICQoJ2Rpdi5tZW51LWNvbnRhaW5lcicpO1xyXG4gICAgaWYgKG1lbnUuY3NzKCdkaXNwbGF5JykgPT0gXCJub25lXCIpIHtcclxuICAgICAgbWVudS5zbGlkZURvd24oKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG1lbnUuc2xpZGVVcCgpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAkKCcjYWNvdW50YnRuJykuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICBsZXQgYWNvdW50Q29udGFpbmVyID0gJCgnLmFjY291bnQtY29udGFpbmVyJyk7XHJcbiAgICBpZiAoYWNvdW50Q29udGFpbmVyLmNzcygnZGlzcGxheScpID09IFwibm9uZVwiKSB7XHJcbiAgICAgIGFjb3VudENvbnRhaW5lci5zbGlkZURvd24oKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGFjb3VudENvbnRhaW5lci5zbGlkZVVwKCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIC8vTW9kYWxlc1xyXG5cclxuICAvLy8vRWRpdGFyIHVzdWVhcmlvXHJcbiAgJCgnI2VkaXRVc2VyJykuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAkKCcjbW9kYWxFZGl0VXNlcicpLmZhZGVJbigpLmNzcyh7XHJcbiAgICAgIFwiZGlzcGxheVwiOiBcImZsZXhcIlxyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIC8vLy9OdWV2YSBtYXRyaWN1bGFcclxuICAkKCcjYWRkUmVsYXRpdmUnKS5jbGljayhmdW5jdGlvbigpIHtcclxuXHJcbiAgICBsZXQgbW9kYWwgPSAkKCcjbW9kYWxOZXdSZWxhdGl2ZScpO1xyXG4gICAgbGV0IGNsb3Nlc3RNb2RhbCA9ICQodGhpcykuY2xvc2VzdCgnLm1vZGFsJyk7XHJcblxyXG5cclxuICAgIGNsb3Nlc3RNb2RhbC5jc3Moe1wiei1pbmRleFwiOiBcIjEwXCJ9KVxyXG5cclxuICAgIG1vZGFsLmZhZGVJbigpLmNzcyh7XHJcbiAgICAgIFwiZGlzcGxheVwiOiBcImZsZXhcIixcclxuICAgIH0pO1xyXG5cclxuXHJcbiAgfSk7XHJcblxyXG4gIC8vLy9OVUVWTyBFU1RVRElBTlRFXHJcbiAgJCgnI25ld1N0dWRlbnQnKS5jbGljayhmdW5jdGlvbigpIHtcclxuXHJcbiAgICBsZXQgbW9kYWwgPSAkKCcjbW9kYWxOZXdTdHVkZW50Jyk7XHJcblxyXG4gICAgbGV0IGNsb3Nlc3RNb2RhbCA9ICQodGhpcykuY2xvc2VzdCgnLm1vZGFsJyk7XHJcblxyXG5cclxuICAgIGNsb3Nlc3RNb2RhbC5jc3Moe1wiei1pbmRleFwiOiBcIjEwXCJ9KVxyXG5cclxuICAgIG1vZGFsLmZhZGVJbigpLmNzcyh7XHJcbiAgICAgIFwiZGlzcGxheVwiOiBcImZsZXhcIixcclxuICAgIH0pO1xyXG5cclxuXHJcbiAgfSk7XHJcblxyXG5cclxuICAvLy8vQ2VycmFyIG1vZGFsZXNcclxuICAkKCcuYnRuLWNhbmNlbCcpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgJCh0aGlzKS5jbG9zZXN0KCcubW9kYWwsLm1vZGFsLXRpdHRsZScpLmZhZGVPdXQoKTtcclxuICAgIC8vICQoJy5sb2FkaW5nJykuZmFkZU91dCgpO1xyXG4gICAgJCgnLmFsZXJ0LWNvbnRhaW5lcicpLmZhZGVPdXQoKTtcclxuICB9KTtcclxuXHJcblxyXG4gICQoJyNidG4tZWRpdFN0dWRlbnQnKS5jbGljayhmdW5jdGlvbigpe1xyXG4gICAgbGV0IG1vZGFsID0gJCh0aGlzKS5jbG9zZXN0KCcubW9kYWwnKTtcclxuICAgIGxldCBpbnB1dHMgPSBtb2RhbC5maW5kKCdzZWxlY3QsaW5wdXQnKTtcclxuXHJcbiAgICBtb2RhbC5maW5kKCcuYnRuLXN1Ym1pdE1vZGFsJykuZmFkZUluKCc1MDAnKTtcclxuICAgIGlucHV0cy5hdHRyKCdkaXNhYmxlZCcsIGZhbHNlKTtcclxuICB9KTtcclxuXHJcblxyXG5cclxuXHJcbiAgLy9UYWJsYXNcclxuICAkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoIDw9IDUyMCkge1xyXG4gICAgICAkKCd0YWJsZScpLmNzcyh7XHJcbiAgICAgICAgXCJvdmVyZmxvdy14XCI6IFwic2Nyb2xsXCJcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG5cclxuXHJcblxyXG59KTtcclxuIl19
