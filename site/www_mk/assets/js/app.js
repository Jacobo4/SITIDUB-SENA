function e(e,t){"error"===t?(e.addClass("error"),e.removeClass("correcto"),cumple=0):"valido"===t&&(e.addClass("correcto"),e.removeClass("error"),cumple=1)}function t(e,t,n){const i=$("div.alert-container");i.find("div.alert-content").empty(),i.removeClass(),i.addClass("alert-container"),1===e?i.addClass("alert-check").find("div.alert-content").text("Nice !"):2===e?i.addClass("alert-error").find("div.alert-content").text("Hmm, something went wrong"):3===e&&i.addClass("alert-server").find("div.alert-content").text("Maybe the server is down :("),i.fadeIn(t,"linear",(function(){setTimeout((function(){i.fadeOut().animate({bottom:"0%"},{duration:"slow",queue:!1})}),n)})).animate({bottom:"20vh"},{duration:"slow",queue:!1})}function n(e,t,n){return!!(e>=t&e<=n)}function i(t){event.preventDefault();var i=$(t).find("input,select").length,o=($(t).find('button[type="submit"]'),0);const a=/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/,s=/^\d+$/;return $(t).find("input,select").each((function(t,i){var c=$(i).val(),r=$(i).prop("checked"),d=$(i).val(),l=$(i).parent().find("div.custom-checkbox");if(0!==$(i).length){switch($(i).attr("type")){case"text":case"password":case"date":e($(i),""!==c?"valido":"error");break;case"identification":s.test($(i).prop("value"))&n(c.length,10,10)?e($(i),"valido"):e($(i),"error");break;case"emailCustom":a.test($(i).prop("value"))?e($(i),"valido"):e($(i),"error");break;case"checkbox":e(l,!1!==r?"valido":"error");break;case"select":e($(i),1!=d?"valido":"error")}o+=cumple}})),o===i}$(document).ready((function(){navigator.userAgent.indexOf("Trident/")>-1&&(window.location.href="https://www.google.com.mx/chrome/?brand=CHBF&ds_kid=43700034632748694&utm_source=bing&utm_medium=cpc&utm_campaign=1005992%20%7C%20Chrome%20Win10%20%7C%20DR%20%7C%20ESS01%20%7C%20NA%20%7C%20NA%20%7C%20es%20%7C%20Desk%20%7C%20BING%20SEM%20%7C%20BKWS%20~%20Top%20KWDS%20-%20Exact&utm_term=descargar%20chrome&utm_content=Download%20Chrome%20-%20Exact&gclid=CO70m6TT-eUCFUTCDQodmiwDRQ&gclsrc=ds"),setTimeout((function(){$("section#login").fadeIn(1500).css({display:"flex"})}),500);(new WOW).init();$('input[type="checkbox"]').click((function(){let e=$(this).parent().find("div.custom-checkbox");$(this).prop("checked")?e.text("âœ”"):e.text("")})),$("div.icon-menu").click((function(){let e=$("div.menu-container");"none"==e.css("display")?e.slideDown():e.slideUp()})),$("#acountbtn").click((function(){let e=$(".account-container");"none"==e.css("display")?e.slideDown():e.slideUp()})),$("#editUser").click((function(){$("#modalEditUser").fadeIn().css({display:"flex"})})),$("#newStudent,#addRelative").click((function(){let e=$("#modalNuevo"),t=$(this).closest(".modal"),n=e.find(".student").parent(),i=e.find(".relative").parent();switch(t.css({"z-index":"10"}),e.fadeIn().css({display:"flex"}),$(this).attr("id")){case"newStudent":e.find("#tittle-person").text("Student's info"),i.hide(),n.show();break;case"addRelative":e.find("#tittle-person").text("Relative's info"),n.hide(),i.show()}})),$(".btn-cancel").click((function(){$(this).closest(".modal,.modal-tittle").fadeOut(),$(".alert-container").fadeOut()})),$("span.icon-bin").click((function(){$("#modalElminar").fadeIn().css({display:"flex"})})),$("span.icon-eye").click((function(){let e=$("#modalEditShow"),t=e.find("select,input"),n=e.find(".btn-submitModal");e.fadeIn().css({display:"flex"}),t.attr("disabled",!0),n.hide()})),$("#editStudent").click((function(){let e=$(this).closest(".modal"),t=e.find("select,input");e.find(".btn-submitModal").fadeIn("500"),t.attr("disabled",!1)})),$("span.icon-plus").click((function(){$("#modalMatricula").fadeIn().css({display:"flex"})})),$(window).resize((function(){window.innerWidth<=520&&$("table").css({"overflow-x":"scroll"})}))})),$.ajaxSetup({url:"procesar.php",type:"POST",async:!0,error:function(e){console.log("response",e),t(3,1e3,3e3)}}),$("form#login").submit((function(e){e.preventDefault();var n=$(this),i=$(n).serialize();console.log(i),$.post("login.php?log=true",i,(function(e){"1"==JSON.parse(e).success?(t(1,1e3,3e3),location.href="home.php"):t(2,1e3,3e3)}))})),$("#logOut").click((function(){$.post("login.php?log=false",(function(e){"1"==JSON.parse(e).success?location.href="index.php":t(2,1e3,3e3)}))})),$("form#editUsername").submit((function(e){var n=$(this),o=n.attr("id");if(i(this)){var a="idForm="+o+"&"+$(n).serialize();console.log(a),$.post("procesar.php",a,(function(e){n.parent().find(".loading").show()})).done((function(e){n.parent().find(".loading").fadeOut(1e3),"1"==JSON.parse(e).success?t(1,1e3,3e3):t(2,1e3,3e3)}))}})),$("form#editPassword").submit((function(e){var n=$(this),o=n.attr("id");if(i(this)){var a="idForm="+o+"&"+$(n).serialize();console.log(a),$.post("procesar.php",a,(function(e){n.parent().find(".loading").show()})).done((function(e){n.parent().find(".loading").fadeOut(1e3),"1"==JSON.parse(e).success?t(1,1e3,3e3):t(2,1e3,3e3)}))}})),$("form.edit").submit((function(e){var n=$(this),o=n.attr("id");if(i(this)){var a="idForm="+o+"&"+$(n).serialize();console.log(a),$.post("procesar.php",a,(function(e){n.parent().find(".loading").show()})).done((function(e){n.parent().find(".loading").fadeOut(1e3),"1"==JSON.parse(e).success?t(1,1e3,3e3):t(2,1e3,3e3)}))}})),$("form#eliminar").submit((function(e){var n=$(this),o=n.attr("id");if(i(this)){var a="idForm="+o+"&"+$(n).serialize();console.log(a),$.ajax({data:a,beforeSend:function(){n.parent().find(".loading").show()},success:function(e){n.parent().find(".loading").fadeOut(1e3),"1"==JSON.parse(e).success?(n.closest(".modal").fadeOut(),t(1,1e3,3e3)):t(2,1e3,3e3)}})}})),$("form#matricula").submit((function(e){var n=$(this),o=n.attr("id");if(i(this)){var a="idForm="+o+"&"+$(n).serialize();console.log(a),$.ajax({data:a,beforeSend:function(){n.parent().find(".loading").show()},success:function(e){n.parent().find(".loading").fadeOut(1e3),"1"==JSON.parse(e).success?(n.closest(".modal").fadeOut(),t(1,1e3,3e3)):t(2,1e3,3e3)}})}})),$("form#persona").submit((function(e){var n=$(this),o=n.attr("id");if(i(this)){var a="idForm="+o+"&"+$(n).serialize();console.log(a),$.ajax({data:a,beforeSend:function(){n.parent().find(".loading").show()},success:function(e){n.parent().find(".loading").fadeOut(1e3),"1"==JSON.parse(e).success?(n.closest(".modal").fadeOut(),n.closest(".modal").find("form").hide(),n.closest(".modal").find("form#matricula").show(),t(1,1e3,3e3)):t(2,1e3,3e3)}})}})),$("form#acudiente").submit((function(e){var n=$(this),o=n.attr("id");if(i(this)){var a="idForm="+o+"&"+$(n).serialize();console.log(a),$.ajax({data:a,beforeSend:function(){n.parent().find(".loading").show()},success:function(e){n.parent().find(".loading").fadeOut(1e3),"1"==JSON.parse(e).success?t(1,1e3,3e3):t(2,1e3,3e3)}})}}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl9fZm9ybXMuanMiLCJfZG9tLmpzIl0sIm5hbWVzIjpbInBpbnRhclN0aWxvcyIsImVsZW0iLCJ0aXBvIiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsImN1bXBsZSIsInNob3dBbGVydCIsInRpbWVJbiIsInRpbWVPdXQiLCJkaXZBbGVydCIsIiQiLCJmaW5kIiwiZW1wdHkiLCJ0ZXh0IiwiZmFkZUluIiwic2V0VGltZW91dCIsImZhZGVPdXQiLCJhbmltYXRlIiwiYm90dG9tIiwiZHVyYXRpb24iLCJxdWV1ZSIsInZhbGlkYXJMZW5ndGgiLCJ2YWxvciIsIm1pbkxlbmd0aCIsIm1heExlbmd0aCIsInZhbGlkYXRlRm9ybSIsImZvcm0iLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiY2FtcG9zT2JsaWdhIiwibGVuZ3RoIiwidG90YWwiLCJyZWdFeHBFbWFpbCIsInJlZ0V4cE51bWJlciIsImVhY2giLCJpIiwiZSIsInZhbG9ySW5wdXQiLCJ2YWwiLCJ2YWxvckNoZWNrYm94IiwicHJvcCIsInZhbG9yU2VsZWN0IiwiY3VzdG9tRGl2Q2hlY2siLCJwYXJlbnQiLCJhdHRyIiwidGVzdCIsImRvY3VtZW50IiwicmVhZHkiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJpbmRleE9mIiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwiY3NzIiwiZGlzcGxheSIsIldPVyIsImluaXQiLCJjbGljayIsImN1c3RvbUNoZWNrIiwidGhpcyIsIm1lbnUiLCJzbGlkZURvd24iLCJzbGlkZVVwIiwiYWNvdW50Q29udGFpbmVyIiwibW9kYWwiLCJjbG9zZXN0TW9kYWwiLCJjbG9zZXN0IiwiaW5wdXRTdHVkZW50IiwiaW5wdXRSZWxhdGl2ZSIsInotaW5kZXgiLCJoaWRlIiwic2hvdyIsIm1vZGFsU2hvdyIsImlucHV0cyIsInNhdmVCdXR0b25zIiwicmVzaXplIiwiaW5uZXJXaWR0aCIsIm92ZXJmbG93LXgiLCJhamF4U2V0dXAiLCJ1cmwiLCJ0eXBlIiwiYXN5bmMiLCJlcnJvciIsInJlc3BvbnNlIiwiY29uc29sZSIsImxvZyIsInN1Ym1pdCIsImZvcm11bGFyaW8iLCJkYXRhIiwic2VyaWFsaXplIiwicG9zdCIsIkpTT04iLCJwYXJzZSIsInN1Y2Nlc3MiLCJpZEZvcm11bGFyaW8iLCJkb25lIiwiYWpheCIsImJlZm9yZVNlbmQiXSwibWFwcGluZ3MiOiJBQUNBLFNBQUFBLEVBQUFDLEVBQUFDLEdBRUEsVUFBQUEsR0FDQUQsRUFBQUUsU0FBQSxTQUNBRixFQUFBRyxZQUFBLFlBQ0FDLE9BQUEsR0FFQSxXQUFBSCxJQUNBRCxFQUFBRSxTQUFBLFlBQ0FGLEVBQUFHLFlBQUEsU0FDQUMsT0FBQSxHQU1BLFNBQUFDLEVBQUFELEVBQUFFLEVBQUFDLEdBRUEsTUFBQUMsRUFBQUMsRUFBQSx1QkFHQUQsRUFBQUUsS0FBQSxxQkFBQUMsUUFDQUgsRUFBQUwsY0FDQUssRUFBQU4sU0FBQSxtQkFDQSxJQUFBRSxFQUVBSSxFQUFBTixTQUFBLGVBQUFRLEtBUEEscUJBT0FFLEtBQUEsVUFFQSxJQUFBUixFQUVBSSxFQUFBTixTQUFBLGVBQUFRLEtBWEEscUJBV0FFLEtBQUEsNkJBQ0EsSUFBQVIsR0FDQUksRUFBQU4sU0FBQSxnQkFBQVEsS0FiQSxxQkFhQUUsS0FBQSwrQkFHQUosRUFBQUssT0FBQVAsRUFBQSxVQUFBLFdBQ0FRLFlBQUEsV0FDQU4sRUFBQU8sVUFBQUMsUUFBQSxDQUNBQyxPQUFBLE1BQ0EsQ0FDQUMsU0FBQSxPQUNBQyxPQUFBLE1BRUFaLE1BQ0FTLFFBQUEsQ0FDQUMsT0FBQSxRQUNBLENBQ0FDLFNBQUEsT0FDQUMsT0FBQSxJQVNBLFNBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBQ0EsU0FBQUYsR0FBQUMsRUFBQUQsR0FBQUUsR0FPQSxTQUFBQyxFQUFBQyxHQUVBQyxNQUFBQyxpQkFFQSxJQUFBQyxFQUFBbkIsRUFBQWdCLEdBQUFmLEtBQUEsZ0JBQUFtQixPQUlBQyxHQUhBckIsRUFBQWdCLEdBQUFmLEtBQUEseUJBR0EsR0FFQSxNQUFBcUIsRUFB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QVQsR0FDQVUsUUFFQXhGLEVBQUEsRUFBQSxJQUFBLEtBR0FBLEVBQUEsRUFBQSxJQUFBIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vLy8vLy8vLy8vLyBQaW50YSBlc3RpbG9zIGRlIGVycm9yIHkgdmFsaWRvXHJcbmZ1bmN0aW9uIHBpbnRhclN0aWxvcyhlbGVtLCB0aXBvKSB7XHJcblxyXG4gIGlmICh0aXBvID09PSAnZXJyb3InKSB7XHJcbiAgICBlbGVtLmFkZENsYXNzKCdlcnJvcicpO1xyXG4gICAgZWxlbS5yZW1vdmVDbGFzcygnY29ycmVjdG8nKTtcclxuICAgIGN1bXBsZSA9IDA7XHJcblxyXG4gIH0gZWxzZSBpZiAodGlwbyA9PT0gJ3ZhbGlkbycpIHtcclxuICAgIGVsZW0uYWRkQ2xhc3MoJ2NvcnJlY3RvJyk7XHJcbiAgICBlbGVtLnJlbW92ZUNsYXNzKCdlcnJvcicpO1xyXG4gICAgY3VtcGxlID0gMTtcclxuICB9XHJcblxyXG59XHJcblxyXG4vLy8vLy8vLy8vLy8gTXVlc3RyYSBhbGVydGEgZGUgbG9zIGZvcm11bGFyaW9zXHJcbmZ1bmN0aW9uIHNob3dBbGVydChjdW1wbGUsIHRpbWVJbiwgdGltZU91dCkge1xyXG5cclxuICBjb25zdCBkaXZBbGVydCA9ICQoJ2Rpdi5hbGVydC1jb250YWluZXInKTtcclxuICBjb25zdCBjb250ZW50QWxlcnQgPSAnZGl2LmFsZXJ0LWNvbnRlbnQnO1xyXG5cclxuICBkaXZBbGVydC5maW5kKCdkaXYuYWxlcnQtY29udGVudCcpLmVtcHR5KCk7XHJcbiAgZGl2QWxlcnQucmVtb3ZlQ2xhc3MoKTtcclxuICBkaXZBbGVydC5hZGRDbGFzcygnYWxlcnQtY29udGFpbmVyJyk7XHJcbiAgaWYgKGN1bXBsZSA9PT0gMSkge1xyXG5cclxuICAgIGRpdkFsZXJ0LmFkZENsYXNzKCdhbGVydC1jaGVjaycpLmZpbmQoY29udGVudEFsZXJ0KS50ZXh0KCdOaWNlICEnKTtcclxuXHJcbiAgfSBlbHNlIGlmIChjdW1wbGUgPT09IDIpIHtcclxuXHJcbiAgICBkaXZBbGVydC5hZGRDbGFzcygnYWxlcnQtZXJyb3InKS5maW5kKGNvbnRlbnRBbGVydCkudGV4dCgnSG1tLCBzb21ldGhpbmcgd2VudCB3cm9uZycpO1xyXG4gIH0gZWxzZSBpZiAoY3VtcGxlID09PSAzKSB7XHJcbiAgICBkaXZBbGVydC5hZGRDbGFzcygnYWxlcnQtc2VydmVyJykuZmluZChjb250ZW50QWxlcnQpLnRleHQoJ01heWJlIHRoZSBzZXJ2ZXIgaXMgZG93biA6KCcpO1xyXG4gIH1cclxuXHJcbiAgZGl2QWxlcnQuZmFkZUluKHRpbWVJbiwgXCJsaW5lYXJcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICBkaXZBbGVydC5mYWRlT3V0KCkuYW5pbWF0ZSh7XHJcbiAgICAgICAgJ2JvdHRvbSc6ICcwJSdcclxuICAgICAgfSwge1xyXG4gICAgICAgIGR1cmF0aW9uOiAnc2xvdycsXHJcbiAgICAgICAgcXVldWU6IGZhbHNlXHJcbiAgICAgIH0pO1xyXG4gICAgfSwgdGltZU91dCk7XHJcbiAgfSkuYW5pbWF0ZSh7XHJcbiAgICAnYm90dG9tJzogJzIwdmgnXHJcbiAgfSwge1xyXG4gICAgZHVyYXRpb246ICdzbG93JyxcclxuICAgIHF1ZXVlOiBmYWxzZVxyXG4gIH0pO1xyXG5cclxufVxyXG5cclxuXHJcblxyXG5cclxuLy8vLy8vLy8vLy8vIFZhbGlkYSBsb25naXR1ZFxyXG5mdW5jdGlvbiB2YWxpZGFyTGVuZ3RoKHZhbG9yLCBtaW5MZW5ndGgsIG1heExlbmd0aCkge1xyXG4gIGlmICgodmFsb3IgPj0gbWluTGVuZ3RoKSAmICh2YWxvciA8PSBtYXhMZW5ndGgpKSB7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gdmFsaWRhdGVGb3JtKGZvcm0pIHtcclxuXHJcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgdmFyIGNhbXBvc09ibGlnYSA9ICQoZm9ybSkuZmluZCgnaW5wdXQsc2VsZWN0JykubGVuZ3RoO1xyXG4gIHZhciBib3RvblN1Ym1pdCA9ICQoZm9ybSkuZmluZCgnYnV0dG9uW3R5cGU9XCJzdWJtaXRcIl0nKTtcclxuXHJcbiAgLy9WYXJpYWJsZSBwYXJhIGNvbXByYXIgbG9zIGlucHV0cyBxdWUgZXN0YW4gYmllbiBjb24gbGEgY2FudGlkYWQgZGUgaW5wdXRzIGRlbCBmb3JtdWxhcmlvXHJcbiAgdmFyIHRvdGFsID0gMDtcclxuICAvL2V4cHJlc2lvbmVzIFJlZ3VsYXJlc1xyXG4gIGNvbnN0IHJlZ0V4cEVtYWlsID0gL15bYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKD86XFwuW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKykqQCg/OlthLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cXC4pK1thLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT8kLztcclxuICBjb25zdCByZWdFeHBOdW1iZXIgPSAvXlxcZCskLztcclxuXHJcbiAgLy8vL1ZhbGlkYXIgbG9zIGNhbXBvc1xyXG4gICQoZm9ybSkuZmluZCgnaW5wdXQsc2VsZWN0JykuZWFjaChmdW5jdGlvbihpLCBlKSB7XHJcblxyXG5cclxuICAgIHZhciB2YWxvcklucHV0ID0gJChlKS52YWwoKTtcclxuICAgIHZhciB2YWxvckNoZWNrYm94ID0gJChlKS5wcm9wKCdjaGVja2VkJyk7XHJcbiAgICB2YXIgdmFsb3JTZWxlY3QgPSAkKGUpLnZhbCgpO1xyXG4gICAgdmFyIGN1c3RvbURpdkNoZWNrID0gJChlKS5wYXJlbnQoKS5maW5kKCdkaXYuY3VzdG9tLWNoZWNrYm94Jyk7XHJcblxyXG5cclxuICAgIGlmICgkKGUpLmxlbmd0aCAhPT0gMCkge1xyXG4gICAgICBzd2l0Y2ggKCQoZSkuYXR0cigndHlwZScpKSB7XHJcblxyXG4gICAgICAgIGNhc2UgXCJ0ZXh0XCI6XHJcbiAgICAgICAgICB2YWxvcklucHV0ICE9PSBcIlwiID8gcGludGFyU3RpbG9zKCQoZSksICd2YWxpZG8nKSA6IHBpbnRhclN0aWxvcygkKGUpLCAnZXJyb3InKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBjYXNlIFwicGFzc3dvcmRcIjpcclxuICAgICAgICAgIHZhbG9ySW5wdXQgIT09IFwiXCIgPyBwaW50YXJTdGlsb3MoJChlKSwgJ3ZhbGlkbycpIDogcGludGFyU3RpbG9zKCQoZSksICdlcnJvcicpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIGNhc2UgXCJkYXRlXCI6XHJcbiAgICAgICAgICB2YWxvcklucHV0ICE9PSBcIlwiID8gcGludGFyU3RpbG9zKCQoZSksICd2YWxpZG8nKSA6IHBpbnRhclN0aWxvcygkKGUpLCAnZXJyb3InKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBjYXNlIFwiaWRlbnRpZmljYXRpb25cIjpcclxuICAgICAgICAgIGlmICgocmVnRXhwTnVtYmVyLnRlc3QoJChlKS5wcm9wKCd2YWx1ZScpKSkgJiAodmFsaWRhckxlbmd0aCh2YWxvcklucHV0Lmxlbmd0aCwgMTAsIDEwKSkpIHtcclxuICAgICAgICAgICAgcGludGFyU3RpbG9zKCQoZSksICd2YWxpZG8nKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHBpbnRhclN0aWxvcygkKGUpLCAnZXJyb3InKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBjYXNlIFwiZW1haWxDdXN0b21cIjpcclxuICAgICAgICAgIHJlZ0V4cEVtYWlsLnRlc3QoJChlKS5wcm9wKCd2YWx1ZScpKSA/IHBpbnRhclN0aWxvcygkKGUpLCAndmFsaWRvJykgOiBwaW50YXJTdGlsb3MoJChlKSwgJ2Vycm9yJyk7XHJcbiAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgY2FzZSBcImNoZWNrYm94XCI6XHJcbiAgICAgICAgICB2YWxvckNoZWNrYm94ICE9PSBmYWxzZSA/IHBpbnRhclN0aWxvcyhjdXN0b21EaXZDaGVjaywgJ3ZhbGlkbycpIDogcGludGFyU3RpbG9zKGN1c3RvbURpdkNoZWNrLCAnZXJyb3InKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBjYXNlIFwic2VsZWN0XCI6XHJcbiAgICAgICAgICB2YWxvclNlbGVjdCAhPSAxID8gcGludGFyU3RpbG9zKCQoZSksICd2YWxpZG8nKSA6IHBpbnRhclN0aWxvcygkKGUpLCAnZXJyb3InKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIHRvdGFsID0gdG90YWwgKyBjdW1wbGU7XHJcbiAgICB9XHJcblxyXG4gIH0pO1xyXG5cclxuICBpZiAodG90YWwgPT09IGNhbXBvc09ibGlnYSkge1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcblxyXG59XHJcbi8vIE5PVEU6IENPTkZJRyBDT05TVUxUQVNcclxuJC5hamF4U2V0dXAoe1xyXG4gIHVybDogJ3Byb2Nlc2FyLnBocCcsXHJcbiAgdHlwZTogJ1BPU1QnLFxyXG4gIGFzeW5jOiB0cnVlLFxyXG4gIGVycm9yOiBmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgY29uc29sZS5sb2coJ3Jlc3BvbnNlJywgcmVzcG9uc2UpO1xyXG4gICAgc2hvd0FsZXJ0KDMsIDEwMDAsIDMwMDApO1xyXG4gIH1cclxufSk7XHJcblxyXG4vLyBOT1RFOiBDT05TVUxUQSBMT0dJTlxyXG4kKCdmb3JtI2xvZ2luJykuc3VibWl0KGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgdmFyIGZvcm11bGFyaW8gPSAkKHRoaXMpO1xyXG4gIHZhciBkYXRhID0gJChmb3JtdWxhcmlvKS5zZXJpYWxpemUoKTtcclxuICBjb25zb2xlLmxvZyhkYXRhKTtcclxuXHJcbiAgJC5wb3N0KFwibG9naW4ucGhwP2xvZz10cnVlXCIsIGRhdGEsIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcblxyXG4gICAgdmFyIGpzb25EYXRhID0gSlNPTi5wYXJzZShyZXNwb25zZSk7XHJcbiAgICBpZiAoanNvbkRhdGEuc3VjY2VzcyA9PSBcIjFcIikge1xyXG5cclxuICAgICAgc2hvd0FsZXJ0KDEsIDEwMDAsIDMwMDApO1xyXG4gICAgICBsb2NhdGlvbi5ocmVmID0gJ2hvbWUucGhwJztcclxuXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzaG93QWxlcnQoMiwgMTAwMCwgMzAwMCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG59KTtcclxuXHJcbi8vIE5PVEU6IExPRyBPVVRcclxuJCgnI2xvZ091dCcpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICQucG9zdCggXCJsb2dpbi5waHA/bG9nPWZhbHNlXCIsIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICB2YXIganNvbkRhdGEgPSBKU09OLnBhcnNlKHJlc3BvbnNlKTtcclxuICAgIGlmIChqc29uRGF0YS5zdWNjZXNzID09IFwiMVwiKSB7XHJcbiAgICAgIGxvY2F0aW9uLmhyZWYgPSAnaW5kZXgucGhwJztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHNob3dBbGVydCgyLCAxMDAwLCAzMDAwKTtcclxuICAgIH1cclxuICB9KTtcclxufSk7XHJcblxyXG4vLyBOT1RFOiBDT05TVUxUQSBFRElUQVIgVVNFUk5BTUVcclxuJCgnZm9ybSNlZGl0VXNlcm5hbWUnKS5zdWJtaXQoZnVuY3Rpb24oZXZlbnQpIHtcclxuXHJcbiAgdmFyIGZvcm11bGFyaW8gPSAkKHRoaXMpO1xyXG4gIHZhciBpZEZvcm11bGFyaW8gPSBmb3JtdWxhcmlvLmF0dHIoJ2lkJyk7XHJcblxyXG4gIGlmICh2YWxpZGF0ZUZvcm0odGhpcykpIHtcclxuXHJcbiAgICAvLyBEYXRhIHF1ZSBzZSBlbnZpYSBhIGxhIGJhc2UgZGUgZGF0b3NcclxuICAgIHZhciBkYXRhID0gJ2lkRm9ybT0nICsgaWRGb3JtdWxhcmlvICsgJyYnICsgJChmb3JtdWxhcmlvKS5zZXJpYWxpemUoKTtcclxuICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG5cclxuICAgICQucG9zdChcInByb2Nlc2FyLnBocFwiLCBkYXRhLCBmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgIGZvcm11bGFyaW8ucGFyZW50KCkuZmluZCgnLmxvYWRpbmcnKS5zaG93KCk7XHJcblxyXG4gICAgICB9KVxyXG4gICAgICAuZG9uZShmdW5jdGlvbihyZXNwb25zZSkge1xyXG5cclxuICAgICAgICBmb3JtdWxhcmlvLnBhcmVudCgpLmZpbmQoJy5sb2FkaW5nJykuZmFkZU91dCgxMDAwKTtcclxuICAgICAgICB2YXIganNvbkRhdGEgPSBKU09OLnBhcnNlKHJlc3BvbnNlKTtcclxuICAgICAgICBpZiAoanNvbkRhdGEuc3VjY2VzcyA9PSBcIjFcIikge1xyXG4gICAgICAgICAgc2hvd0FsZXJ0KDEsIDEwMDAsIDMwMDApO1xyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgc2hvd0FsZXJ0KDIsIDEwMDAsIDMwMDApO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxufSk7XHJcblxyXG4vLyBOT1RFOiBDT05TVUxUQSBFRElUQVIgUEFTU1dPUkRcclxuJCgnZm9ybSNlZGl0UGFzc3dvcmQnKS5zdWJtaXQoZnVuY3Rpb24oZXZlbnQpIHtcclxuXHJcbiAgdmFyIGZvcm11bGFyaW8gPSAkKHRoaXMpO1xyXG4gIHZhciBpZEZvcm11bGFyaW8gPSBmb3JtdWxhcmlvLmF0dHIoJ2lkJyk7XHJcblxyXG4gIGlmICh2YWxpZGF0ZUZvcm0odGhpcykpIHtcclxuXHJcbiAgICAvLyBEYXRhIHF1ZSBzZSBlbnZpYSBhIGxhIGJhc2UgZGUgZGF0b3NcclxuICAgIHZhciBkYXRhID0gJ2lkRm9ybT0nICsgaWRGb3JtdWxhcmlvICsgJyYnICsgJChmb3JtdWxhcmlvKS5zZXJpYWxpemUoKTtcclxuICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG5cclxuICAgICQucG9zdChcInByb2Nlc2FyLnBocFwiLCBkYXRhLCBmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgIGZvcm11bGFyaW8ucGFyZW50KCkuZmluZCgnLmxvYWRpbmcnKS5zaG93KCk7XHJcblxyXG4gICAgICB9KVxyXG4gICAgICAuZG9uZShmdW5jdGlvbihyZXNwb25zZSkge1xyXG5cclxuICAgICAgICBmb3JtdWxhcmlvLnBhcmVudCgpLmZpbmQoJy5sb2FkaW5nJykuZmFkZU91dCgxMDAwKTtcclxuICAgICAgICB2YXIganNvbkRhdGEgPSBKU09OLnBhcnNlKHJlc3BvbnNlKTtcclxuICAgICAgICBpZiAoanNvbkRhdGEuc3VjY2VzcyA9PSBcIjFcIikge1xyXG4gICAgICAgICAgc2hvd0FsZXJ0KDEsIDEwMDAsIDMwMDApO1xyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgc2hvd0FsZXJ0KDIsIDEwMDAsIDMwMDApO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxufSk7XHJcblxyXG5cclxuXHJcbi8vIE5PVEU6IENPTlNVTFRBIEVESVRcclxuJCgnZm9ybS5lZGl0Jykuc3VibWl0KGZ1bmN0aW9uKGV2ZW50KSB7XHJcblxyXG4gIHZhciBmb3JtdWxhcmlvID0gJCh0aGlzKTtcclxuICB2YXIgaWRGb3JtdWxhcmlvID0gZm9ybXVsYXJpby5hdHRyKCdpZCcpO1xyXG5cclxuICBpZiAodmFsaWRhdGVGb3JtKHRoaXMpKSB7XHJcblxyXG4gICAgLy8gRGF0YSBxdWUgc2UgZW52aWEgYSBsYSBiYXNlIGRlIGRhdG9zXHJcbiAgICB2YXIgZGF0YSA9ICdpZEZvcm09JyArIGlkRm9ybXVsYXJpbyArICcmJyArICQoZm9ybXVsYXJpbykuc2VyaWFsaXplKCk7XHJcbiAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuXHJcbiAgICAkLnBvc3QoXCJwcm9jZXNhci5waHBcIiwgZGF0YSwgZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICBmb3JtdWxhcmlvLnBhcmVudCgpLmZpbmQoJy5sb2FkaW5nJykuc2hvdygpO1xyXG5cclxuICAgICAgfSlcclxuICAgICAgLmRvbmUoZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuXHJcbiAgICAgICAgZm9ybXVsYXJpby5wYXJlbnQoKS5maW5kKCcubG9hZGluZycpLmZhZGVPdXQoMTAwMCk7XHJcbiAgICAgICAgdmFyIGpzb25EYXRhID0gSlNPTi5wYXJzZShyZXNwb25zZSk7XHJcbiAgICAgICAgaWYgKGpzb25EYXRhLnN1Y2Nlc3MgPT0gXCIxXCIpIHtcclxuICAgICAgICAgIHNob3dBbGVydCgxLCAxMDAwLCAzMDAwKTtcclxuXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHNob3dBbGVydCgyLCAxMDAwLCAzMDAwKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICB9XHJcblxyXG59KTtcclxuXHJcblxyXG5cclxuXHJcbi8vIE5PVEU6IENPTlNVTFRBIEVMSU1JTkFSXHJcbiQoJ2Zvcm0jZWxpbWluYXInKS5zdWJtaXQoZnVuY3Rpb24oZXZlbnQpIHtcclxuXHJcbiAgdmFyIGZvcm11bGFyaW8gPSAkKHRoaXMpO1xyXG4gIHZhciBpZEZvcm11bGFyaW8gPSBmb3JtdWxhcmlvLmF0dHIoJ2lkJyk7XHJcblxyXG4gIGlmICh2YWxpZGF0ZUZvcm0odGhpcykpIHtcclxuXHJcbiAgICAvLyBEYXRhIHF1ZSBzZSBlbnZpYSBhIGxhIGJhc2UgZGUgZGF0b3NcclxuICAgIHZhciBkYXRhID0gJ2lkRm9ybT0nICsgaWRGb3JtdWxhcmlvICsgJyYnICsgJChmb3JtdWxhcmlvKS5zZXJpYWxpemUoKTtcclxuICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG5cclxuICAgICQuYWpheCh7XHJcbiAgICAgIGRhdGE6IGRhdGEsXHJcbiAgICAgIGJlZm9yZVNlbmQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGZvcm11bGFyaW8ucGFyZW50KCkuZmluZCgnLmxvYWRpbmcnKS5zaG93KCk7XHJcbiAgICAgIH0sXHJcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgZm9ybXVsYXJpby5wYXJlbnQoKS5maW5kKCcubG9hZGluZycpLmZhZGVPdXQoMTAwMCk7XHJcbiAgICAgICAgdmFyIGpzb25EYXRhID0gSlNPTi5wYXJzZShyZXNwb25zZSk7XHJcbiAgICAgICAgaWYgKGpzb25EYXRhLnN1Y2Nlc3MgPT0gXCIxXCIpIHtcclxuICAgICAgICAgIGZvcm11bGFyaW8uY2xvc2VzdCgnLm1vZGFsJykuZmFkZU91dCgpO1xyXG4gICAgICAgICAgc2hvd0FsZXJ0KDEsIDEwMDAsIDMwMDApO1xyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgc2hvd0FsZXJ0KDIsIDEwMDAsIDMwMDApO1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbn0pO1xyXG5cclxuLy8gTk9URTogQ09OU1VMVEFTIE5VRVZBIE1BVFJJQ1VMQVxyXG4kKCdmb3JtI21hdHJpY3VsYScpLnN1Ym1pdChmdW5jdGlvbihldmVudCkge1xyXG4gIHZhciBmb3JtdWxhcmlvID0gJCh0aGlzKTtcclxuICB2YXIgaWRGb3JtdWxhcmlvID0gZm9ybXVsYXJpby5hdHRyKCdpZCcpO1xyXG5cclxuICBpZiAodmFsaWRhdGVGb3JtKHRoaXMpKSB7XHJcblxyXG4gICAgLy8gRGF0YSBxdWUgc2UgZW52aWEgYSBsYSBiYXNlIGRlIGRhdG9zXHJcbiAgICB2YXIgZGF0YSA9ICdpZEZvcm09JyArIGlkRm9ybXVsYXJpbyArICcmJyArICQoZm9ybXVsYXJpbykuc2VyaWFsaXplKCk7XHJcbiAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuXHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICBkYXRhOiBkYXRhLFxyXG4gICAgICBiZWZvcmVTZW5kOiBmdW5jdGlvbigpIHtcclxuICAgICAgICBmb3JtdWxhcmlvLnBhcmVudCgpLmZpbmQoJy5sb2FkaW5nJykuc2hvdygpO1xyXG4gICAgICB9LFxyXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgIGZvcm11bGFyaW8ucGFyZW50KCkuZmluZCgnLmxvYWRpbmcnKS5mYWRlT3V0KDEwMDApO1xyXG4gICAgICAgIHZhciBqc29uRGF0YSA9IEpTT04ucGFyc2UocmVzcG9uc2UpO1xyXG4gICAgICAgIGlmIChqc29uRGF0YS5zdWNjZXNzID09IFwiMVwiKSB7XHJcbiAgICAgICAgICBmb3JtdWxhcmlvLmNsb3Nlc3QoJy5tb2RhbCcpLmZhZGVPdXQoKTtcclxuICAgICAgICAgIHNob3dBbGVydCgxLCAxMDAwLCAzMDAwKTtcclxuXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHNob3dBbGVydCgyLCAxMDAwLCAzMDAwKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG59KTtcclxuXHJcblxyXG5cclxuJCgnZm9ybSNwZXJzb25hJykuc3VibWl0KGZ1bmN0aW9uKGV2ZW50KSB7XHJcblxyXG4gIHZhciBmb3JtdWxhcmlvID0gJCh0aGlzKTtcclxuICB2YXIgaWRGb3JtdWxhcmlvID0gZm9ybXVsYXJpby5hdHRyKCdpZCcpO1xyXG5cclxuICBpZiAodmFsaWRhdGVGb3JtKHRoaXMpKSB7XHJcbiAgICAvLyBEYXRhIHF1ZSBzZSBlbnZpYSBhIGxhIGJhc2UgZGUgZGF0b3NcclxuICAgIHZhciBkYXRhID0gJ2lkRm9ybT0nICsgaWRGb3JtdWxhcmlvICsgJyYnICsgJChmb3JtdWxhcmlvKS5zZXJpYWxpemUoKTtcclxuICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG5cclxuICAgICQuYWpheCh7XHJcbiAgICAgIGRhdGE6IGRhdGEsXHJcbiAgICAgIGJlZm9yZVNlbmQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGZvcm11bGFyaW8ucGFyZW50KCkuZmluZCgnLmxvYWRpbmcnKS5zaG93KCk7XHJcbiAgICAgIH0sXHJcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgZm9ybXVsYXJpby5wYXJlbnQoKS5maW5kKCcubG9hZGluZycpLmZhZGVPdXQoMTAwMCk7XHJcbiAgICAgICAgdmFyIGpzb25EYXRhID0gSlNPTi5wYXJzZShyZXNwb25zZSk7XHJcbiAgICAgICAgaWYgKGpzb25EYXRhLnN1Y2Nlc3MgPT0gXCIxXCIpIHtcclxuXHJcbiAgICAgICAgICBmb3JtdWxhcmlvLmNsb3Nlc3QoJy5tb2RhbCcpLmZhZGVPdXQoKTtcclxuICAgICAgICAgIGZvcm11bGFyaW8uY2xvc2VzdCgnLm1vZGFsJykuZmluZCgnZm9ybScpLmhpZGUoKTtcclxuICAgICAgICAgIGZvcm11bGFyaW8uY2xvc2VzdCgnLm1vZGFsJykuZmluZCgnZm9ybSNtYXRyaWN1bGEnKS5zaG93KCk7XHJcbiAgICAgICAgICBzaG93QWxlcnQoMSwgMTAwMCwgMzAwMCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHNob3dBbGVydCgyLCAxMDAwLCAzMDAwKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG59KTtcclxuXHJcbiQoJ2Zvcm0jYWN1ZGllbnRlJykuc3VibWl0KGZ1bmN0aW9uKGV2ZW50KSB7XHJcblxyXG4gIHZhciBmb3JtdWxhcmlvID0gJCh0aGlzKTtcclxuICB2YXIgaWRGb3JtdWxhcmlvID0gZm9ybXVsYXJpby5hdHRyKCdpZCcpO1xyXG5cclxuICBpZiAodmFsaWRhdGVGb3JtKHRoaXMpKSB7XHJcblxyXG4gICAgLy8gRGF0YSBxdWUgc2UgZW52aWEgYSBsYSBiYXNlIGRlIGRhdG9zXHJcbiAgICB2YXIgZGF0YSA9ICdpZEZvcm09JyArIGlkRm9ybXVsYXJpbyArICcmJyArICQoZm9ybXVsYXJpbykuc2VyaWFsaXplKCk7XHJcbiAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuXHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICBkYXRhOiBkYXRhLFxyXG4gICAgICBiZWZvcmVTZW5kOiBmdW5jdGlvbigpIHtcclxuICAgICAgICBmb3JtdWxhcmlvLnBhcmVudCgpLmZpbmQoJy5sb2FkaW5nJykuc2hvdygpO1xyXG4gICAgICB9LFxyXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgIGZvcm11bGFyaW8ucGFyZW50KCkuZmluZCgnLmxvYWRpbmcnKS5mYWRlT3V0KDEwMDApO1xyXG5cclxuICAgICAgICB2YXIganNvbkRhdGEgPSBKU09OLnBhcnNlKHJlc3BvbnNlKTtcclxuICAgICAgICBpZiAoanNvbkRhdGEuc3VjY2VzcyA9PSBcIjFcIikge1xyXG5cclxuICAgICAgICAgIHNob3dBbGVydCgxLCAxMDAwLCAzMDAwKTtcclxuXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHNob3dBbGVydCgyLCAxMDAwLCAzMDAwKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG59KTtcclxuXHJcblxyXG4vLyBcclxuLy8gJCgnc2VsZWN0LmNpdHlzJykuY2xpY2soZnVuY3Rpb24oKXtcclxuLy8gICAkLmFqYXgoe1xyXG4vLyAgICAgZGF0YVR5cGU6IFwianNvblwiLFxyXG4vLyAgICAgdXJsOiBcIi4uL2pzb24vY2l0eXMuanNvblwiLFxyXG4vLyAgICAgZGF0YTogZGF0YSxcclxuLy8gICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpe1xyXG4vLyAgICAgICB2YXIgaXRlbXMgPSBbXTtcclxuLy8gICAgICAgJC5lYWNoKCBkYXRhLCBmdW5jdGlvbigga2V5LCB2YWwgKSB7XHJcbi8vICAgICAgICAgaXRlbXMucHVzaCggXCI8b3B0aW9uIGlkPSdcIiArIGtleSArIFwiJz5cIiArIHZhbCArIFwiPC9vcHRpb24+XCIgKTtcclxuLy8gICAgICAgfSk7XHJcbi8vXHJcbi8vICAgICAgICQoIFwiPHNlbGVjdC8+XCIsIHtcclxuLy8gICAgICAgICBcImNsYXNzXCI6IFwiY2l0eXNcIixcclxuLy8gICAgICAgICBodG1sOiBpdGVtcy5qb2luKCBcIlwiIClcclxuLy8gICAgICAgfSkuYXBwZW5kVG8oIFwiYm9keVwiICk7XHJcbi8vICAgICB9XHJcbi8vICAgfSk7XHJcbi8vIH0pO1xyXG4iLCIkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcclxuICAvL1ZBbGlkYXIgc2kgZWwgbmF2ZWdhZG9yIGVzIElFLiBTaSBsbyBlcywgZGlyZWNjaW9uYXJsbyBhIG90cmEgcGFnaW5hXHJcbiAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIlRyaWRlbnQvXCIpID4gLTEpIHtcclxuICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJ2h0dHBzOi8vd3d3Lmdvb2dsZS5jb20ubXgvY2hyb21lLz9icmFuZD1DSEJGJmRzX2tpZD00MzcwMDAzNDYzMjc0ODY5NCZ1dG1fc291cmNlPWJpbmcmdXRtX21lZGl1bT1jcGMmdXRtX2NhbXBhaWduPTEwMDU5OTIlMjAlN0MlMjBDaHJvbWUlMjBXaW4xMCUyMCU3QyUyMERSJTIwJTdDJTIwRVNTMDElMjAlN0MlMjBOQSUyMCU3QyUyME5BJTIwJTdDJTIwZXMlMjAlN0MlMjBEZXNrJTIwJTdDJTIwQklORyUyMFNFTSUyMCU3QyUyMEJLV1MlMjB+JTIwVG9wJTIwS1dEUyUyMC0lMjBFeGFjdCZ1dG1fdGVybT1kZXNjYXJnYXIlMjBjaHJvbWUmdXRtX2NvbnRlbnQ9RG93bmxvYWQlMjBDaHJvbWUlMjAtJTIwRXhhY3QmZ2NsaWQ9Q083MG02VFQtZVVDRlVUQ0RRb2RtaXdEUlEmZ2Nsc3JjPWRzJ1xyXG4gIH1cclxuICAvL0ZhZGUgaW4gZGUgbGEgcMOhZ2luYSBMb2dpbiBhbCBpbmljaWFyIGVsIG5hdmVnYWRvclxyXG5cclxuICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgJCgnc2VjdGlvbiNsb2dpbicpLmZhZGVJbigxNTAwKS5jc3Moe1xyXG4gICAgICBcImRpc3BsYXlcIjogXCJmbGV4XCJcclxuICAgIH0pO1xyXG4gIH0sIDUwMCk7XHJcbiAgLy9JbmljaWFsaXphciBsYXMgYW5pbWFjaW9uZXMgZGUgbGEgbGlicmVyaWEgV09XIChhbmltYWNpb25lcylcclxuICB2YXIgd293ID0gbmV3IFdPVygpLmluaXQoKTtcclxuXHJcbiAgLy8gSGFjZXIgcXVlIGxvcyBjaGVja2JveCBjb24gZXN0aWxvcyBmdW5jaW9uZW5cclxuICAkKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgIGxldCBjdXN0b21DaGVjayA9ICQodGhpcykucGFyZW50KCkuZmluZCgnZGl2LmN1c3RvbS1jaGVja2JveCcpO1xyXG4gICAgJCh0aGlzKS5wcm9wKCdjaGVja2VkJykgPyBjdXN0b21DaGVjay50ZXh0KCfinJQnKSA6IGN1c3RvbUNoZWNrLnRleHQoJycpO1xyXG4gIH0pO1xyXG5cclxuICAvLyBFZmVjdG9zIG1lbnUgYnVyZ3VlclxyXG4gICQoJ2Rpdi5pY29uLW1lbnUnKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgIGxldCBtZW51ID0gJCgnZGl2Lm1lbnUtY29udGFpbmVyJyk7XHJcbiAgICBpZiAobWVudS5jc3MoJ2Rpc3BsYXknKSA9PSBcIm5vbmVcIikge1xyXG4gICAgICBtZW51LnNsaWRlRG93bigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgbWVudS5zbGlkZVVwKCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gICQoJyNhY291bnRidG4nKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgIGxldCBhY291bnRDb250YWluZXIgPSAkKCcuYWNjb3VudC1jb250YWluZXInKTtcclxuICAgIGlmIChhY291bnRDb250YWluZXIuY3NzKCdkaXNwbGF5JykgPT0gXCJub25lXCIpIHtcclxuICAgICAgYWNvdW50Q29udGFpbmVyLnNsaWRlRG93bigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYWNvdW50Q29udGFpbmVyLnNsaWRlVXAoKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgLy9Nb2RhbGVzXHJcblxyXG4gIC8vLy9FZGl0YXIgdXN1ZWFyaW9cclxuICAkKCcjZWRpdFVzZXInKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgICQoJyNtb2RhbEVkaXRVc2VyJykuZmFkZUluKCkuY3NzKHtcclxuICAgICAgXCJkaXNwbGF5XCI6IFwiZmxleFwiXHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgLy8vL051ZXZhIG1hdHJpY3VsYVxyXG4gICQoJyNuZXdTdHVkZW50LCNhZGRSZWxhdGl2ZScpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIGxldCBtb2RhbCA9ICQoJyNtb2RhbE51ZXZvJyk7XHJcbiAgICBsZXQgY2xvc2VzdE1vZGFsID0gJCh0aGlzKS5jbG9zZXN0KCcubW9kYWwnKTtcclxuICAgIGxldCBpbnB1dFN0dWRlbnQgPSBtb2RhbC5maW5kKCcuc3R1ZGVudCcpLnBhcmVudCgpO1xyXG4gICAgbGV0IGlucHV0UmVsYXRpdmUgPSBtb2RhbC5maW5kKCcucmVsYXRpdmUnKS5wYXJlbnQoKTtcclxuXHJcbiAgICBjbG9zZXN0TW9kYWwuY3NzKHtcInotaW5kZXhcIjogXCIxMFwifSlcclxuXHJcbiAgICBtb2RhbC5mYWRlSW4oKS5jc3Moe1xyXG4gICAgICBcImRpc3BsYXlcIjogXCJmbGV4XCIsXHJcbiAgICB9KTtcclxuXHJcbiAgICBzd2l0Y2ggKCQodGhpcykuYXR0cignaWQnKSkge1xyXG4gICAgICBjYXNlICduZXdTdHVkZW50JzpcclxuICAgICAgICBtb2RhbC5maW5kKCcjdGl0dGxlLXBlcnNvbicpLnRleHQoXCJTdHVkZW50J3MgaW5mb1wiKTtcclxuICAgICAgICBpbnB1dFJlbGF0aXZlLmhpZGUoKTtcclxuICAgICAgICBpbnB1dFN0dWRlbnQuc2hvdygpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdhZGRSZWxhdGl2ZSc6XHJcbiAgICAgICAgbW9kYWwuZmluZCgnI3RpdHRsZS1wZXJzb24nKS50ZXh0KFwiUmVsYXRpdmUncyBpbmZvXCIpO1xyXG4gICAgICAgIGlucHV0U3R1ZGVudC5oaWRlKCk7XHJcbiAgICAgICAgaW5wdXRSZWxhdGl2ZS5zaG93KCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcblxyXG4gIH0pO1xyXG5cclxuICAvLy8vQ2VycmFyIG1vZGFsZXNcclxuICAkKCcuYnRuLWNhbmNlbCcpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgJCh0aGlzKS5jbG9zZXN0KCcubW9kYWwsLm1vZGFsLXRpdHRsZScpLmZhZGVPdXQoKTtcclxuICAgIC8vICQoJy5sb2FkaW5nJykuZmFkZU91dCgpO1xyXG4gICAgJCgnLmFsZXJ0LWNvbnRhaW5lcicpLmZhZGVPdXQoKTtcclxuICB9KTtcclxuICAvLy8vRWxpbWluYXIgbWF0cmljdWxhXHJcbiAgJCgnc3Bhbi5pY29uLWJpbicpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgJCgnI21vZGFsRWxtaW5hcicpLmZhZGVJbigpLmNzcyh7XHJcbiAgICAgIFwiZGlzcGxheVwiOiBcImZsZXhcIlxyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIC8vLy9Nb3N0cmFyIElORk8gLyBFRElUQVJcclxuICAkKCdzcGFuLmljb24tZXllJykuY2xpY2soZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgbGV0IG1vZGFsU2hvdyA9ICQoJyNtb2RhbEVkaXRTaG93Jyk7XHJcbiAgICBsZXQgaW5wdXRzID0gbW9kYWxTaG93LmZpbmQoJ3NlbGVjdCxpbnB1dCcpO1xyXG4gICAgbGV0IHNhdmVCdXR0b25zID0gbW9kYWxTaG93LmZpbmQoJy5idG4tc3VibWl0TW9kYWwnKTtcclxuXHJcblxyXG4gICAgbW9kYWxTaG93LmZhZGVJbigpLmNzcyh7XHJcbiAgICAgIFwiZGlzcGxheVwiOiBcImZsZXhcIlxyXG4gICAgfSk7XHJcblxyXG4gICAgaW5wdXRzLmF0dHIoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcbiAgICBzYXZlQnV0dG9ucy5oaWRlKCk7XHJcblxyXG4gIH0pO1xyXG5cclxuICAkKCcjZWRpdFN0dWRlbnQnKS5jbGljayhmdW5jdGlvbigpe1xyXG4gICAgbGV0IG1vZGFsID0gJCh0aGlzKS5jbG9zZXN0KCcubW9kYWwnKTtcclxuICAgIGxldCBpbnB1dHMgPSBtb2RhbC5maW5kKCdzZWxlY3QsaW5wdXQnKTtcclxuXHJcbiAgICBtb2RhbC5maW5kKCcuYnRuLXN1Ym1pdE1vZGFsJykuZmFkZUluKCc1MDAnKTtcclxuICAgIGlucHV0cy5hdHRyKCdkaXNhYmxlZCcsIGZhbHNlKTtcclxuICB9KTtcclxuXHJcblxyXG4gIC8vLy9Nb3N0cmFyIG1hdHJpY3VsYVxyXG4gICQoJ3NwYW4uaWNvbi1wbHVzJykuY2xpY2soZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgbGV0IG1vZGFsTWF0cmkgPSAkKCcjbW9kYWxNYXRyaWN1bGEnKTtcclxuXHJcbiAgICBtb2RhbE1hdHJpLmZhZGVJbigpLmNzcyh7XHJcbiAgICAgIFwiZGlzcGxheVwiOiBcImZsZXhcIlxyXG4gICAgfSk7XHJcblxyXG4gIH0pO1xyXG5cclxuXHJcbiAgLy9UYWJsYXNcclxuICAkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoIDw9IDUyMCkge1xyXG4gICAgICAkKCd0YWJsZScpLmNzcyh7XHJcbiAgICAgICAgXCJvdmVyZmxvdy14XCI6IFwic2Nyb2xsXCJcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG5cclxuXHJcblxyXG59KTtcclxuIl19
