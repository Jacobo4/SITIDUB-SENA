var e=3;function t(e,t){"error"===t?(e.addClass("error"),e.removeClass("correcto"),cumple=0):"valido"===t&&(e.addClass("correcto"),e.removeClass("error"),cumple=1)}function n(e,t,n){const i=$("div.alert-container");i.find("div.alert-content").empty(),1===e?i.addClass("alert-check").find("div.alert-content").text("Nice !"):2===e?i.addClass("alert-error").find("div.alert-content").text("Hmm, something went wrong"):3===e&&i.addClass("alert-server").find("div.alert-content").text("Maybe the server is down :("),i.fadeIn(t,"linear",(function(){setTimeout((function(){i.fadeOut().animate({bottom:"0%"},{duration:"slow",queue:!1})}),n)})).animate({bottom:"20vh"},{duration:"slow",queue:!1})}function i(e,t,n){return!!(e>=t&e<=n)}function o(e){event.preventDefault();var n=$(e).find("input,select").length,o=($(e).find('button[type="submit"]'),0);const a=/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/,s=/^\d+$/;return $(e).find("input,select").each((function(e,n){var c=$(n).attr("id");$(n).attr("name",c);var r=$(n).val(),d=$(n).prop("checked"),l=$(n).val(),u=$(n).parent().find("div.custom-checkbox");if(0!==$(n).length){switch($(n).attr("type")){case"text":case"password":case"date":t($(n),""!==r?"valido":"error");break;case"identification":s.test($(n).prop("value"))&i(r.length,10,10)?t($(n),"valido"):t($(n),"error");break;case"emailCustom":a.test($(n).prop("value"))?t($(n),"valido"):t($(n),"error");break;case"checkbox":t(u,!1!==d?"valido":"error");break;case"select":t($(n),1!=l?"valido":"error")}o+=cumple}})),o===n}$(document).ready((function(){navigator.userAgent.indexOf("Trident/")>-1&&(window.location.href="https://www.google.com.mx/chrome/?brand=CHBF&ds_kid=43700034632748694&utm_source=bing&utm_medium=cpc&utm_campaign=1005992%20%7C%20Chrome%20Win10%20%7C%20DR%20%7C%20ESS01%20%7C%20NA%20%7C%20NA%20%7C%20es%20%7C%20Desk%20%7C%20BING%20SEM%20%7C%20BKWS%20~%20Top%20KWDS%20-%20Exact&utm_term=descargar%20chrome&utm_content=Download%20Chrome%20-%20Exact&gclid=CO70m6TT-eUCFUTCDQodmiwDRQ&gclsrc=ds"),setTimeout((function(){$("section#login").fadeIn(1500).css({display:"flex"})}),500);(new WOW).init();$('input[type="checkbox"]').click((function(){let e=$(this).parent().find("div.custom-checkbox");$(this).prop("checked")?e.text("âœ”"):e.text("")})),$("div.icon-menu").click((function(){let e=$("div.menu-container");"none"==e.css("display")?e.slideDown():e.slideUp()})),$("#acountbtn").click((function(){let e=$(".account-container");"none"==e.css("display")?e.slideDown():e.slideUp()})),$("#btn-nuevo").click((function(){$("#modalNuevo").fadeIn().css({display:"flex"})})),$(".btn-cancel").click((function(){$(this).closest(".modal,.modal-tittle").fadeOut(),$(".alert-container").fadeOut()})),$("span.icon-bin").click((function(){$("#modalElminar").fadeIn().css({display:"flex"})})),$("span.icon-pencil").click((function(){let e=$("#modalEditMostrar"),t=e.find('button[type="submit"]'),n=e.find("input,select");e.fadeIn().css({display:"flex"}),t.show(),n.attr("disabled",!1)})),$("span.icon-eye").click((function(){let e=$("#modalEditMostrar"),t=e.find("form.edit"),n=e.find('button[type="submit"]'),i=e.find("input,select");t.removeClass("edit"),t.addClass("mostrar"),e.fadeIn().css({display:"flex"}),n.hide(),i.attr("disabled",!0)})),$(window).resize((function(){window.innerWidth<=520&&$("table").css({"overflow-x":"scroll"})}))})),$.ajaxSetup({url:"procesar.php",type:"POST",async:!0,error:function(e){console.log("response",e),n(3,1e3,3e3)}}),$("form#login").submit((function(e){$(this);o(this)&&(window.location.href="home.html")})),$("form.edit").submit((function(e){var t=$(this),i=t.attr("id");if(o(this)){var a="idForm="+i+"&"+$(t).serialize();console.log(a),$.post("procesar.php",a,(function(e){t.parent().find(".loading").show()})).done((function(e){t.parent().find(".loading").fadeOut(1e3),"1"==JSON.parse(e).success?n(1,1e3,3e3):n(2,1e3,3e3)}))}})),$("form#eliminar").submit((function(e){var t=$(this),i=t.attr("id");if(o(this)){var a="idForm="+i+"&"+$(t).serialize();console.log(a),$.ajax({data:a,beforeSend:function(){t.parent().find(".loading").show()},success:function(e){t.parent().find(".loading").fadeOut(1e3),"1"==JSON.parse(e).success?(t.closest(".modal").fadeOut(),n(1,1e3,3e3)):n(2,1e3,3e3)}})}})),$("form#matricula").submit((function(e){var t=$(this),i=t.attr("id");if(console.log(i),o(this)){var a="idForm="+i+"&"+$(t).serialize();console.log(a),$.ajax({data:a,beforeSend:function(){t.parent().find(".loading").show()},success:function(e){t.parent().find(".loading").fadeOut(1e3),"1"==JSON.parse(e).success?(t.hide(),$("form#clinic").show()):n(2,1e3,3e3)}})}})),$("form#clinic").submit((function(e){var t=$(this),i=t.attr("id");if(o(this)){var a="idForm="+i+"&"+$(t).serialize();console.log(a),$.ajax({data:a,beforeSend:function(){t.parent().find(".loading").show()},success:function(e){t.parent().find(".loading").fadeOut(1e3),"1"==JSON.parse(e).success?(t.hide(),$("form#estudiante").show()):n(2,1e3,3e3)}})}})),$("form#estudiante").submit((function(e){var t=$(this),i=t.attr("id");if(o(this)){var a="idForm="+i+"&"+$(t).serialize();console.log(a),$.ajax({data:a,beforeSend:function(){t.parent().find(".loading").show()},success:function(e){t.parent().find(".loading").fadeOut(1e3),"1"==JSON.parse(e).success?(t.hide(),$("form#acudiente").show()):n(2,1e3,3e3)}})}})),$("form#acudiente").submit((function(e){var t=$(this),i=t.attr("id");if(o(this)){var a="idForm="+i+"&"+$(t).serialize();console.log(a),$.ajax({data:a,beforeSend:function(){t.parent().find(".loading").show()},success:function(e){t.parent().find(".loading").fadeOut(1e3),"1"==JSON.parse(e).success?(t.closest(".modal").fadeOut(),t.closest(".modal").find("form").hide(),t.closest(".modal").find("form#matricula").show(),n(1,1e3,3e3)):n(2,1e3,3e3)}})}}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImMuanMiLCJfX2Zvcm1zLmpzIiwiX2RvbS5qcyJdLCJuYW1lcyI6WyJjIiwicGludGFyU3RpbG9zIiwiZWxlbSIsInRpcG8iLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwiY3VtcGxlIiwic2hvd0FsZXJ0IiwidGltZUluIiwidGltZU91dCIsImRpdkFsZXJ0IiwiJCIsImZpbmQiLCJlbXB0eSIsInRleHQiLCJmYWRlSW4iLCJzZXRUaW1lb3V0IiwiZmFkZU91dCIsImFuaW1hdGUiLCJib3R0b20iLCJkdXJhdGlvbiIsInF1ZXVlIiwidmFsaWRhckxlbmd0aCIsInZhbG9yIiwibWluTGVuZ3RoIiwibWF4TGVuZ3RoIiwidmFsaWRhdGVGb3JtIiwiZm9ybSIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJjYW1wb3NPYmxpZ2EiLCJsZW5ndGgiLCJ0b3RhbCIsInJlZ0V4cEVtYWlsIiwicmVnRXhwTnVtYmVyIiwiZWFjaCIsImkiLCJlIiwiaWQiLCJhdHRyIiwidmFsb3JJbnB1dCIsInZhbCIsInZhbG9yQ2hlY2tib3giLCJwcm9wIiwidmFsb3JTZWxlY3QiLCJjdXN0b21EaXZDaGVjayIsInBhcmVudCIsInRlc3QiLCJkb2N1bWVudCIsInJlYWR5IiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwiaW5kZXhPZiIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsImNzcyIsImRpc3BsYXkiLCJXT1ciLCJpbml0IiwiY2xpY2siLCJjdXN0b21DaGVjayIsInRoaXMiLCJtZW51Iiwic2xpZGVEb3duIiwic2xpZGVVcCIsImFjb3VudENvbnRhaW5lciIsImNsb3Nlc3QiLCJtb2RhbEVkaXQiLCJib3RvbkVkaXQiLCJpbnB1dHMiLCJzaG93IiwiZm9ybXMiLCJoaWRlIiwicmVzaXplIiwiaW5uZXJXaWR0aCIsIm92ZXJmbG93LXgiLCJhamF4U2V0dXAiLCJ1cmwiLCJ0eXBlIiwiYXN5bmMiLCJlcnJvciIsInJlc3BvbnNlIiwiY29uc29sZSIsImxvZyIsInN1Ym1pdCIsImZvcm11bGFyaW8iLCJpZEZvcm11bGFyaW8iLCJkYXRhIiwic2VyaWFsaXplIiwicG9zdCIsImRvbmUiLCJKU09OIiwicGFyc2UiLCJzdWNjZXNzIiwiYWpheCIsImJlZm9yZVNlbmQiXSwibWFwcGluZ3MiOiJBQUFBLElBQUFBLEVBQUEsRUNDQSxTQUFBQyxFQUFBQyxFQUFBQyxHQUVBLFVBQUFBLEdBQ0FELEVBQUFFLFNBQUEsU0FDQUYsRUFBQUcsWUFBQSxZQUNBQyxPQUFBLEdBRUEsV0FBQUgsSUFDQUQsRUFBQUUsU0FBQSxZQUNBRixFQUFBRyxZQUFBLFNBQ0FDLE9BQUEsR0FNQSxTQUFBQyxFQUFBRCxFQUFBRSxFQUFBQyxHQUVBLE1BQUFDLEVBQUFDLEVBQUEsdUJBR0FELEVBQUFFLEtBQUEscUJBQUFDLFFBR0EsSUFBQVAsRUFFQUksRUFBQU4sU0FBQSxlQUFBUSxLQVBBLHFCQU9BRSxLQUFBLFVBQ0EsSUFBQVIsRUFFQUksRUFBQU4sU0FBQSxlQUFBUSxLQVZBLHFCQVVBRSxLQUFBLDZCQUNBLElBQUFSLEdBQ0FJLEVBQUFOLFNBQUEsZ0JBQUFRLEtBWkEscUJBWUFFLEtBQUEsK0JBR0FKLEVBQUFLLE9BQUFQLEVBQUEsVUFBQSxXQUNBUSxZQUFBLFdBQ0FOLEVBQUFPLFVBQUFDLFFBQUEsQ0FDQUMsT0FBQSxNQUNBLENBQ0FDLFNBQUEsT0FDQUMsT0FBQSxNQUVBWixNQUNBUyxRQUFBLENBQ0FDLE9BQUEsUUFDQSxDQUNBQyxTQUFBLE9BQ0FDLE9BQUEsSUFTQSxTQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUNBLFNBQUFGLEdBQUFDLEVBQUFELEdBQUFFLEdBT0EsU0FBQUMsRUFBQUMsR0FFQUMsTUFBQUMsaUJBRUEsSUFBQUMsRUFBQW5CLEVBQUFnQixHQUFBZixLQUFBLGdCQUFBbUIsT0FJQUMsR0FIQXJCLEVBQUFnQixHQUFBZixLQUFBLHlCQUdBLEdBRUEsTUFBQXFCLEVBQUEsMElBQ0FDLEVBQUEsUUF1REEsT0FwREF2QixFQUFBZ0IsR0FBQWYsS0FBQSxnQkFBQXVCLE1B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LmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGMgPSAzO1xyXG4iLCIvLy8vLy8vLy8vLy8gUGludGEgZXN0aWxvcyBkZSBlcnJvciB5IHZhbGlkb1xyXG5mdW5jdGlvbiBwaW50YXJTdGlsb3MoZWxlbSwgdGlwbykge1xyXG5cclxuICBpZiAodGlwbyA9PT0gJ2Vycm9yJykge1xyXG4gICAgZWxlbS5hZGRDbGFzcygnZXJyb3InKTtcclxuICAgIGVsZW0ucmVtb3ZlQ2xhc3MoJ2NvcnJlY3RvJyk7XHJcbiAgICBjdW1wbGUgPSAwO1xyXG5cclxuICB9IGVsc2UgaWYgKHRpcG8gPT09ICd2YWxpZG8nKSB7XHJcbiAgICBlbGVtLmFkZENsYXNzKCdjb3JyZWN0bycpO1xyXG4gICAgZWxlbS5yZW1vdmVDbGFzcygnZXJyb3InKTtcclxuICAgIGN1bXBsZSA9IDE7XHJcbiAgfVxyXG5cclxufVxyXG5cclxuLy8vLy8vLy8vLy8vIE11ZXN0cmEgYWxlcnRhIGRlIGxvcyBmb3JtdWxhcmlvc1xyXG5mdW5jdGlvbiBzaG93QWxlcnQoY3VtcGxlLCB0aW1lSW4sIHRpbWVPdXQpIHtcclxuXHJcbiAgY29uc3QgZGl2QWxlcnQgPSAkKCdkaXYuYWxlcnQtY29udGFpbmVyJyk7XHJcbiAgY29uc3QgY29udGVudEFsZXJ0ID0gJ2Rpdi5hbGVydC1jb250ZW50JztcclxuXHJcbiAgZGl2QWxlcnQuZmluZCgnZGl2LmFsZXJ0LWNvbnRlbnQnKS5lbXB0eSgpO1xyXG5cclxuXHJcbiAgaWYgKGN1bXBsZSA9PT0gMSkge1xyXG5cclxuICAgIGRpdkFsZXJ0LmFkZENsYXNzKCdhbGVydC1jaGVjaycpLmZpbmQoY29udGVudEFsZXJ0KS50ZXh0KCdOaWNlICEnKTtcclxuICB9IGVsc2UgaWYgKGN1bXBsZSA9PT0gMikge1xyXG5cclxuICAgIGRpdkFsZXJ0LmFkZENsYXNzKCdhbGVydC1lcnJvcicpLmZpbmQoY29udGVudEFsZXJ0KS50ZXh0KCdIbW0sIHNvbWV0aGluZyB3ZW50IHdyb25nJyk7XHJcbiAgfSBlbHNlIGlmIChjdW1wbGUgPT09IDMpIHtcclxuICAgIGRpdkFsZXJ0LmFkZENsYXNzKCdhbGVydC1zZXJ2ZXInKS5maW5kKGNvbnRlbnRBbGVydCkudGV4dCgnTWF5YmUgdGhlIHNlcnZlciBpcyBkb3duIDooJyk7XHJcbiAgfVxyXG5cclxuICBkaXZBbGVydC5mYWRlSW4odGltZUluLCBcImxpbmVhclwiLCBmdW5jdGlvbigpIHtcclxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgIGRpdkFsZXJ0LmZhZGVPdXQoKS5hbmltYXRlKHtcclxuICAgICAgICAnYm90dG9tJzogJzAlJ1xyXG4gICAgICB9LCB7XHJcbiAgICAgICAgZHVyYXRpb246ICdzbG93JyxcclxuICAgICAgICBxdWV1ZTogZmFsc2VcclxuICAgICAgfSk7XHJcbiAgICB9LCB0aW1lT3V0KTtcclxuICB9KS5hbmltYXRlKHtcclxuICAgICdib3R0b20nOiAnMjB2aCdcclxuICB9LCB7XHJcbiAgICBkdXJhdGlvbjogJ3Nsb3cnLFxyXG4gICAgcXVldWU6IGZhbHNlXHJcbiAgfSk7XHJcblxyXG59XHJcblxyXG5cclxuXHJcblxyXG4vLy8vLy8vLy8vLy8gVmFsaWRhIGxvbmdpdHVkXHJcbmZ1bmN0aW9uIHZhbGlkYXJMZW5ndGgodmFsb3IsIG1pbkxlbmd0aCwgbWF4TGVuZ3RoKSB7XHJcbiAgaWYgKCh2YWxvciA+PSBtaW5MZW5ndGgpICYgKHZhbG9yIDw9IG1heExlbmd0aCkpIHtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiB2YWxpZGF0ZUZvcm0oZm9ybSkge1xyXG5cclxuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICB2YXIgY2FtcG9zT2JsaWdhID0gJChmb3JtKS5maW5kKCdpbnB1dCxzZWxlY3QnKS5sZW5ndGg7XHJcbiAgdmFyIGJvdG9uU3VibWl0ID0gJChmb3JtKS5maW5kKCdidXR0b25bdHlwZT1cInN1Ym1pdFwiXScpO1xyXG5cclxuICAvL1ZhcmlhYmxlIHBhcmEgY29tcHJhciBsb3MgaW5wdXRzIHF1ZSBlc3RhbiBiaWVuIGNvbiBsYSBjYW50aWRhZCBkZSBpbnB1dHMgZGVsIGZvcm11bGFyaW9cclxuICB2YXIgdG90YWwgPSAwO1xyXG4gIC8vZXhwcmVzaW9uZXMgUmVndWxhcmVzXHJcbiAgY29uc3QgcmVnRXhwRW1haWwgPSAvXlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSsoPzpcXC5bYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKSpAKD86W2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1xcLikrW2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pPyQvO1xyXG4gIGNvbnN0IHJlZ0V4cE51bWJlciA9IC9eXFxkKyQvO1xyXG5cclxuICAvLy8vVmFsaWRhciBsb3MgY2FtcG9zXHJcbiAgJChmb3JtKS5maW5kKCdpbnB1dCxzZWxlY3QnKS5lYWNoKGZ1bmN0aW9uKGksIGUpIHtcclxuXHJcbiAgICB2YXIgaWQgPSAkKGUpLmF0dHIoJ2lkJylcclxuICAgIC8vUG9uZXIgZWwgaWQgZW4gZWwgbmFtZSBwYXJhIG1hbmRhciBsb3MgZGF0b3MgcG9yIHNlcmlhbGl6ZVxyXG4gICAgJChlKS5hdHRyKCduYW1lJywgaWQpO1xyXG5cclxuICAgIHZhciB2YWxvcklucHV0ID0gJChlKS52YWwoKTtcclxuICAgIHZhciB2YWxvckNoZWNrYm94ID0gJChlKS5wcm9wKCdjaGVja2VkJyk7XHJcbiAgICB2YXIgdmFsb3JTZWxlY3QgPSAkKGUpLnZhbCgpO1xyXG4gICAgdmFyIGN1c3RvbURpdkNoZWNrID0gJChlKS5wYXJlbnQoKS5maW5kKCdkaXYuY3VzdG9tLWNoZWNrYm94Jyk7XHJcblxyXG5cclxuICAgIGlmICgkKGUpLmxlbmd0aCAhPT0gMCkge1xyXG4gICAgICBzd2l0Y2ggKCQoZSkuYXR0cigndHlwZScpKSB7XHJcblxyXG4gICAgICAgIGNhc2UgXCJ0ZXh0XCI6XHJcbiAgICAgICAgICB2YWxvcklucHV0ICE9PSBcIlwiID8gcGludGFyU3RpbG9zKCQoZSksICd2YWxpZG8nKSA6IHBpbnRhclN0aWxvcygkKGUpLCAnZXJyb3InKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBjYXNlIFwicGFzc3dvcmRcIjpcclxuICAgICAgICAgIHZhbG9ySW5wdXQgIT09IFwiXCIgPyBwaW50YXJTdGlsb3MoJChlKSwgJ3ZhbGlkbycpIDogcGludGFyU3RpbG9zKCQoZSksICdlcnJvcicpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIGNhc2UgXCJkYXRlXCI6XHJcbiAgICAgICAgICB2YWxvcklucHV0ICE9PSBcIlwiID8gcGludGFyU3RpbG9zKCQoZSksICd2YWxpZG8nKSA6IHBpbnRhclN0aWxvcygkKGUpLCAnZXJyb3InKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBjYXNlIFwiaWRlbnRpZmljYXRpb25cIjpcclxuICAgICAgICAgIGlmICgocmVnRXhwTnVtYmVyLnRlc3QoJChlKS5wcm9wKCd2YWx1ZScpKSkgJiAodmFsaWRhckxlbmd0aCh2YWxvcklucHV0Lmxlbmd0aCwgMTAsIDEwKSkpIHtcclxuICAgICAgICAgICAgcGludGFyU3RpbG9zKCQoZSksICd2YWxpZG8nKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHBpbnRhclN0aWxvcygkKGUpLCAnZXJyb3InKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBjYXNlIFwiZW1haWxDdXN0b21cIjpcclxuICAgICAgICAgIHJlZ0V4cEVtYWlsLnRlc3QoJChlKS5wcm9wKCd2YWx1ZScpKSA/IHBpbnRhclN0aWxvcygkKGUpLCAndmFsaWRvJykgOiBwaW50YXJTdGlsb3MoJChlKSwgJ2Vycm9yJyk7XHJcbiAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgY2FzZSBcImNoZWNrYm94XCI6XHJcbiAgICAgICAgICB2YWxvckNoZWNrYm94ICE9PSBmYWxzZSA/IHBpbnRhclN0aWxvcyhjdXN0b21EaXZDaGVjaywgJ3ZhbGlkbycpIDogcGludGFyU3RpbG9zKGN1c3RvbURpdkNoZWNrLCAnZXJyb3InKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBjYXNlIFwic2VsZWN0XCI6XHJcbiAgICAgICAgICB2YWxvclNlbGVjdCAhPSAxID8gcGludGFyU3RpbG9zKCQoZSksICd2YWxpZG8nKSA6IHBpbnRhclN0aWxvcygkKGUpLCAnZXJyb3InKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIHRvdGFsID0gdG90YWwgKyBjdW1wbGU7XHJcbiAgICB9XHJcblxyXG4gIH0pO1xyXG5cclxuICBpZiAodG90YWwgPT09IGNhbXBvc09ibGlnYSkge1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcblxyXG59XHJcbi8vIE5PVEU6IENPTkZJRyBDT05TVUxUQVNcclxuJC5hamF4U2V0dXAoe1xyXG4gIHVybDogJ3Byb2Nlc2FyLnBocCcsXHJcbiAgdHlwZTogJ1BPU1QnLFxyXG4gIGFzeW5jOiB0cnVlLFxyXG4gIGVycm9yOiBmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgY29uc29sZS5sb2coJ3Jlc3BvbnNlJywgcmVzcG9uc2UpO1xyXG4gICAgc2hvd0FsZXJ0KDMsIDEwMDAsIDMwMDApO1xyXG4gIH1cclxufSk7XHJcblxyXG4vLyBOT1RFOiBDT05TVUxUQSBMT0dJTlxyXG4kKCdmb3JtI2xvZ2luJykuc3VibWl0KGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgdmFyIGZvcm11bGFyaW8gPSAkKHRoaXMpO1xyXG4gIGlmICh2YWxpZGF0ZUZvcm0odGhpcykpIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJ2hvbWUuaHRtbCc7XHJcbn0pO1xyXG5cclxuLy8gTk9URTogQ09OU1VMVEEgRURJVFxyXG5cclxuLy8gTk9URTogQ09OU1VMVEEgRURJVFxyXG4kKCdmb3JtLmVkaXQnKS5zdWJtaXQoZnVuY3Rpb24oZXZlbnQpIHtcclxuXHJcbiAgdmFyIGZvcm11bGFyaW8gPSAkKHRoaXMpO1xyXG4gIHZhciBpZEZvcm11bGFyaW8gID0gZm9ybXVsYXJpby5hdHRyKCdpZCcpO1xyXG5cclxuICBpZiAodmFsaWRhdGVGb3JtKHRoaXMpKSB7XHJcblxyXG4gICAgLy8gRGF0YSBxdWUgc2UgZW52aWEgYSBsYSBiYXNlIGRlIGRhdG9zXHJcbiAgICB2YXIgZGF0YSA9ICdpZEZvcm09JyArIGlkRm9ybXVsYXJpbyArICcmJyArICQoZm9ybXVsYXJpbykuc2VyaWFsaXplKCk7XHJcbiAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuXHJcbiAgICAkLnBvc3QoXCJwcm9jZXNhci5waHBcIiwgZGF0YSwgZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICBmb3JtdWxhcmlvLnBhcmVudCgpLmZpbmQoJy5sb2FkaW5nJykuc2hvdygpO1xyXG5cclxuICAgICAgfSlcclxuICAgICAgLmRvbmUoZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuXHJcbiAgICAgICAgZm9ybXVsYXJpby5wYXJlbnQoKS5maW5kKCcubG9hZGluZycpLmZhZGVPdXQoMTAwMCk7XHJcbiAgICAgICAgdmFyIGpzb25EYXRhID0gSlNPTi5wYXJzZShyZXNwb25zZSk7XHJcbiAgICAgICAgaWYgKGpzb25EYXRhLnN1Y2Nlc3MgPT0gXCIxXCIpIHtcclxuICAgICAgICAgIHNob3dBbGVydCgxLCAxMDAwLCAzMDAwKTtcclxuXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHNob3dBbGVydCgyLCAxMDAwLCAzMDAwKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICB9XHJcblxyXG59KTtcclxuXHJcblxyXG5cclxuXHJcbi8vIE5PVEU6IENPTlNVTFRBIEVMSU1JTkFSXHJcbiQoJ2Zvcm0jZWxpbWluYXInKS5zdWJtaXQoZnVuY3Rpb24oZXZlbnQpIHtcclxuXHJcbiAgdmFyIGZvcm11bGFyaW8gPSAkKHRoaXMpO1xyXG4gIHZhciBpZEZvcm11bGFyaW8gID0gZm9ybXVsYXJpby5hdHRyKCdpZCcpO1xyXG5cclxuICBpZiAodmFsaWRhdGVGb3JtKHRoaXMpKSB7XHJcblxyXG4gICAgLy8gRGF0YSBxdWUgc2UgZW52aWEgYSBsYSBiYXNlIGRlIGRhdG9zXHJcbiAgICB2YXIgZGF0YSA9ICdpZEZvcm09JyArIGlkRm9ybXVsYXJpbyArICcmJyArICQoZm9ybXVsYXJpbykuc2VyaWFsaXplKCk7XHJcbiAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuXHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICBkYXRhOiBkYXRhLFxyXG4gICAgICBiZWZvcmVTZW5kOiBmdW5jdGlvbigpIHtcclxuICAgICAgICBmb3JtdWxhcmlvLnBhcmVudCgpLmZpbmQoJy5sb2FkaW5nJykuc2hvdygpO1xyXG4gICAgICB9LFxyXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgIGZvcm11bGFyaW8ucGFyZW50KCkuZmluZCgnLmxvYWRpbmcnKS5mYWRlT3V0KDEwMDApO1xyXG4gICAgICAgIHZhciBqc29uRGF0YSA9IEpTT04ucGFyc2UocmVzcG9uc2UpO1xyXG4gICAgICAgIGlmIChqc29uRGF0YS5zdWNjZXNzID09IFwiMVwiKSB7XHJcbiAgICAgICAgICBmb3JtdWxhcmlvLmNsb3Nlc3QoJy5tb2RhbCcpLmZhZGVPdXQoKTtcclxuICAgICAgICAgIHNob3dBbGVydCgxLCAxMDAwLCAzMDAwKTtcclxuXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHNob3dBbGVydCgyLCAxMDAwLCAzMDAwKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG59KTtcclxuXHJcbi8vIE5PVEU6IENPTlNVTFRBUyBOVUVWQSBNQVRSSUNVTEFcclxuJCgnZm9ybSNtYXRyaWN1bGEnKS5zdWJtaXQoZnVuY3Rpb24oZXZlbnQpIHtcclxuICB2YXIgZm9ybXVsYXJpbyA9ICQodGhpcyk7XHJcbiAgdmFyIGlkRm9ybXVsYXJpbyAgPSBmb3JtdWxhcmlvLmF0dHIoJ2lkJyk7XHJcbiAgY29uc29sZS5sb2coaWRGb3JtdWxhcmlvKTtcclxuXHJcbiAgaWYgKHZhbGlkYXRlRm9ybSh0aGlzKSkge1xyXG5cclxuICAgIC8vRGF0YSBxdWUgc2UgZW52aWEgYSBsYSBiYXNlIGRlIGRhdG9zXHJcbiAgICB2YXIgZGF0YSA9ICdpZEZvcm09JyArIGlkRm9ybXVsYXJpbyArICcmJyArICQoZm9ybXVsYXJpbykuc2VyaWFsaXplKCk7XHJcbiAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuXHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICBkYXRhOiBkYXRhLFxyXG4gICAgICBiZWZvcmVTZW5kOiBmdW5jdGlvbigpIHtcclxuICAgICAgICBmb3JtdWxhcmlvLnBhcmVudCgpLmZpbmQoJy5sb2FkaW5nJykuc2hvdygpO1xyXG4gICAgICB9LFxyXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgIGZvcm11bGFyaW8ucGFyZW50KCkuZmluZCgnLmxvYWRpbmcnKS5mYWRlT3V0KDEwMDApO1xyXG5cclxuICAgICAgICB2YXIganNvbkRhdGEgPSBKU09OLnBhcnNlKHJlc3BvbnNlKTtcclxuICAgICAgICBpZiAoanNvbkRhdGEuc3VjY2VzcyA9PSBcIjFcIikge1xyXG4gICAgICAgICAgZm9ybXVsYXJpby5oaWRlKCk7XHJcbiAgICAgICAgICAkKCdmb3JtI2NsaW5pYycpLnNob3coKTtcclxuXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHNob3dBbGVydCgyLCAxMDAwLCAzMDAwKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG59KTtcclxuXHJcbiQoJ2Zvcm0jY2xpbmljJykuc3VibWl0KGZ1bmN0aW9uKGV2ZW50KSB7XHJcblxyXG4gIHZhciBmb3JtdWxhcmlvID0gJCh0aGlzKTtcclxuICB2YXIgaWRGb3JtdWxhcmlvICA9IGZvcm11bGFyaW8uYXR0cignaWQnKTtcclxuXHJcbiAgaWYgKHZhbGlkYXRlRm9ybSh0aGlzKSkge1xyXG5cclxuICAgIC8vIERhdGEgcXVlIHNlIGVudmlhIGEgbGEgYmFzZSBkZSBkYXRvc1xyXG4gICAgdmFyIGRhdGEgPSAnaWRGb3JtPScgKyBpZEZvcm11bGFyaW8gKyAnJicgKyAkKGZvcm11bGFyaW8pLnNlcmlhbGl6ZSgpO1xyXG4gICAgY29uc29sZS5sb2coZGF0YSk7XHJcblxyXG4gICAgJC5hamF4KHtcclxuICAgICAgZGF0YTogZGF0YSxcclxuICAgICAgYmVmb3JlU2VuZDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgZm9ybXVsYXJpby5wYXJlbnQoKS5maW5kKCcubG9hZGluZycpLnNob3coKTtcclxuICAgICAgfSxcclxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICBmb3JtdWxhcmlvLnBhcmVudCgpLmZpbmQoJy5sb2FkaW5nJykuZmFkZU91dCgxMDAwKTtcclxuICAgICAgICB2YXIganNvbkRhdGEgPSBKU09OLnBhcnNlKHJlc3BvbnNlKTtcclxuICAgICAgICBpZiAoanNvbkRhdGEuc3VjY2VzcyA9PSBcIjFcIikge1xyXG4gICAgICAgICAgZm9ybXVsYXJpby5oaWRlKCk7XHJcbiAgICAgICAgICAkKCdmb3JtI2VzdHVkaWFudGUnKS5zaG93KCk7XHJcblxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBzaG93QWxlcnQoMiwgMTAwMCwgMzAwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxufSk7XHJcblxyXG5cclxuJCgnZm9ybSNlc3R1ZGlhbnRlJykuc3VibWl0KGZ1bmN0aW9uKGV2ZW50KSB7XHJcblxyXG4gIHZhciBmb3JtdWxhcmlvID0gJCh0aGlzKTtcclxuICB2YXIgaWRGb3JtdWxhcmlvICA9IGZvcm11bGFyaW8uYXR0cignaWQnKTtcclxuXHJcbiAgaWYgKHZhbGlkYXRlRm9ybSh0aGlzKSkge1xyXG4gICAgLy8gRGF0YSBxdWUgc2UgZW52aWEgYSBsYSBiYXNlIGRlIGRhdG9zXHJcbiAgICB2YXIgZGF0YSA9ICdpZEZvcm09JyArIGlkRm9ybXVsYXJpbyArICcmJyArICQoZm9ybXVsYXJpbykuc2VyaWFsaXplKCk7XHJcbiAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuXHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICBkYXRhOiBkYXRhLFxyXG4gICAgICBiZWZvcmVTZW5kOiBmdW5jdGlvbigpIHtcclxuICAgICAgICBmb3JtdWxhcmlvLnBhcmVudCgpLmZpbmQoJy5sb2FkaW5nJykuc2hvdygpO1xyXG4gICAgICB9LFxyXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgIGZvcm11bGFyaW8ucGFyZW50KCkuZmluZCgnLmxvYWRpbmcnKS5mYWRlT3V0KDEwMDApO1xyXG4gICAgICAgIHZhciBqc29uRGF0YSA9IEpTT04ucGFyc2UocmVzcG9uc2UpO1xyXG4gICAgICAgIGlmIChqc29uRGF0YS5zdWNjZXNzID09IFwiMVwiKSB7XHJcbiAgICAgICAgICBmb3JtdWxhcmlvLmhpZGUoKTtcclxuICAgICAgICAgICQoJ2Zvcm0jYWN1ZGllbnRlJykuc2hvdygpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBzaG93QWxlcnQoMiwgMTAwMCwgMzAwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxufSk7XHJcblxyXG4kKCdmb3JtI2FjdWRpZW50ZScpLnN1Ym1pdChmdW5jdGlvbihldmVudCkge1xyXG5cclxuICB2YXIgZm9ybXVsYXJpbyA9ICQodGhpcyk7XHJcbiAgdmFyIGlkRm9ybXVsYXJpbyAgPSBmb3JtdWxhcmlvLmF0dHIoJ2lkJyk7XHJcblxyXG4gIGlmICh2YWxpZGF0ZUZvcm0odGhpcykpIHtcclxuXHJcbiAgICAvLyBEYXRhIHF1ZSBzZSBlbnZpYSBhIGxhIGJhc2UgZGUgZGF0b3NcclxuICAgIHZhciBkYXRhID0gJ2lkRm9ybT0nICsgaWRGb3JtdWxhcmlvICsgJyYnICsgJChmb3JtdWxhcmlvKS5zZXJpYWxpemUoKTtcclxuICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG5cclxuICAgICQuYWpheCh7XHJcbiAgICAgIGRhdGE6IGRhdGEsXHJcbiAgICAgIGJlZm9yZVNlbmQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGZvcm11bGFyaW8ucGFyZW50KCkuZmluZCgnLmxvYWRpbmcnKS5zaG93KCk7XHJcbiAgICAgIH0sXHJcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgZm9ybXVsYXJpby5wYXJlbnQoKS5maW5kKCcubG9hZGluZycpLmZhZGVPdXQoMTAwMCk7XHJcblxyXG4gICAgICAgIHZhciBqc29uRGF0YSA9IEpTT04ucGFyc2UocmVzcG9uc2UpO1xyXG4gICAgICAgIGlmIChqc29uRGF0YS5zdWNjZXNzID09IFwiMVwiKSB7XHJcblxyXG4gICAgICAgICAgZm9ybXVsYXJpby5jbG9zZXN0KCcubW9kYWwnKS5mYWRlT3V0KCk7XHJcbiAgICAgICAgICBmb3JtdWxhcmlvLmNsb3Nlc3QoJy5tb2RhbCcpLmZpbmQoJ2Zvcm0nKS5oaWRlKCk7XHJcbiAgICAgICAgICBmb3JtdWxhcmlvLmNsb3Nlc3QoJy5tb2RhbCcpLmZpbmQoJ2Zvcm0jbWF0cmljdWxhJykuc2hvdygpO1xyXG4gICAgICAgICAgc2hvd0FsZXJ0KDEsIDEwMDAsIDMwMDApO1xyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgc2hvd0FsZXJ0KDIsIDEwMDAsIDMwMDApO1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbn0pO1xyXG4iLCIkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcclxuICAvL1ZBbGlkYXIgc2kgZWwgbmF2ZWdhZG9yIGVzIElFLiBTaSBsbyBlcywgZGlyZWNjaW9uYXJsbyBhIG90cmEgcGFnaW5hXHJcbiAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIlRyaWRlbnQvXCIpID4gLTEpIHtcclxuICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJ2h0dHBzOi8vd3d3Lmdvb2dsZS5jb20ubXgvY2hyb21lLz9icmFuZD1DSEJGJmRzX2tpZD00MzcwMDAzNDYzMjc0ODY5NCZ1dG1fc291cmNlPWJpbmcmdXRtX21lZGl1bT1jcGMmdXRtX2NhbXBhaWduPTEwMDU5OTIlMjAlN0MlMjBDaHJvbWUlMjBXaW4xMCUyMCU3QyUyMERSJTIwJTdDJTIwRVNTMDElMjAlN0MlMjBOQSUyMCU3QyUyME5BJTIwJTdDJTIwZXMlMjAlN0MlMjBEZXNrJTIwJTdDJTIwQklORyUyMFNFTSUyMCU3QyUyMEJLV1MlMjB+JTIwVG9wJTIwS1dEUyUyMC0lMjBFeGFjdCZ1dG1fdGVybT1kZXNjYXJnYXIlMjBjaHJvbWUmdXRtX2NvbnRlbnQ9RG93bmxvYWQlMjBDaHJvbWUlMjAtJTIwRXhhY3QmZ2NsaWQ9Q083MG02VFQtZVVDRlVUQ0RRb2RtaXdEUlEmZ2Nsc3JjPWRzJ1xyXG4gIH1cclxuICAvL0ZhZGUgaW4gZGUgbGEgcMOhZ2luYSBMb2dpbiBhbCBpbmljaWFyIGVsIG5hdmVnYWRvclxyXG5cclxuICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgJCgnc2VjdGlvbiNsb2dpbicpLmZhZGVJbigxNTAwKS5jc3Moe1xyXG4gICAgICBcImRpc3BsYXlcIjogXCJmbGV4XCJcclxuICAgIH0pO1xyXG4gIH0sIDUwMCk7XHJcbiAgLy9JbmljaWFsaXphciBsYXMgYW5pbWFjaW9uZXMgZGUgbGEgbGlicmVyaWEgV09XIChhbmltYWNpb25lcylcclxuICB2YXIgd293ID0gbmV3IFdPVygpLmluaXQoKTtcclxuXHJcbiAgLy8gSGFjZXIgcXVlIGxvcyBjaGVja2JveCBjb24gZXN0aWxvcyBmdW5jaW9uZW5cclxuICAkKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgIGxldCBjdXN0b21DaGVjayA9ICQodGhpcykucGFyZW50KCkuZmluZCgnZGl2LmN1c3RvbS1jaGVja2JveCcpO1xyXG4gICAgJCh0aGlzKS5wcm9wKCdjaGVja2VkJykgPyBjdXN0b21DaGVjay50ZXh0KCfinJQnKSA6IGN1c3RvbUNoZWNrLnRleHQoJycpO1xyXG4gIH0pO1xyXG5cclxuICAvLyBFZmVjdG9zIG1lbnUgYnVyZ3VlclxyXG4gICQoJ2Rpdi5pY29uLW1lbnUnKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgIGxldCBtZW51ID0gJCgnZGl2Lm1lbnUtY29udGFpbmVyJyk7XHJcbiAgICBpZiAobWVudS5jc3MoJ2Rpc3BsYXknKSA9PSBcIm5vbmVcIikge1xyXG4gICAgICBtZW51LnNsaWRlRG93bigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgbWVudS5zbGlkZVVwKCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gICQoJyNhY291bnRidG4nKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgIGxldCBhY291bnRDb250YWluZXIgPSAkKCcuYWNjb3VudC1jb250YWluZXInKTtcclxuICAgIGlmIChhY291bnRDb250YWluZXIuY3NzKCdkaXNwbGF5JykgPT0gXCJub25lXCIpIHtcclxuICAgICAgYWNvdW50Q29udGFpbmVyLnNsaWRlRG93bigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYWNvdW50Q29udGFpbmVyLnNsaWRlVXAoKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgLy9Nb2RhbGVzXHJcblxyXG5cclxuICAkKCcjYnRuLW51ZXZvJykuY2xpY2soZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgJCgnI21vZGFsTnVldm8nKS5mYWRlSW4oKS5jc3Moe1xyXG4gICAgICBcImRpc3BsYXlcIjogXCJmbGV4XCJcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuXHJcbiAgJCgnLmJ0bi1jYW5jZWwnKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgICQodGhpcykuY2xvc2VzdCgnLm1vZGFsLC5tb2RhbC10aXR0bGUnKS5mYWRlT3V0KCk7XHJcbiAgICAvLyAkKCcubG9hZGluZycpLmZhZGVPdXQoKTtcclxuICAgICQoJy5hbGVydC1jb250YWluZXInKS5mYWRlT3V0KCk7XHJcbiAgfSk7XHJcblxyXG4gICQoJ3NwYW4uaWNvbi1iaW4nKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgICQoJyNtb2RhbEVsbWluYXInKS5mYWRlSW4oKS5jc3Moe1xyXG4gICAgICBcImRpc3BsYXlcIjogXCJmbGV4XCJcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICAkKCdzcGFuLmljb24tcGVuY2lsJykuY2xpY2soZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgbGV0IG1vZGFsRWRpdCA9ICQoJyNtb2RhbEVkaXRNb3N0cmFyJyk7XHJcbiAgICBsZXQgYm90b25FZGl0ID0gbW9kYWxFZGl0LmZpbmQoJ2J1dHRvblt0eXBlPVwic3VibWl0XCJdJylcclxuICAgIGxldCBpbnB1dHMgPSBtb2RhbEVkaXQuZmluZCgnaW5wdXQsc2VsZWN0Jyk7XHJcbiAgICBtb2RhbEVkaXQuZmFkZUluKCkuY3NzKHtcclxuICAgICAgXCJkaXNwbGF5XCI6IFwiZmxleFwiXHJcbiAgICB9KTtcclxuICAgIGJvdG9uRWRpdC5zaG93KCk7XHJcbiAgICBpbnB1dHMuYXR0cignZGlzYWJsZWQnLGZhbHNlKTtcclxuICB9KTtcclxuXHJcbiAgJCgnc3Bhbi5pY29uLWV5ZScpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIGxldCBtb2RhbEVkaXQgPSAkKCcjbW9kYWxFZGl0TW9zdHJhcicpO1xyXG4gICAgbGV0IGZvcm1zID0gbW9kYWxFZGl0LmZpbmQoJ2Zvcm0uZWRpdCcpO1xyXG4gICAgbGV0IGJvdG9uRWRpdCA9IG1vZGFsRWRpdC5maW5kKCdidXR0b25bdHlwZT1cInN1Ym1pdFwiXScpXHJcbiAgICBsZXQgaW5wdXRzID0gbW9kYWxFZGl0LmZpbmQoJ2lucHV0LHNlbGVjdCcpO1xyXG5cclxuICAgIGZvcm1zLnJlbW92ZUNsYXNzKCdlZGl0Jyk7XHJcbiAgICBmb3Jtcy5hZGRDbGFzcygnbW9zdHJhcicpO1xyXG4gICAgbW9kYWxFZGl0LmZhZGVJbigpLmNzcyh7XHJcbiAgICAgIFwiZGlzcGxheVwiOiBcImZsZXhcIlxyXG4gICAgfSk7XHJcbiAgICBib3RvbkVkaXQuaGlkZSgpO1xyXG4gICAgaW5wdXRzLmF0dHIoJ2Rpc2FibGVkJyx0cnVlKTtcclxuICB9KTtcclxuXHJcblxyXG4gIC8vVGFibGFzXHJcbiAgJCh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbigpIHtcclxuICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA8PSA1MjApIHtcclxuICAgICAgJCgndGFibGUnKS5jc3Moe1xyXG4gICAgICAgIFwib3ZlcmZsb3cteFwiOiBcInNjcm9sbFwiXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuXHJcblxyXG5cclxufSk7XHJcbiJdfQ==
