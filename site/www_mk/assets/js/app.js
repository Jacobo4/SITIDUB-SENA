var e=3;function t(e,t){"error"===t?(e.addClass("error"),e.removeClass("correcto"),cumple=0):"valido"===t&&(e.addClass("correcto"),e.removeClass("error"),cumple=1)}function n(e,t,n){const i=$("div.alert-container");i.find("div.alert-content").empty(),1===e?i.addClass("alert-check").find("div.alert-content").text("Nice !"):2===e?i.addClass("alert-error").find("div.alert-content").text("Hmm, something went wrong"):3===e&&i.addClass("alert-server").find("div.alert-content").text("Maybe the server is down :("),i.fadeIn(t,"linear",(function(){setTimeout((function(){i.fadeOut().animate({bottom:"0%"},{duration:"slow",queue:!1})}),n)})).animate({bottom:"20vh"},{duration:"slow",queue:!1})}function i(e,t,n){return!!(e>=t&e<=n)}function a(e){event.preventDefault();var n=$(e).find("input,select").length,a=($(e).find('button[type="submit"]'),0);const o=/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/,s=/^\d+$/;return $(e).find("input,select").each((function(e,n){var c=$(n).attr("id");$(n).attr("name",c);var r=$(n).val(),d=$(n).prop("checked"),l=$(n).val(),u=$(n).parent().find("div.custom-checkbox");if(0!==$(n).length){switch($(n).attr("type")){case"text":case"password":case"date":t($(n),""!==r?"valido":"error");break;case"identification":s.test($(n).prop("value"))&i(r.length,10,10)?t($(n),"valido"):t($(n),"error");break;case"emailCustom":o.test($(n).prop("value"))?t($(n),"valido"):t($(n),"error");break;case"checkbox":t(u,!1!==d?"valido":"error");break;case"select":t($(n),1!=l?"valido":"error")}a+=cumple}})),a===n}$(document).ready((function(){navigator.userAgent.indexOf("Trident/")>-1&&(window.location.href="https://www.google.com.mx/chrome/?brand=CHBF&ds_kid=43700034632748694&utm_source=bing&utm_medium=cpc&utm_campaign=1005992%20%7C%20Chrome%20Win10%20%7C%20DR%20%7C%20ESS01%20%7C%20NA%20%7C%20NA%20%7C%20es%20%7C%20Desk%20%7C%20BING%20SEM%20%7C%20BKWS%20~%20Top%20KWDS%20-%20Exact&utm_term=descargar%20chrome&utm_content=Download%20Chrome%20-%20Exact&gclid=CO70m6TT-eUCFUTCDQodmiwDRQ&gclsrc=ds"),setTimeout((function(){$("section#login").fadeIn(1500).css({display:"flex"})}),500);(new WOW).init();$('input[type="checkbox"]').click((function(){let e=$(this).parent().find("div.custom-checkbox");$(this).prop("checked")?e.text("âœ”"):e.text("")})),$("div.icon-menu").click((function(){let e=$("div.menu-container");"none"==e.css("display")?e.slideDown():e.slideUp()})),$("#acountbtn").click((function(){let e=$(".account-container");"none"==e.css("display")?e.slideDown():e.slideUp()})),$("#btn-nuevo").click((function(){$("#modalNuevo").fadeIn().css({display:"flex"})})),$(".btn-cancel").click((function(){$(this).closest(".modal,.modal-tittle").fadeOut(),$(".alert-container").fadeOut()})),$("span.icon-bin").click((function(){$("#modalElminar").fadeIn().css({display:"flex"})})),$("span.icon-pencil").click((function(){let e=$("#modalEditMostrar"),t=e.find('button[type="submit"]'),n=e.find("input,select");e.fadeIn().css({display:"flex"}),t.show(),n.attr("disabled",!1)})),$("span.icon-eye").click((function(){let e=$("#modalEditMostrar"),t=e.find('button[type="submit"]'),n=e.find("input,select");e.fadeIn().css({display:"flex"}),t.hide(),n.attr("disabled",!0)})),$(window).resize((function(){window.innerWidth<=520&&$("table").css({"overflow-x":"scroll"})}))})),$.ajaxSetup({url:"procesar.php",type:"POST",async:!0,error:function(e){console.log("response",e),n(3,1e3,3e3)}}),$("form.edit").submit((function(e){var t=$(this);if(a(this)){var i=$(this).serialize();$.post("procesar.php",i,(function(e){t.parent().find(".loading").show(),console.log(i)})).done((function(e){t.parent().find(".loading").fadeOut(1e3),"1"==JSON.parse(e).success?n(1,1e3,3e3):n(2,1e3,3e3)}))}})),$("form#login").submit((function(e){$(this);a(this)&&(window.location.href="home.html")})),$("form#eliminar").submit((function(e){var t=$(this);if(a(this)){var i=$(this).serialize();$.ajax({data:i,beforeSend:function(){t.parent().find(".loading").show()},success:function(e){t.parent().find(".loading").fadeOut(1e3),"1"==JSON.parse(e).success?(t.closest(".modal").fadeOut(),n(1,1e3,3e3)):n(2,1e3,3e3)}})}})),$("form#matricula").submit((function(e){var t=$(this);if(a(this)){var i=$(this).serialize();$.ajax({data:i,beforeSend:function(){t.parent().find(".loading").show()},success:function(e){t.parent().find(".loading").fadeOut(1e3),"1"==JSON.parse(e).success?(t.hide(),$("form#clinic").show()):n(2,1e3,3e3)}})}})),$("form#clinic").submit((function(e){var t=$(this);if(a(this)){var i=$(this).serialize();$.ajax({data:i,beforeSend:function(){t.parent().find(".loading").show()},success:function(e){t.parent().find(".loading").fadeOut(1e3),"1"==JSON.parse(e).success?(t.hide(),$("form#estudiante").show()):n(2,1e3,3e3)}})}})),$("form#estudiante").submit((function(e){var t=$(this);if(a(this)){var i=$(this).serialize();$.ajax({data:i,beforeSend:function(){t.parent().find(".loading").show()},success:function(e){t.parent().find(".loading").fadeOut(1e3),"1"==JSON.parse(e).success?(t.hide(),$("form#acudiente").show()):n(2,1e3,3e3)}})}})),$("form#acudiente").submit((function(e){var t=$(this);if(a(this)){var i=$(this).serialize();$.ajax({data:i,beforeSend:function(){t.parent().find(".loading").show()},success:function(e){t.parent().find(".loading").fadeOut(1e3),"1"==JSON.parse(e).success?(t.closest(".modal").fadeOut(),t.closest(".modal").find("form").hide(),t.closest(".modal").find("form#matricula").show(),n(1,1e3,3e3)):n(2,1e3,3e3)}})}}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImMuanMiLCJfX2Zvcm1zLmpzIiwiX2RvbS5qcyJdLCJuYW1lcyI6WyJjIiwicGludGFyU3RpbG9zIiwiZWxlbSIsInRpcG8iLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwiY3VtcGxlIiwic2hvd0FsZXJ0IiwidGltZUluIiwidGltZU91dCIsImRpdkFsZXJ0IiwiJCIsImZpbmQiLCJlbXB0eSIsInRleHQiLCJmYWRlSW4iLCJzZXRUaW1lb3V0IiwiZmFkZU91dCIsImFuaW1hdGUiLCJib3R0b20iLCJkdXJhdGlvbiIsInF1ZXVlIiwidmFsaWRhckxlbmd0aCIsInZhbG9yIiwibWluTGVuZ3RoIiwibWF4TGVuZ3RoIiwidmFsaWRhdGVGb3JtIiwiZm9ybSIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJjYW1wb3NPYmxpZ2EiLCJsZW5ndGgiLCJ0b3RhbCIsInJlZ0V4cEVtYWlsIiwicmVnRXhwTnVtYmVyIiwiZWFjaCIsImkiLCJlIiwiaWQiLCJhdHRyIiwidmFsb3JJbnB1dCIsInZhbCIsInZhbG9yQ2hlY2tib3giLCJwcm9wIiwidmFsb3JTZWxlY3QiLCJjdXN0b21EaXZDaGVjayIsInBhcmVudCIsInRlc3QiLCJkb2N1bWVudCIsInJlYWR5IiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwiaW5kZXhPZiIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsImNzcyIsImRpc3BsYXkiLCJXT1ciLCJpbml0IiwiY2xpY2siLCJjdXN0b21DaGVjayIsInRoaXMiLCJtZW51Iiwic2xpZGVEb3duIiwic2xpZGVVcCIsImFjb3VudENvbnRhaW5lciIsImNsb3Nlc3QiLCJtb2RhbEVkaXQiLCJib3RvbkVkaXQiLCJpbnB1dHMiLCJzaG93IiwiaGlkZSIsInJlc2l6ZSIsImlubmVyV2lkdGgiLCJvdmVyZmxvdy14IiwiYWpheFNldHVwIiwidXJsIiwidHlwZSIsImFzeW5jIiwiZXJyb3IiLCJyZXNwb25zZSIsImNvbnNvbGUiLCJsb2ciLCJzdWJtaXQiLCJmb3JtdWxhcmlvIiwiZGF0YSIsInNlcmlhbGl6ZSIsInBvc3QiLCJkb25lIiwiSlNPTiIsInBhcnNlIiwic3VjY2VzcyIsImFqYXgiLCJiZWZvcmVTZW5kIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFBQSxFQUFBLEVDQ0EsU0FBQUMsRUFBQUMsRUFBQUMsR0FFQSxVQUFBQSxHQUNBRCxFQUFBRSxTQUFBLFNBQ0FGLEVBQUFHLFlBQUEsWUFDQUMsT0FBQSxHQUVBLFdBQUFILElBQ0FELEVBQUFFLFNBQUEsWUFDQUYsRUFBQUcsWUFBQSxTQUNBQyxPQUFBLEdBTUEsU0FBQUMsRUFBQUQsRUFBQUUsRUFBQUMsR0FFQSxNQUFBQyxFQUFBQyxFQUFBLHVCQUdBRCxFQUFBRSxLQUFBLHFCQUFBQyxRQUdBLElBQUFQLEVBRUFJLEVBQUFOLFNBQUEsZUFBQVEsS0FQQSxxQkFPQUUsS0FBQSxVQUNBLElBQUFSLEVBRUFJLEVBQUFOLFNBQUEsZUFBQVEsS0FWQSxxQkFVQUUsS0FBQSw2QkFDQSxJQUFBUixHQUNBSSxFQUFBTixTQUFBLGdCQUFBUSxLQVpBLHFCQVlBRSxLQUFBLCtCQUdBSixFQUFBSyxPQUFBUCxFQUFBLFVBQUEsV0FDQVEsWUFBQSxXQUNBTixFQUFBTyxVQUFBQyxRQUFBLENBQ0FDLE9BQUEsTUFDQSxDQUNBQyxTQUFBLE9BQ0FDLE9BQUEsTUFFQVosTUFDQVMsUUFBQSxDQUNBQyxPQUFBLFFBQ0EsQ0FDQUMsU0FBQSxPQUNBQyxPQUFBLElBU0EsU0FBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FDQSxTQUFBRixHQUFBQyxFQUFBRCxHQUFBRSxHQU9BLFNBQUFDLEVBQUFDLEdBRUFDLE1BQUFDLGlCQUVBLElBQUFDLEVBQUFuQixFQUFBZ0IsR0FBQWYsS0FBQSxnQkFBQW1CLE9BSUFDLEdBSEFyQixFQUFBZ0IsR0FBQWYsS0FBQSx5QkFHQSxHQUVBLE1BQUFxQixFQUFBLDBJQUNBQyxFQUFBLFFBdURBLE9BcERBdkIsRUFBQWdCLEdBQUFmLEtBQUEsZ0JBQUF1QixNQUFBLFNBQUFDLEVBQUFDLEdBRUEsSUFB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QUNBN0QsRUFBQSxrQkFBQTRELFFBRUFoRSxFQUFBLEVBQUEsSUFBQSxZQVFBSSxFQUFBLGtCQUFBeUUsUUFBQSxTQUFBeEQsR0FFQSxJQUFBeUQsRUFBQTFFLEVBQUFtRCxNQUVBLEdBQUFwQyxFQUFBb0MsTUFBQSxDQUdBLElBQUF3QixFQUFBM0UsRUFBQW1ELE1BQUF5QixZQUVBNUUsRUFBQWtGLEtBQUEsQ0FDQVAsS0FBQUEsRUFDQVEsV0FBQSxXQUNBVCxFQUFBdkMsU0FBQWxDLEtBQUEsWUFBQTJELFFBRUFxQixRQUFBLFNBQUFYLEdBQ0FJLEVBQUF2QyxTQUFBbEMsS0FBQSxZQUFBSyxRQUFBLEtBR0EsS0FEQXlFLEtBQUFDLE1BQUFWLEdBQ0FXLFNBRUFQLEVBQUFsQixRQUFBLFVBQUFsRCxVQUNBb0UsRUFBQWxCLFFBQUEsVUFBQXZELEtBQUEsUUFBQTRELE9BQ0FhLEVBQUFsQixRQUFBLFVBQUF2RCxLQUFBLGtCQUFBMkQsT0FDQWhFLEVBQUEsRUFBQSxJQUFBLE1BR0FBLEVBQUEsRUFBQSxJQUFBIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBjID0gMztcclxuIiwiLy8vLy8vLy8vLy8vIFBpbnRhIGVzdGlsb3MgZGUgZXJyb3IgeSB2YWxpZG9cclxuZnVuY3Rpb24gcGludGFyU3RpbG9zKGVsZW0sIHRpcG8pIHtcclxuXHJcbiAgaWYgKHRpcG8gPT09ICdlcnJvcicpIHtcclxuICAgIGVsZW0uYWRkQ2xhc3MoJ2Vycm9yJyk7XHJcbiAgICBlbGVtLnJlbW92ZUNsYXNzKCdjb3JyZWN0bycpO1xyXG4gICAgY3VtcGxlID0gMDtcclxuXHJcbiAgfSBlbHNlIGlmICh0aXBvID09PSAndmFsaWRvJykge1xyXG4gICAgZWxlbS5hZGRDbGFzcygnY29ycmVjdG8nKTtcclxuICAgIGVsZW0ucmVtb3ZlQ2xhc3MoJ2Vycm9yJyk7XHJcbiAgICBjdW1wbGUgPSAxO1xyXG4gIH1cclxuXHJcbn1cclxuXHJcbi8vLy8vLy8vLy8vLyBNdWVzdHJhIGFsZXJ0YSBkZSBsb3MgZm9ybXVsYXJpb3NcclxuZnVuY3Rpb24gc2hvd0FsZXJ0KGN1bXBsZSwgdGltZUluLCB0aW1lT3V0KSB7XHJcblxyXG4gIGNvbnN0IGRpdkFsZXJ0ID0gJCgnZGl2LmFsZXJ0LWNvbnRhaW5lcicpO1xyXG4gIGNvbnN0IGNvbnRlbnRBbGVydCA9ICdkaXYuYWxlcnQtY29udGVudCc7XHJcblxyXG4gIGRpdkFsZXJ0LmZpbmQoJ2Rpdi5hbGVydC1jb250ZW50JykuZW1wdHkoKTtcclxuXHJcblxyXG4gIGlmIChjdW1wbGUgPT09IDEpIHtcclxuXHJcbiAgICBkaXZBbGVydC5hZGRDbGFzcygnYWxlcnQtY2hlY2snKS5maW5kKGNvbnRlbnRBbGVydCkudGV4dCgnTmljZSAhJyk7XHJcbiAgfSBlbHNlIGlmIChjdW1wbGUgPT09IDIpIHtcclxuXHJcbiAgICBkaXZBbGVydC5hZGRDbGFzcygnYWxlcnQtZXJyb3InKS5maW5kKGNvbnRlbnRBbGVydCkudGV4dCgnSG1tLCBzb21ldGhpbmcgd2VudCB3cm9uZycpO1xyXG4gIH0gZWxzZSBpZiAoY3VtcGxlID09PSAzKSB7XHJcbiAgICBkaXZBbGVydC5hZGRDbGFzcygnYWxlcnQtc2VydmVyJykuZmluZChjb250ZW50QWxlcnQpLnRleHQoJ01heWJlIHRoZSBzZXJ2ZXIgaXMgZG93biA6KCcpO1xyXG4gIH1cclxuXHJcbiAgZGl2QWxlcnQuZmFkZUluKHRpbWVJbiwgXCJsaW5lYXJcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICBkaXZBbGVydC5mYWRlT3V0KCkuYW5pbWF0ZSh7XHJcbiAgICAgICAgJ2JvdHRvbSc6ICcwJSdcclxuICAgICAgfSwge1xyXG4gICAgICAgIGR1cmF0aW9uOiAnc2xvdycsXHJcbiAgICAgICAgcXVldWU6IGZhbHNlXHJcbiAgICAgIH0pO1xyXG4gICAgfSwgdGltZU91dCk7XHJcbiAgfSkuYW5pbWF0ZSh7XHJcbiAgICAnYm90dG9tJzogJzIwdmgnXHJcbiAgfSwge1xyXG4gICAgZHVyYXRpb246ICdzbG93JyxcclxuICAgIHF1ZXVlOiBmYWxzZVxyXG4gIH0pO1xyXG5cclxufVxyXG5cclxuXHJcblxyXG5cclxuLy8vLy8vLy8vLy8vIFZhbGlkYSBsb25naXR1ZFxyXG5mdW5jdGlvbiB2YWxpZGFyTGVuZ3RoKHZhbG9yLCBtaW5MZW5ndGgsIG1heExlbmd0aCkge1xyXG4gIGlmICgodmFsb3IgPj0gbWluTGVuZ3RoKSAmICh2YWxvciA8PSBtYXhMZW5ndGgpKSB7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gdmFsaWRhdGVGb3JtKGZvcm0pIHtcclxuXHJcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgdmFyIGNhbXBvc09ibGlnYSA9ICQoZm9ybSkuZmluZCgnaW5wdXQsc2VsZWN0JykubGVuZ3RoO1xyXG4gIHZhciBib3RvblN1Ym1pdCA9ICQoZm9ybSkuZmluZCgnYnV0dG9uW3R5cGU9XCJzdWJtaXRcIl0nKTtcclxuXHJcbiAgLy9WYXJpYWJsZSBwYXJhIGNvbXByYXIgbG9zIGlucHV0cyBxdWUgZXN0YW4gYmllbiBjb24gbGEgY2FudGlkYWQgZGUgaW5wdXRzIGRlbCBmb3JtdWxhcmlvXHJcbiAgdmFyIHRvdGFsID0gMDtcclxuICAvL2V4cHJlc2lvbmVzIFJlZ3VsYXJlc1xyXG4gIGNvbnN0IHJlZ0V4cEVtYWlsID0gL15bYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKD86XFwuW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKykqQCg/OlthLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cXC4pK1thLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT8kLztcclxuICBjb25zdCByZWdFeHBOdW1iZXIgPSAvXlxcZCskLztcclxuXHJcbiAgLy8vL1ZhbGlkYXIgbG9zIGNhbXBvc1xyXG4gICQoZm9ybSkuZmluZCgnaW5wdXQsc2VsZWN0JykuZWFjaChmdW5jdGlvbihpLCBlKSB7XHJcblxyXG4gICAgdmFyIGlkID0gJChlKS5hdHRyKCdpZCcpXHJcbiAgICAvL1BvbmVyIGVsIGlkIGVuIGVsIG5hbWUgcGFyYSBtYW5kYXIgbG9zIGRhdG9zIHBvciBzZXJpYWxpemVcclxuICAgICQoZSkuYXR0cignbmFtZScsIGlkKTtcclxuXHJcbiAgICB2YXIgdmFsb3JJbnB1dCA9ICQoZSkudmFsKCk7XHJcbiAgICB2YXIgdmFsb3JDaGVja2JveCA9ICQoZSkucHJvcCgnY2hlY2tlZCcpO1xyXG4gICAgdmFyIHZhbG9yU2VsZWN0ID0gJChlKS52YWwoKTtcclxuICAgIHZhciBjdXN0b21EaXZDaGVjayA9ICQoZSkucGFyZW50KCkuZmluZCgnZGl2LmN1c3RvbS1jaGVja2JveCcpO1xyXG5cclxuXHJcbiAgICBpZiAoJChlKS5sZW5ndGggIT09IDApIHtcclxuICAgICAgc3dpdGNoICgkKGUpLmF0dHIoJ3R5cGUnKSkge1xyXG5cclxuICAgICAgICBjYXNlIFwidGV4dFwiOlxyXG4gICAgICAgICAgdmFsb3JJbnB1dCAhPT0gXCJcIiA/IHBpbnRhclN0aWxvcygkKGUpLCAndmFsaWRvJykgOiBwaW50YXJTdGlsb3MoJChlKSwgJ2Vycm9yJyk7XHJcbiAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgY2FzZSBcInBhc3N3b3JkXCI6XHJcbiAgICAgICAgICB2YWxvcklucHV0ICE9PSBcIlwiID8gcGludGFyU3RpbG9zKCQoZSksICd2YWxpZG8nKSA6IHBpbnRhclN0aWxvcygkKGUpLCAnZXJyb3InKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBjYXNlIFwiZGF0ZVwiOlxyXG4gICAgICAgICAgdmFsb3JJbnB1dCAhPT0gXCJcIiA/IHBpbnRhclN0aWxvcygkKGUpLCAndmFsaWRvJykgOiBwaW50YXJTdGlsb3MoJChlKSwgJ2Vycm9yJyk7XHJcbiAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgY2FzZSBcImlkZW50aWZpY2F0aW9uXCI6XHJcbiAgICAgICAgICBpZiAoKHJlZ0V4cE51bWJlci50ZXN0KCQoZSkucHJvcCgndmFsdWUnKSkpICYgKHZhbGlkYXJMZW5ndGgodmFsb3JJbnB1dC5sZW5ndGgsIDEwLCAxMCkpKSB7XHJcbiAgICAgICAgICAgIHBpbnRhclN0aWxvcygkKGUpLCAndmFsaWRvJyk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBwaW50YXJTdGlsb3MoJChlKSwgJ2Vycm9yJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgY2FzZSBcImVtYWlsQ3VzdG9tXCI6XHJcbiAgICAgICAgICByZWdFeHBFbWFpbC50ZXN0KCQoZSkucHJvcCgndmFsdWUnKSkgPyBwaW50YXJTdGlsb3MoJChlKSwgJ3ZhbGlkbycpIDogcGludGFyU3RpbG9zKCQoZSksICdlcnJvcicpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIGNhc2UgXCJjaGVja2JveFwiOlxyXG4gICAgICAgICAgdmFsb3JDaGVja2JveCAhPT0gZmFsc2UgPyBwaW50YXJTdGlsb3MoY3VzdG9tRGl2Q2hlY2ssICd2YWxpZG8nKSA6IHBpbnRhclN0aWxvcyhjdXN0b21EaXZDaGVjaywgJ2Vycm9yJyk7XHJcbiAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgY2FzZSBcInNlbGVjdFwiOlxyXG4gICAgICAgICAgdmFsb3JTZWxlY3QgIT0gMSA/IHBpbnRhclN0aWxvcygkKGUpLCAndmFsaWRvJykgOiBwaW50YXJTdGlsb3MoJChlKSwgJ2Vycm9yJyk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICB0b3RhbCA9IHRvdGFsICsgY3VtcGxlO1xyXG4gICAgfVxyXG5cclxuICB9KTtcclxuXHJcbiAgaWYgKHRvdGFsID09PSBjYW1wb3NPYmxpZ2EpIHtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG5cclxufVxyXG4vLyBOT1RFOiBDT05GSUcgQ09OU1VMVEFTXHJcbiQuYWpheFNldHVwKHtcclxuICB1cmw6ICdwcm9jZXNhci5waHAnLFxyXG4gIHR5cGU6ICdQT1NUJyxcclxuICBhc3luYzogdHJ1ZSxcclxuICBlcnJvcjogZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgIGNvbnNvbGUubG9nKCdyZXNwb25zZScsIHJlc3BvbnNlKTtcclxuICAgIHNob3dBbGVydCgzLCAxMDAwLCAzMDAwKTtcclxuICB9XHJcbn0pO1xyXG5cclxuLy8gTk9URTogQ09OU1VMVEEgRURJVFxyXG4kKCdmb3JtLmVkaXQnKS5zdWJtaXQoZnVuY3Rpb24oZXZlbnQpIHtcclxuXHJcbiAgdmFyIGZvcm11bGFyaW8gPSAkKHRoaXMpO1xyXG5cclxuICBpZiAodmFsaWRhdGVGb3JtKHRoaXMpKSB7XHJcblxyXG4gICAgLy8gRGF0YSBxdWUgc2UgZW52aWEgYSBsYSBiYXNlIGRlIGRhdG9zXHJcbiAgICB2YXIgZGF0YSA9ICQodGhpcykuc2VyaWFsaXplKCk7XHJcblxyXG4gICAgJC5wb3N0KFwicHJvY2VzYXIucGhwXCIsIGRhdGEsIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgZm9ybXVsYXJpby5wYXJlbnQoKS5maW5kKCcubG9hZGluZycpLnNob3coKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgfSlcclxuICAgICAgLmRvbmUoZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuXHJcbiAgICAgICAgZm9ybXVsYXJpby5wYXJlbnQoKS5maW5kKCcubG9hZGluZycpLmZhZGVPdXQoMTAwMCk7XHJcbiAgICAgICAgdmFyIGpzb25EYXRhID0gSlNPTi5wYXJzZShyZXNwb25zZSk7XHJcbiAgICAgICAgaWYgKGpzb25EYXRhLnN1Y2Nlc3MgPT0gXCIxXCIpIHtcclxuICAgICAgICAgIHNob3dBbGVydCgxLCAxMDAwLCAzMDAwKTtcclxuXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHNob3dBbGVydCgyLCAxMDAwLCAzMDAwKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICB9XHJcblxyXG59KTtcclxuXHJcblxyXG4vLyBOT1RFOiBDT05TVUxUQSBMT0dJTlxyXG4kKCdmb3JtI2xvZ2luJykuc3VibWl0KGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgdmFyIGZvcm11bGFyaW8gPSAkKHRoaXMpO1xyXG4gIGlmICh2YWxpZGF0ZUZvcm0odGhpcykpIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJ2hvbWUuaHRtbCc7XHJcbn0pO1xyXG5cclxuLy8gTk9URTogQ09OU1VMVEEgRUxJTUlOQVJcclxuJCgnZm9ybSNlbGltaW5hcicpLnN1Ym1pdChmdW5jdGlvbihldmVudCkge1xyXG5cclxuICB2YXIgZm9ybXVsYXJpbyA9ICQodGhpcyk7XHJcblxyXG4gIGlmICh2YWxpZGF0ZUZvcm0odGhpcykpIHtcclxuXHJcbiAgICAvLyBEYXRhIHF1ZSBzZSBlbnZpYSBhIGxhIGJhc2UgZGUgZGF0b3NcclxuICAgIHZhciBkYXRhID0gJCh0aGlzKS5zZXJpYWxpemUoKTtcclxuXHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICBkYXRhOiBkYXRhLFxyXG4gICAgICBiZWZvcmVTZW5kOiBmdW5jdGlvbigpIHtcclxuICAgICAgICBmb3JtdWxhcmlvLnBhcmVudCgpLmZpbmQoJy5sb2FkaW5nJykuc2hvdygpO1xyXG4gICAgICB9LFxyXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgIGZvcm11bGFyaW8ucGFyZW50KCkuZmluZCgnLmxvYWRpbmcnKS5mYWRlT3V0KDEwMDApO1xyXG4gICAgICAgIHZhciBqc29uRGF0YSA9IEpTT04ucGFyc2UocmVzcG9uc2UpO1xyXG4gICAgICAgIGlmIChqc29uRGF0YS5zdWNjZXNzID09IFwiMVwiKSB7XHJcbiAgICAgICAgICBmb3JtdWxhcmlvLmNsb3Nlc3QoJy5tb2RhbCcpLmZhZGVPdXQoKTtcclxuICAgICAgICAgIHNob3dBbGVydCgxLCAxMDAwLCAzMDAwKTtcclxuXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHNob3dBbGVydCgyLCAxMDAwLCAzMDAwKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG59KTtcclxuXHJcbi8vIE5PVEU6IENPTlNVTFRBUyBOVUVWQSBNQVRSSUNVTEFcclxuJCgnZm9ybSNtYXRyaWN1bGEnKS5zdWJtaXQoZnVuY3Rpb24oZXZlbnQpIHtcclxuICB2YXIgZm9ybXVsYXJpbyA9ICQodGhpcyk7XHJcblxyXG4gIGlmICh2YWxpZGF0ZUZvcm0odGhpcykpIHtcclxuXHJcbiAgICAvL0RhdGEgcXVlIHNlIGVudmlhIGEgbGEgYmFzZSBkZSBkYXRvc1xyXG4gICAgdmFyIGRhdGEgPSAkKHRoaXMpLnNlcmlhbGl6ZSgpO1xyXG5cclxuICAgICQuYWpheCh7XHJcbiAgICAgIGRhdGE6IGRhdGEsXHJcbiAgICAgIGJlZm9yZVNlbmQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGZvcm11bGFyaW8ucGFyZW50KCkuZmluZCgnLmxvYWRpbmcnKS5zaG93KCk7XHJcbiAgICAgIH0sXHJcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgZm9ybXVsYXJpby5wYXJlbnQoKS5maW5kKCcubG9hZGluZycpLmZhZGVPdXQoMTAwMCk7XHJcblxyXG4gICAgICAgIHZhciBqc29uRGF0YSA9IEpTT04ucGFyc2UocmVzcG9uc2UpO1xyXG4gICAgICAgIGlmIChqc29uRGF0YS5zdWNjZXNzID09IFwiMVwiKSB7XHJcbiAgICAgICAgICBmb3JtdWxhcmlvLmhpZGUoKTtcclxuICAgICAgICAgICQoJ2Zvcm0jY2xpbmljJykuc2hvdygpO1xyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgc2hvd0FsZXJ0KDIsIDEwMDAsIDMwMDApO1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbn0pO1xyXG5cclxuJCgnZm9ybSNjbGluaWMnKS5zdWJtaXQoZnVuY3Rpb24oZXZlbnQpIHtcclxuXHJcbiAgdmFyIGZvcm11bGFyaW8gPSAkKHRoaXMpO1xyXG5cclxuICBpZiAodmFsaWRhdGVGb3JtKHRoaXMpKSB7XHJcblxyXG4gICAgLy8gRGF0YSBxdWUgc2UgZW52aWEgYSBsYSBiYXNlIGRlIGRhdG9zXHJcbiAgICB2YXIgZGF0YSA9ICQodGhpcykuc2VyaWFsaXplKCk7XHJcblxyXG4gICAgJC5hamF4KHtcclxuICAgICAgZGF0YTogZGF0YSxcclxuICAgICAgYmVmb3JlU2VuZDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgZm9ybXVsYXJpby5wYXJlbnQoKS5maW5kKCcubG9hZGluZycpLnNob3coKTtcclxuICAgICAgfSxcclxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICBmb3JtdWxhcmlvLnBhcmVudCgpLmZpbmQoJy5sb2FkaW5nJykuZmFkZU91dCgxMDAwKTtcclxuICAgICAgICB2YXIganNvbkRhdGEgPSBKU09OLnBhcnNlKHJlc3BvbnNlKTtcclxuICAgICAgICBpZiAoanNvbkRhdGEuc3VjY2VzcyA9PSBcIjFcIikge1xyXG4gICAgICAgICAgZm9ybXVsYXJpby5oaWRlKCk7XHJcbiAgICAgICAgICAkKCdmb3JtI2VzdHVkaWFudGUnKS5zaG93KCk7XHJcblxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBzaG93QWxlcnQoMiwgMTAwMCwgMzAwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxufSk7XHJcblxyXG5cclxuJCgnZm9ybSNlc3R1ZGlhbnRlJykuc3VibWl0KGZ1bmN0aW9uKGV2ZW50KSB7XHJcblxyXG4gIHZhciBmb3JtdWxhcmlvID0gJCh0aGlzKTtcclxuXHJcbiAgaWYgKHZhbGlkYXRlRm9ybSh0aGlzKSkge1xyXG4gICAgLy8gRGF0YSBxdWUgc2UgZW52aWEgYSBsYSBiYXNlIGRlIGRhdG9zXHJcblxyXG4gICAgdmFyIGRhdGEgPSAkKHRoaXMpLnNlcmlhbGl6ZSgpO1xyXG4gICAgJC5hamF4KHtcclxuICAgICAgZGF0YTogZGF0YSxcclxuICAgICAgYmVmb3JlU2VuZDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgZm9ybXVsYXJpby5wYXJlbnQoKS5maW5kKCcubG9hZGluZycpLnNob3coKTtcclxuICAgICAgfSxcclxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICBmb3JtdWxhcmlvLnBhcmVudCgpLmZpbmQoJy5sb2FkaW5nJykuZmFkZU91dCgxMDAwKTtcclxuICAgICAgICB2YXIganNvbkRhdGEgPSBKU09OLnBhcnNlKHJlc3BvbnNlKTtcclxuICAgICAgICBpZiAoanNvbkRhdGEuc3VjY2VzcyA9PSBcIjFcIikge1xyXG4gICAgICAgICAgZm9ybXVsYXJpby5oaWRlKCk7XHJcbiAgICAgICAgICAkKCdmb3JtI2FjdWRpZW50ZScpLnNob3coKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgc2hvd0FsZXJ0KDIsIDEwMDAsIDMwMDApO1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbn0pO1xyXG5cclxuJCgnZm9ybSNhY3VkaWVudGUnKS5zdWJtaXQoZnVuY3Rpb24oZXZlbnQpIHtcclxuXHJcbiAgdmFyIGZvcm11bGFyaW8gPSAkKHRoaXMpO1xyXG5cclxuICBpZiAodmFsaWRhdGVGb3JtKHRoaXMpKSB7XHJcblxyXG4gICAgLy8gRGF0YSBxdWUgc2UgZW52aWEgYSBsYSBiYXNlIGRlIGRhdG9zXHJcbiAgICB2YXIgZGF0YSA9ICQodGhpcykuc2VyaWFsaXplKCk7XHJcblxyXG4gICAgJC5hamF4KHtcclxuICAgICAgZGF0YTogZGF0YSxcclxuICAgICAgYmVmb3JlU2VuZDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgZm9ybXVsYXJpby5wYXJlbnQoKS5maW5kKCcubG9hZGluZycpLnNob3coKTtcclxuICAgICAgfSxcclxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICBmb3JtdWxhcmlvLnBhcmVudCgpLmZpbmQoJy5sb2FkaW5nJykuZmFkZU91dCgxMDAwKTtcclxuXHJcbiAgICAgICAgdmFyIGpzb25EYXRhID0gSlNPTi5wYXJzZShyZXNwb25zZSk7XHJcbiAgICAgICAgaWYgKGpzb25EYXRhLnN1Y2Nlc3MgPT0gXCIxXCIpIHtcclxuXHJcbiAgICAgICAgICBmb3JtdWxhcmlvLmNsb3Nlc3QoJy5tb2RhbCcpLmZhZGVPdXQoKTtcclxuICAgICAgICAgIGZvcm11bGFyaW8uY2xvc2VzdCgnLm1vZGFsJykuZmluZCgnZm9ybScpLmhpZGUoKTtcclxuICAgICAgICAgIGZvcm11bGFyaW8uY2xvc2VzdCgnLm1vZGFsJykuZmluZCgnZm9ybSNtYXRyaWN1bGEnKS5zaG93KCk7XHJcbiAgICAgICAgICBzaG93QWxlcnQoMSwgMTAwMCwgMzAwMCk7XHJcblxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBzaG93QWxlcnQoMiwgMTAwMCwgMzAwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxufSk7XHJcbiIsIiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xyXG4gIC8vVkFsaWRhciBzaSBlbCBuYXZlZ2Fkb3IgZXMgSUUuIFNpIGxvIGVzLCBkaXJlY2Npb25hcmxvIGEgb3RyYSBwYWdpbmFcclxuICBpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKFwiVHJpZGVudC9cIikgPiAtMSkge1xyXG4gICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5teC9jaHJvbWUvP2JyYW5kPUNIQkYmZHNfa2lkPTQzNzAwMDM0NjMyNzQ4Njk0JnV0bV9zb3VyY2U9YmluZyZ1dG1fbWVkaXVtPWNwYyZ1dG1fY2FtcGFpZ249MTAwNTk5MiUyMCU3QyUyMENocm9tZSUyMFdpbjEwJTIwJTdDJTIwRFIlMjAlN0MlMjBFU1MwMSUyMCU3QyUyME5BJTIwJTdDJTIwTkElMjAlN0MlMjBlcyUyMCU3QyUyMERlc2slMjAlN0MlMjBCSU5HJTIwU0VNJTIwJTdDJTIwQktXUyUyMH4lMjBUb3AlMjBLV0RTJTIwLSUyMEV4YWN0JnV0bV90ZXJtPWRlc2NhcmdhciUyMGNocm9tZSZ1dG1fY29udGVudD1Eb3dubG9hZCUyMENocm9tZSUyMC0lMjBFeGFjdCZnY2xpZD1DTzcwbTZUVC1lVUNGVVRDRFFvZG1pd0RSUSZnY2xzcmM9ZHMnXHJcbiAgfVxyXG4gIC8vRmFkZSBpbiBkZSBsYSBww6FnaW5hIExvZ2luIGFsIGluaWNpYXIgZWwgbmF2ZWdhZG9yXHJcblxyXG4gIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAkKCdzZWN0aW9uI2xvZ2luJykuZmFkZUluKDE1MDApLmNzcyh7XHJcbiAgICAgIFwiZGlzcGxheVwiOiBcImZsZXhcIlxyXG4gICAgfSk7XHJcbiAgfSwgNTAwKTtcclxuICAvL0luaWNpYWxpemFyIGxhcyBhbmltYWNpb25lcyBkZSBsYSBsaWJyZXJpYSBXT1cgKGFuaW1hY2lvbmVzKVxyXG4gIHZhciB3b3cgPSBuZXcgV09XKCkuaW5pdCgpO1xyXG5cclxuICAvLyBIYWNlciBxdWUgbG9zIGNoZWNrYm94IGNvbiBlc3RpbG9zIGZ1bmNpb25lblxyXG4gICQoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgbGV0IGN1c3RvbUNoZWNrID0gJCh0aGlzKS5wYXJlbnQoKS5maW5kKCdkaXYuY3VzdG9tLWNoZWNrYm94Jyk7XHJcbiAgICAkKHRoaXMpLnByb3AoJ2NoZWNrZWQnKSA/IGN1c3RvbUNoZWNrLnRleHQoJ+KclCcpIDogY3VzdG9tQ2hlY2sudGV4dCgnJyk7XHJcbiAgfSk7XHJcblxyXG4gIC8vIEVmZWN0b3MgbWVudSBidXJndWVyXHJcbiAgJCgnZGl2Lmljb24tbWVudScpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgbGV0IG1lbnUgPSAkKCdkaXYubWVudS1jb250YWluZXInKTtcclxuICAgIGlmIChtZW51LmNzcygnZGlzcGxheScpID09IFwibm9uZVwiKSB7XHJcbiAgICAgIG1lbnUuc2xpZGVEb3duKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBtZW51LnNsaWRlVXAoKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgJCgnI2Fjb3VudGJ0bicpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgbGV0IGFjb3VudENvbnRhaW5lciA9ICQoJy5hY2NvdW50LWNvbnRhaW5lcicpO1xyXG4gICAgaWYgKGFjb3VudENvbnRhaW5lci5jc3MoJ2Rpc3BsYXknKSA9PSBcIm5vbmVcIikge1xyXG4gICAgICBhY291bnRDb250YWluZXIuc2xpZGVEb3duKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBhY291bnRDb250YWluZXIuc2xpZGVVcCgpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAvL01vZGFsZXNcclxuXHJcblxyXG4gICQoJyNidG4tbnVldm8nKS5jbGljayhmdW5jdGlvbigpIHtcclxuXHJcbiAgICAkKCcjbW9kYWxOdWV2bycpLmZhZGVJbigpLmNzcyh7XHJcbiAgICAgIFwiZGlzcGxheVwiOiBcImZsZXhcIlxyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG5cclxuICAkKCcuYnRuLWNhbmNlbCcpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgJCh0aGlzKS5jbG9zZXN0KCcubW9kYWwsLm1vZGFsLXRpdHRsZScpLmZhZGVPdXQoKTtcclxuICAgIC8vICQoJy5sb2FkaW5nJykuZmFkZU91dCgpO1xyXG4gICAgJCgnLmFsZXJ0LWNvbnRhaW5lcicpLmZhZGVPdXQoKTtcclxuICB9KTtcclxuXHJcbiAgJCgnc3Bhbi5pY29uLWJpbicpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgJCgnI21vZGFsRWxtaW5hcicpLmZhZGVJbigpLmNzcyh7XHJcbiAgICAgIFwiZGlzcGxheVwiOiBcImZsZXhcIlxyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gICQoJ3NwYW4uaWNvbi1wZW5jaWwnKS5jbGljayhmdW5jdGlvbigpIHtcclxuXHJcbiAgICBsZXQgbW9kYWxFZGl0ID0gJCgnI21vZGFsRWRpdE1vc3RyYXInKTtcclxuICAgIGxldCBib3RvbkVkaXQgPSBtb2RhbEVkaXQuZmluZCgnYnV0dG9uW3R5cGU9XCJzdWJtaXRcIl0nKVxyXG4gICAgbGV0IGlucHV0cyA9IG1vZGFsRWRpdC5maW5kKCdpbnB1dCxzZWxlY3QnKTtcclxuICAgIG1vZGFsRWRpdC5mYWRlSW4oKS5jc3Moe1xyXG4gICAgICBcImRpc3BsYXlcIjogXCJmbGV4XCJcclxuICAgIH0pO1xyXG4gICAgYm90b25FZGl0LnNob3coKTtcclxuICAgIGlucHV0cy5hdHRyKCdkaXNhYmxlZCcsZmFsc2UpO1xyXG4gIH0pO1xyXG5cclxuICAkKCdzcGFuLmljb24tZXllJykuY2xpY2soZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgbGV0IG1vZGFsRWRpdCA9ICQoJyNtb2RhbEVkaXRNb3N0cmFyJyk7XHJcbiAgICBsZXQgYm90b25FZGl0ID0gbW9kYWxFZGl0LmZpbmQoJ2J1dHRvblt0eXBlPVwic3VibWl0XCJdJylcclxuICAgIGxldCBpbnB1dHMgPSBtb2RhbEVkaXQuZmluZCgnaW5wdXQsc2VsZWN0Jyk7XHJcbiAgICBtb2RhbEVkaXQuZmFkZUluKCkuY3NzKHtcclxuICAgICAgXCJkaXNwbGF5XCI6IFwiZmxleFwiXHJcbiAgICB9KTtcclxuICAgIGJvdG9uRWRpdC5oaWRlKCk7XHJcbiAgICBpbnB1dHMuYXR0cignZGlzYWJsZWQnLHRydWUpO1xyXG4gIH0pO1xyXG5cclxuXHJcbiAgLy9UYWJsYXNcclxuICAkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoIDw9IDUyMCkge1xyXG4gICAgICAkKCd0YWJsZScpLmNzcyh7XHJcbiAgICAgICAgXCJvdmVyZmxvdy14XCI6IFwic2Nyb2xsXCJcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG5cclxuXHJcblxyXG59KTtcclxuIl19
