var e=3;function t(e,t){"error"===t?(e.addClass("error"),e.removeClass("correcto"),cumple=0):"valido"===t&&(e.addClass("correcto"),e.removeClass("error"),cumple=1)}function n(e,t,n){const i=$("div.alert-container");i.find("div.alert-content").empty(),1===e?i.addClass("alert-check").find("div.alert-content").text("Nice !"):2===e?i.addClass("alert-error").find("div.alert-content").text("Hmm, something went wrong"):3===e&&i.addClass("alert-server").find("div.alert-content").text("Maybe the server is down :("),i.fadeIn(t,"linear",(function(){setTimeout((function(){i.fadeOut().animate({bottom:"0%"},{duration:"slow",queue:!1})}),n)})).animate({bottom:"20vh"},{duration:"slow",queue:!1})}function i(e,t,n){return!!(e>=t&e<=n)}function o(e){event.preventDefault();var n=$(e).find("input,select").length,o=($(e).find('button[type="submit"]'),0);const a=/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/,s=/^\d+$/;return $(e).find("input,select").each((function(e,n){var c=$(n).attr("id");$(n).attr("name",c);var r=$(n).val(),d=$(n).prop("checked"),l=$(n).val(),u=$(n).parent().find("div.custom-checkbox");if(0!==$(n).length){switch($(n).attr("type")){case"text":case"password":case"date":t($(n),""!==r?"valido":"error");break;case"identification":s.test($(n).prop("value"))&i(r.length,10,10)?t($(n),"valido"):t($(n),"error");break;case"emailCustom":a.test($(n).prop("value"))?t($(n),"valido"):t($(n),"error");break;case"checkbox":t(u,!1!==d?"valido":"error");break;case"select":t($(n),1!=l?"valido":"error")}o+=cumple}})),o===n}$(document).ready((function(){navigator.userAgent.indexOf("Trident/")>-1&&(window.location.href="https://www.google.com.mx/chrome/?brand=CHBF&ds_kid=43700034632748694&utm_source=bing&utm_medium=cpc&utm_campaign=1005992%20%7C%20Chrome%20Win10%20%7C%20DR%20%7C%20ESS01%20%7C%20NA%20%7C%20NA%20%7C%20es%20%7C%20Desk%20%7C%20BING%20SEM%20%7C%20BKWS%20~%20Top%20KWDS%20-%20Exact&utm_term=descargar%20chrome&utm_content=Download%20Chrome%20-%20Exact&gclid=CO70m6TT-eUCFUTCDQodmiwDRQ&gclsrc=ds"),setTimeout((function(){$("section#login").fadeIn(1500).css({display:"flex"})}),500);(new WOW).init();$('input[type="checkbox"]').click((function(){let e=$(this).parent().find("div.custom-checkbox");$(this).prop("checked")?e.text("âœ”"):e.text("")})),$("div.icon-menu").click((function(){let e=$("div.menu-container");"none"==e.css("display")?e.slideDown():e.slideUp()})),$("#acountbtn").click((function(){let e=$(".account-container");"none"==e.css("display")?e.slideDown():e.slideUp()})),$("#btn-nuevo").click((function(){$("#modalNuevo").fadeIn().css({display:"flex"})})),$(".btn-cancel").click((function(){$(this).closest(".modal,.modal-tittle").fadeOut(),$(".alert-container").fadeOut()})),$("span.icon-bin").click((function(){$("#modalElminar").fadeIn().css({display:"flex"})})),$("span.icon-pencil").click((function(){let e=$("#modalEditMostrar"),t=e.find('button[type="submit"]'),n=e.find("input,select");e.fadeIn().css({display:"flex"}),t.show(),n.attr("disabled",!1)})),$("span.icon-eye").click((function(){let e=$("#modalEditMostrar"),t=e.find('button[type="submit"]'),n=e.find("input,select");e.fadeIn().css({display:"flex"}),t.hide(),n.attr("disabled",!0)})),$(window).resize((function(){window.innerWidth<=520&&$("table").css({"overflow-x":"scroll"})}))})),$.ajaxSetup({url:"procesar.php",type:"POST",async:!0,error:function(e){console.log("response",e),n(3,1e3,3e3)}}),$("form#login").submit((function(e){$(this);o(this)&&(window.location.href="home.html")})),$("form.edit").submit((function(e){var t=$(this),i=t.attr("id");if(o(this)){var a="idForm="+i+"&"+$(t).serialize();console.log(a),$.post("procesar.php",a,(function(e){t.parent().find(".loading").show(),console.log(a)})).done((function(e){t.parent().find(".loading").fadeOut(1e3),"1"==JSON.parse(e).success?n(1,1e3,3e3):n(2,1e3,3e3)}))}})),$("form#eliminar").submit((function(e){var t=$(this),i=t.attr("id");if(o(this)){var a="idForm="+i+"&"+$(t).serialize();console.log(a),$.ajax({data:a,beforeSend:function(){t.parent().find(".loading").show()},success:function(e){t.parent().find(".loading").fadeOut(1e3),"1"==JSON.parse(e).success?(t.closest(".modal").fadeOut(),n(1,1e3,3e3)):n(2,1e3,3e3)}})}})),$("form#matricula").submit((function(e){var t=$(this),i=t.attr("id");if(console.log(i),o(this)){var a="idForm="+i+"&"+$(t).serialize();console.log(a),$.ajax({data:a,beforeSend:function(){t.parent().find(".loading").show()},success:function(e){t.parent().find(".loading").fadeOut(1e3),"1"==JSON.parse(e).success?(t.hide(),$("form#clinic").show()):n(2,1e3,3e3)}})}})),$("form#clinic").submit((function(e){var t=$(this),i=t.attr("id");if(o(this)){var a="idForm="+i+"&"+$(t).serialize();console.log(a),$.ajax({data:a,beforeSend:function(){t.parent().find(".loading").show()},success:function(e){t.parent().find(".loading").fadeOut(1e3),"1"==JSON.parse(e).success?(t.hide(),$("form#estudiante").show()):n(2,1e3,3e3)}})}})),$("form#estudiante").submit((function(e){var t=$(this),i=t.attr("id");if(o(this)){var a="idForm="+i+"&"+$(t).serialize();console.log(a),$.ajax({data:a,beforeSend:function(){t.parent().find(".loading").show()},success:function(e){t.parent().find(".loading").fadeOut(1e3),"1"==JSON.parse(e).success?(t.hide(),$("form#acudiente").show()):n(2,1e3,3e3)}})}})),$("form#acudiente").submit((function(e){var t=$(this),i=t.attr("id");if(o(this)){var a="idForm="+i+"&"+$(t).serialize();console.log(a),$.ajax({data:a,beforeSend:function(){t.parent().find(".loading").show()},success:function(e){t.parent().find(".loading").fadeOut(1e3),"1"==JSON.parse(e).success?(t.closest(".modal").fadeOut(),t.closest(".modal").find("form").hide(),t.closest(".modal").find("form#matricula").show(),n(1,1e3,3e3)):n(2,1e3,3e3)}})}}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImMuanMiLCJfX2Zvcm1zLmpzIiwiX2RvbS5qcyJdLCJuYW1lcyI6WyJjIiwicGludGFyU3RpbG9zIiwiZWxlbSIsInRpcG8iLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwiY3VtcGxlIiwic2hvd0FsZXJ0IiwidGltZUluIiwidGltZU91dCIsImRpdkFsZXJ0IiwiJCIsImZpbmQiLCJlbXB0eSIsInRleHQiLCJmYWRlSW4iLCJzZXRUaW1lb3V0IiwiZmFkZU91dCIsImFuaW1hdGUiLCJib3R0b20iLCJkdXJhdGlvbiIsInF1ZXVlIiwidmFsaWRhckxlbmd0aCIsInZhbG9yIiwibWluTGVuZ3RoIiwibWF4TGVuZ3RoIiwidmFsaWRhdGVGb3JtIiwiZm9ybSIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJjYW1wb3NPYmxpZ2EiLCJsZW5ndGgiLCJ0b3RhbCIsInJlZ0V4cEVtYWlsIiwicmVnRXhwTnVtYmVyIiwiZWFjaCIsImkiLCJlIiwiaWQiLCJhdHRyIiwidmFsb3JJbnB1dCIsInZhbCIsInZhbG9yQ2hlY2tib3giLCJwcm9wIiwidmFsb3JTZWxlY3QiLCJjdXN0b21EaXZDaGVjayIsInBhcmVudCIsInRlc3QiLCJkb2N1bWVudCIsInJlYWR5IiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwiaW5kZXhPZiIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsImNzcyIsImRpc3BsYXkiLCJXT1ciLCJpbml0IiwiY2xpY2siLCJjdXN0b21DaGVjayIsInRoaXMiLCJtZW51Iiwic2xpZGVEb3duIiwic2xpZGVVcCIsImFjb3VudENvbnRhaW5lciIsImNsb3Nlc3QiLCJtb2RhbEVkaXQiLCJib3RvbkVkaXQiLCJpbnB1dHMiLCJzaG93IiwiaGlkZSIsInJlc2l6ZSIsImlubmVyV2lkdGgiLCJvdmVyZmxvdy14IiwiYWpheFNldHVwIiwidXJsIiwidHlwZSIsImFzeW5jIiwiZXJyb3IiLCJyZXNwb25zZSIsImNvbnNvbGUiLCJsb2ciLCJzdWJtaXQiLCJmb3JtdWxhcmlvIiwiaWRGb3JtdWxhcmlvIiwiZGF0YSIsInNlcmlhbGl6ZSIsInBvc3QiLCJkb25lIiwiSlNPTiIsInBhcnNlIiwic3VjY2VzcyIsImFqYXgiLCJiZWZvcmVTZW5kIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFBQSxFQUFBLEVDQ0EsU0FBQUMsRUFBQUMsRUFBQUMsR0FFQSxVQUFBQSxHQUNBRCxFQUFBRSxTQUFBLFNBQ0FGLEVBQUFHLFlBQUEsWUFDQUMsT0FBQSxHQUVBLFdBQUFILElBQ0FELEVBQUFFLFNBQUEsWUFDQUYsRUFBQUcsWUFBQSxTQUNBQyxPQUFBLEdBTUEsU0FBQUMsRUFBQUQsRUFBQUUsRUFBQUMsR0FFQSxNQUFBQyxFQUFBQyxFQUFBLHVCQUdBRCxFQUFBRSxLQUFBLHFCQUFBQyxRQUdBLElBQUFQLEVBRUFJLEVBQUFOLFNBQUEsZUFBQVEsS0FQQSxxQkFPQUUsS0FBQSxVQUNBLElBQUFSLEVBRUFJLEVBQUFOLFNBQUEsZUFBQVEsS0FWQSxxQkFVQUUsS0FBQSw2QkFDQSxJQUFBUixHQUNBSSxFQUFBTixTQUFBLGdCQUFBUSxLQVpBLHFCQVlBRSxLQUFBLCtCQUdBSixFQUFBSyxPQUFBUCxFQUFBLFVBQUEsV0FDQVEsWUFBQSxXQUNBTixFQUFBTyxVQUFBQyxRQUFBLENBQ0FDLE9BQUEsTUFDQSxDQUNBQyxTQUFBLE9BQ0FDLE9BQUEsTUFFQVosTUFDQVMsUUFBQSxDQUNBQyxPQUFBLFFBQ0EsQ0FDQUMsU0FBQSxPQUNBQyxPQUFBLElBU0EsU0FBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FDQSxTQUFBRixHQUFBQyxFQUFBRCxHQUFBRSxHQU9BLFNBQUFDLEVBQUFDLEdBRUFDLE1BQUFDLGlCQUVBLElBQUFDLEVBQUFuQixFQUFBZ0IsR0FBQWYsS0FBQSxnQkFBQW1CLE9BSUFDLEdBSEFyQixFQUFBZ0IsR0FBQWYsS0FBQSx5QkFHQSxHQUVBLE1BQUFxQixFQUFBLDBJQUNBQyxFQUFBLFFBdURBLE9BcERBdkIsRUFBQWdCLEdBQUFmLEtBQUEsZ0JBQUF1QixNQUFBLFNBQUFD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UGludGEgZXN0aWxvcyBkZSBlcnJvciB5IHZhbGlkb1xyXG5mdW5jdGlvbiBwaW50YXJTdGlsb3MoZWxlbSwgdGlwbykge1xyXG5cclxuICBpZiAodGlwbyA9PT0gJ2Vycm9yJykge1xyXG4gICAgZWxlbS5hZGRDbGFzcygnZXJyb3InKTtcclxuICAgIGVsZW0ucmVtb3ZlQ2xhc3MoJ2NvcnJlY3RvJyk7XHJcbiAgICBjdW1wbGUgPSAwO1xyXG5cclxuICB9IGVsc2UgaWYgKHRpcG8gPT09ICd2YWxpZG8nKSB7XHJcbiAgICBlbGVtLmFkZENsYXNzKCdjb3JyZWN0bycpO1xyXG4gICAgZWxlbS5yZW1vdmVDbGFzcygnZXJyb3InKTtcclxuICAgIGN1bXBsZSA9IDE7XHJcbiAgfVxyXG5cclxufVxyXG5cclxuLy8vLy8vLy8vLy8vIE11ZXN0cmEgYWxlcnRhIGRlIGxvcyBmb3JtdWxhcmlvc1xyXG5mdW5jdGlvbiBzaG93QWxlcnQoY3VtcGxlLCB0aW1lSW4sIHRpbWVPdXQpIHtcclxuXHJcbiAgY29uc3QgZGl2QWxlcnQgPSAkKCdkaXYuYWxlcnQtY29udGFpbmVyJyk7XHJcbiAgY29uc3QgY29udGVudEFsZXJ0ID0gJ2Rpdi5hbGVydC1jb250ZW50JztcclxuXHJcbiAgZGl2QWxlcnQuZmluZCgnZGl2LmFsZXJ0LWNvbnRlbnQnKS5lbXB0eSgpO1xyXG5cclxuXHJcbiAgaWYgKGN1bXBsZSA9PT0gMSkge1xyXG5cclxuICAgIGRpdkFsZXJ0LmFkZENsYXNzKCdhbGVydC1jaGVjaycpLmZpbmQoY29udGVudEFsZXJ0KS50ZXh0KCdOaWNlICEnKTtcclxuICB9IGVsc2UgaWYgKGN1bXBsZSA9PT0gMikge1xyXG5cclxuICAgIGRpdkFsZXJ0LmFkZENsYXNzKCdhbGVydC1lcnJvcicpLmZpbmQoY29udGVudEFsZXJ0KS50ZXh0KCdIbW0sIHNvbWV0aGluZyB3ZW50IHdyb25nJyk7XHJcbiAgfSBlbHNlIGlmIChjdW1wbGUgPT09IDMpIHtcclxuICAgIGRpdkFsZXJ0LmFkZENsYXNzKCdhbGVydC1zZXJ2ZXInKS5maW5kKGNvbnRlbnRBbGVydCkudGV4dCgnTWF5YmUgdGhlIHNlcnZlciBpcyBkb3duIDooJyk7XHJcbiAgfVxyXG5cclxuICBkaXZBbGVydC5mYWRlSW4odGltZUluLCBcImxpbmVhclwiLCBmdW5jdGlvbigpIHtcclxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgIGRpdkFsZXJ0LmZhZGVPdXQoKS5hbmltYXRlKHtcclxuICAgICAgICAnYm90dG9tJzogJzAlJ1xyXG4gICAgICB9LCB7XHJcbiAgICAgICAgZHVyYXRpb246ICdzbG93JyxcclxuICAgICAgICBxdWV1ZTogZmFsc2VcclxuICAgICAgfSk7XHJcbiAgICB9LCB0aW1lT3V0KTtcclxuICB9KS5hbmltYXRlKHtcclxuICAgICdib3R0b20nOiAnMjB2aCdcclxuICB9LCB7XHJcbiAgICBkdXJhdGlvbjogJ3Nsb3cnLFxyXG4gICAgcXVldWU6IGZhbHNlXHJcbiAgfSk7XHJcblxyXG59XHJcblxyXG5cclxuXHJcblxyXG4vLy8vLy8vLy8vLy8gVmFsaWRhIGxvbmdpdHVkXHJcbmZ1bmN0aW9uIHZhbGlkYXJMZW5ndGgodmFsb3IsIG1pbkxlbmd0aCwgbWF4TGVuZ3RoKSB7XHJcbiAgaWYgKCh2YWxvciA+PSBtaW5MZW5ndGgpICYgKHZhbG9yIDw9IG1heExlbmd0aCkpIHtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiB2YWxpZGF0ZUZvcm0oZm9ybSkge1xyXG5cclxuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICB2YXIgY2FtcG9zT2JsaWdhID0gJChmb3JtKS5maW5kKCdpbnB1dCxzZWxlY3QnKS5sZW5ndGg7XHJcbiAgdmFyIGJvdG9uU3VibWl0ID0gJChmb3JtKS5maW5kKCdidXR0b25bdHlwZT1cInN1Ym1pdFwiXScpO1xyXG5cclxuICAvL1ZhcmlhYmxlIHBhcmEgY29tcHJhciBsb3MgaW5wdXRzIHF1ZSBlc3RhbiBiaWVuIGNvbiBsYSBjYW50aWRhZCBkZSBpbnB1dHMgZGVsIGZvcm11bGFyaW9cclxuICB2YXIgdG90YWwgPSAwO1xyXG4gIC8vZXhwcmVzaW9uZXMgUmVndWxhcmVzXHJcbiAgY29uc3QgcmVnRXhwRW1haWwgPSAvXlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSsoPzpcXC5bYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKSpAKD86W2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1xcLikrW2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pPyQvO1xyXG4gIGNvbnN0IHJlZ0V4cE51bWJlciA9IC9eXFxkKyQvO1xyXG5cclxuICAvLy8vVmFsaWRhciBsb3MgY2FtcG9zXHJcbiAgJChmb3JtKS5maW5kKCdpbnB1dCxzZWxlY3QnKS5lYWNoKGZ1bmN0aW9uKGksIGUpIHtcclxuXHJcbiAgICB2YXIgaWQgPSAkKGUpLmF0dHIoJ2lkJylcclxuICAgIC8vUG9uZXIgZWwgaWQgZW4gZWwgbmFtZSBwYXJhIG1hbmRhciBsb3MgZGF0b3MgcG9yIHNlcmlhbGl6ZVxyXG4gICAgJChlKS5hdHRyKCduYW1lJywgaWQpO1xyXG5cclxuICAgIHZhciB2YWxvcklucHV0ID0gJChlKS52YWwoKTtcclxuICAgIHZhciB2YWxvckNoZWNrYm94ID0gJChlKS5wcm9wKCdjaGVja2VkJyk7XHJcbiAgICB2YXIgdmFsb3JTZWxlY3QgPSAkKGUpLnZhbCgpO1xyXG4gICAgdmFyIGN1c3RvbURpdkNoZWNrID0gJChlKS5wYXJlbnQoKS5maW5kKCdkaXYuY3VzdG9tLWNoZWNrYm94Jyk7XHJcblxyXG5cclxuICAgIGlmICgkKGUpLmxlbmd0aCAhPT0gMCkge1xyXG4gICAgICBzd2l0Y2ggKCQoZSkuYXR0cigndHlwZScpKSB7XHJcblxyXG4gICAgICAgIGNhc2UgXCJ0ZXh0XCI6XHJcbiAgICAgICAgICB2YWxvcklucHV0ICE9PSBcIlwiID8gcGludGFyU3RpbG9zKCQoZSksICd2YWxpZG8nKSA6IHBpbnRhclN0aWxvcygkKGUpLCAnZXJyb3InKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBjYXNlIFwicGFzc3dvcmRcIjpcclxuICAgICAgICAgIHZhbG9ySW5wdXQgIT09IFwiXCIgPyBwaW50YXJTdGlsb3MoJChlKSwgJ3ZhbGlkbycpIDogcGludGFyU3RpbG9zKCQoZSksICdlcnJvcicpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIGNhc2UgXCJkYXRlXCI6XHJcbiAgICAgICAgICB2YWxvcklucHV0ICE9PSBcIlwiID8gcGludGFyU3RpbG9zKCQoZSksICd2YWxpZG8nKSA6IHBpbnRhclN0aWxvcygkKGUpLCAnZXJyb3InKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBjYXNlIFwiaWRlbnRpZmljYXRpb25cIjpcclxuICAgICAgICAgIGlmICgocmVnRXhwTnVtYmVyLnRlc3QoJChlKS5wcm9wKCd2YWx1ZScpKSkgJiAodmFsaWRhckxlbmd0aCh2YWxvcklucHV0Lmxlbmd0aCwgMTAsIDEwKSkpIHtcclxuICAgICAgICAgICAgcGludGFyU3RpbG9zKCQoZSksICd2YWxpZG8nKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHBpbnRhclN0aWxvcygkKGUpLCAnZXJyb3InKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBjYXNlIFwiZW1haWxDdXN0b21cIjpcclxuICAgICAgICAgIHJlZ0V4cEVtYWlsLnRlc3QoJChlKS5wcm9wKCd2YWx1ZScpKSA/IHBpbnRhclN0aWxvcygkKGUpLCAndmFsaWRvJykgOiBwaW50YXJTdGlsb3MoJChlKSwgJ2Vycm9yJyk7XHJcbiAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgY2FzZSBcImNoZWNrYm94XCI6XHJcbiAgICAgICAgICB2YWxvckNoZWNrYm94ICE9PSBmYWxzZSA/IHBpbnRhclN0aWxvcyhjdXN0b21EaXZDaGVjaywgJ3ZhbGlkbycpIDogcGludGFyU3RpbG9zKGN1c3RvbURpdkNoZWNrLCAnZXJyb3InKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBjYXNlIFwic2VsZWN0XCI6XHJcbiAgICAgICAgICB2YWxvclNlbGVjdCAhPSAxID8gcGludGFyU3RpbG9zKCQoZSksICd2YWxpZG8nKSA6IHBpbnRhclN0aWxvcygkKGUpLCAnZXJyb3InKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIHRvdGFsID0gdG90YWwgKyBjdW1wbGU7XHJcbiAgICB9XHJcblxyXG4gIH0pO1xyXG5cclxuICBpZiAodG90YWwgPT09IGNhbXBvc09ibGlnYSkge1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcblxyXG59XHJcbi8vIE5PVEU6IENPTkZJRyBDT05TVUxUQVNcclxuJC5hamF4U2V0dXAoe1xyXG4gIHVybDogJ3Byb2Nlc2FyLnBocCcsXHJcbiAgdHlwZTogJ1BPU1QnLFxyXG4gIGFzeW5jOiB0cnVlLFxyXG4gIGVycm9yOiBmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgY29uc29sZS5sb2coJ3Jlc3BvbnNlJywgcmVzcG9uc2UpO1xyXG4gICAgc2hvd0FsZXJ0KDMsIDEwMDAsIDMwMDApO1xyXG4gIH1cclxufSk7XHJcblxyXG4vLyBOT1RFOiBDT05TVUxUQSBMT0dJTlxyXG4kKCdmb3JtI2xvZ2luJykuc3VibWl0KGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgdmFyIGZvcm11bGFyaW8gPSAkKHRoaXMpO1xyXG4gIGlmICh2YWxpZGF0ZUZvcm0odGhpcykpIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJ2hvbWUuaHRtbCc7XHJcbn0pO1xyXG5cclxuLy8gTk9URTogQ09OU1VMVEEgRURJVFxyXG4kKCdmb3JtLmVkaXQnKS5zdWJtaXQoZnVuY3Rpb24oZXZlbnQpIHtcclxuXHJcbiAgdmFyIGZvcm11bGFyaW8gPSAkKHRoaXMpO1xyXG4gIHZhciBpZEZvcm11bGFyaW8gID0gZm9ybXVsYXJpby5hdHRyKCdpZCcpO1xyXG5cclxuICBpZiAodmFsaWRhdGVGb3JtKHRoaXMpKSB7XHJcblxyXG4gICAgLy8gRGF0YSBxdWUgc2UgZW52aWEgYSBsYSBiYXNlIGRlIGRhdG9zXHJcbiAgICB2YXIgZGF0YSA9ICdpZEZvcm09JyArIGlkRm9ybXVsYXJpbyArICcmJyArICQoZm9ybXVsYXJpbykuc2VyaWFsaXplKCk7XHJcbiAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuXHJcbiAgICAkLnBvc3QoXCJwcm9jZXNhci5waHBcIiwgZGF0YSwgZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICBmb3JtdWxhcmlvLnBhcmVudCgpLmZpbmQoJy5sb2FkaW5nJykuc2hvdygpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICB9KVxyXG4gICAgICAuZG9uZShmdW5jdGlvbihyZXNwb25zZSkge1xyXG5cclxuICAgICAgICBmb3JtdWxhcmlvLnBhcmVudCgpLmZpbmQoJy5sb2FkaW5nJykuZmFkZU91dCgxMDAwKTtcclxuICAgICAgICB2YXIganNvbkRhdGEgPSBKU09OLnBhcnNlKHJlc3BvbnNlKTtcclxuICAgICAgICBpZiAoanNvbkRhdGEuc3VjY2VzcyA9PSBcIjFcIikge1xyXG4gICAgICAgICAgc2hvd0FsZXJ0KDEsIDEwMDAsIDMwMDApO1xyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgc2hvd0FsZXJ0KDIsIDEwMDAsIDMwMDApO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gIH1cclxuXHJcbn0pO1xyXG5cclxuXHJcblxyXG5cclxuLy8gTk9URTogQ09OU1VMVEEgRUxJTUlOQVJcclxuJCgnZm9ybSNlbGltaW5hcicpLnN1Ym1pdChmdW5jdGlvbihldmVudCkge1xyXG5cclxuICB2YXIgZm9ybXVsYXJpbyA9ICQodGhpcyk7XHJcbiAgdmFyIGlkRm9ybXVsYXJpbyAgPSBmb3JtdWxhcmlvLmF0dHIoJ2lkJyk7XHJcblxyXG4gIGlmICh2YWxpZGF0ZUZvcm0odGhpcykpIHtcclxuXHJcbiAgICAvLyBEYXRhIHF1ZSBzZSBlbnZpYSBhIGxhIGJhc2UgZGUgZGF0b3NcclxuICAgIHZhciBkYXRhID0gJ2lkRm9ybT0nICsgaWRGb3JtdWxhcmlvICsgJyYnICsgJChmb3JtdWxhcmlvKS5zZXJpYWxpemUoKTtcclxuICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG5cclxuICAgICQuYWpheCh7XHJcbiAgICAgIGRhdGE6IGRhdGEsXHJcbiAgICAgIGJlZm9yZVNlbmQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGZvcm11bGFyaW8ucGFyZW50KCkuZmluZCgnLmxvYWRpbmcnKS5zaG93KCk7XHJcbiAgICAgIH0sXHJcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgZm9ybXVsYXJpby5wYXJlbnQoKS5maW5kKCcubG9hZGluZycpLmZhZGVPdXQoMTAwMCk7XHJcbiAgICAgICAgdmFyIGpzb25EYXRhID0gSlNPTi5wYXJzZShyZXNwb25zZSk7XHJcbiAgICAgICAgaWYgKGpzb25EYXRhLnN1Y2Nlc3MgPT0gXCIxXCIpIHtcclxuICAgICAgICAgIGZvcm11bGFyaW8uY2xvc2VzdCgnLm1vZGFsJykuZmFkZU91dCgpO1xyXG4gICAgICAgICAgc2hvd0FsZXJ0KDEsIDEwMDAsIDMwMDApO1xyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgc2hvd0FsZXJ0KDIsIDEwMDAsIDMwMDApO1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbn0pO1xyXG5cclxuLy8gTk9URTogQ09OU1VMVEFTIE5VRVZBIE1BVFJJQ1VMQVxyXG4kKCdmb3JtI21hdHJpY3VsYScpLnN1Ym1pdChmdW5jdGlvbihldmVudCkge1xyXG4gIHZhciBmb3JtdWxhcmlvID0gJCh0aGlzKTtcclxuICB2YXIgaWRGb3JtdWxhcmlvICA9IGZvcm11bGFyaW8uYXR0cignaWQnKTtcclxuICBjb25zb2xlLmxvZyhpZEZvcm11bGFyaW8pO1xyXG5cclxuICBpZiAodmFsaWRhdGVGb3JtKHRoaXMpKSB7XHJcblxyXG4gICAgLy9EYXRhIHF1ZSBzZSBlbnZpYSBhIGxhIGJhc2UgZGUgZGF0b3NcclxuICAgIHZhciBkYXRhID0gJ2lkRm9ybT0nICsgaWRGb3JtdWxhcmlvICsgJyYnICsgJChmb3JtdWxhcmlvKS5zZXJpYWxpemUoKTtcclxuICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG5cclxuICAgICQuYWpheCh7XHJcbiAgICAgIGRhdGE6IGRhdGEsXHJcbiAgICAgIGJlZm9yZVNlbmQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGZvcm11bGFyaW8ucGFyZW50KCkuZmluZCgnLmxvYWRpbmcnKS5zaG93KCk7XHJcbiAgICAgIH0sXHJcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgZm9ybXVsYXJpby5wYXJlbnQoKS5maW5kKCcubG9hZGluZycpLmZhZGVPdXQoMTAwMCk7XHJcblxyXG4gICAgICAgIHZhciBqc29uRGF0YSA9IEpTT04ucGFyc2UocmVzcG9uc2UpO1xyXG4gICAgICAgIGlmIChqc29uRGF0YS5zdWNjZXNzID09IFwiMVwiKSB7XHJcbiAgICAgICAgICBmb3JtdWxhcmlvLmhpZGUoKTtcclxuICAgICAgICAgICQoJ2Zvcm0jY2xpbmljJykuc2hvdygpO1xyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgc2hvd0FsZXJ0KDIsIDEwMDAsIDMwMDApO1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbn0pO1xyXG5cclxuJCgnZm9ybSNjbGluaWMnKS5zdWJtaXQoZnVuY3Rpb24oZXZlbnQpIHtcclxuXHJcbiAgdmFyIGZvcm11bGFyaW8gPSAkKHRoaXMpO1xyXG4gIHZhciBpZEZvcm11bGFyaW8gID0gZm9ybXVsYXJpby5hdHRyKCdpZCcpO1xyXG5cclxuICBpZiAodmFsaWRhdGVGb3JtKHRoaXMpKSB7XHJcblxyXG4gICAgLy8gRGF0YSBxdWUgc2UgZW52aWEgYSBsYSBiYXNlIGRlIGRhdG9zXHJcbiAgICB2YXIgZGF0YSA9ICdpZEZvcm09JyArIGlkRm9ybXVsYXJpbyArICcmJyArICQoZm9ybXVsYXJpbykuc2VyaWFsaXplKCk7XHJcbiAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuXHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICBkYXRhOiBkYXRhLFxyXG4gICAgICBiZWZvcmVTZW5kOiBmdW5jdGlvbigpIHtcclxuICAgICAgICBmb3JtdWxhcmlvLnBhcmVudCgpLmZpbmQoJy5sb2FkaW5nJykuc2hvdygpO1xyXG4gICAgICB9LFxyXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgIGZvcm11bGFyaW8ucGFyZW50KCkuZmluZCgnLmxvYWRpbmcnKS5mYWRlT3V0KDEwMDApO1xyXG4gICAgICAgIHZhciBqc29uRGF0YSA9IEpTT04ucGFyc2UocmVzcG9uc2UpO1xyXG4gICAgICAgIGlmIChqc29uRGF0YS5zdWNjZXNzID09IFwiMVwiKSB7XHJcbiAgICAgICAgICBmb3JtdWxhcmlvLmhpZGUoKTtcclxuICAgICAgICAgICQoJ2Zvcm0jZXN0dWRpYW50ZScpLnNob3coKTtcclxuXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHNob3dBbGVydCgyLCAxMDAwLCAzMDAwKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG59KTtcclxuXHJcblxyXG4kKCdmb3JtI2VzdHVkaWFudGUnKS5zdWJtaXQoZnVuY3Rpb24oZXZlbnQpIHtcclxuXHJcbiAgdmFyIGZvcm11bGFyaW8gPSAkKHRoaXMpO1xyXG4gIHZhciBpZEZvcm11bGFyaW8gID0gZm9ybXVsYXJpby5hdHRyKCdpZCcpO1xyXG5cclxuICBpZiAodmFsaWRhdGVGb3JtKHRoaXMpKSB7XHJcbiAgICAvLyBEYXRhIHF1ZSBzZSBlbnZpYSBhIGxhIGJhc2UgZGUgZGF0b3NcclxuICAgIHZhciBkYXRhID0gJ2lkRm9ybT0nICsgaWRGb3JtdWxhcmlvICsgJyYnICsgJChmb3JtdWxhcmlvKS5zZXJpYWxpemUoKTtcclxuICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG5cclxuICAgICQuYWpheCh7XHJcbiAgICAgIGRhdGE6IGRhdGEsXHJcbiAgICAgIGJlZm9yZVNlbmQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGZvcm11bGFyaW8ucGFyZW50KCkuZmluZCgnLmxvYWRpbmcnKS5zaG93KCk7XHJcbiAgICAgIH0sXHJcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgZm9ybXVsYXJpby5wYXJlbnQoKS5maW5kKCcubG9hZGluZycpLmZhZGVPdXQoMTAwMCk7XHJcbiAgICAgICAgdmFyIGpzb25EYXRhID0gSlNPTi5wYXJzZShyZXNwb25zZSk7XHJcbiAgICAgICAgaWYgKGpzb25EYXRhLnN1Y2Nlc3MgPT0gXCIxXCIpIHtcclxuICAgICAgICAgIGZvcm11bGFyaW8uaGlkZSgpO1xyXG4gICAgICAgICAgJCgnZm9ybSNhY3VkaWVudGUnKS5zaG93KCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHNob3dBbGVydCgyLCAxMDAwLCAzMDAwKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG59KTtcclxuXHJcbiQoJ2Zvcm0jYWN1ZGllbnRlJykuc3VibWl0KGZ1bmN0aW9uKGV2ZW50KSB7XHJcblxyXG4gIHZhciBmb3JtdWxhcmlvID0gJCh0aGlzKTtcclxuICB2YXIgaWRGb3JtdWxhcmlvICA9IGZvcm11bGFyaW8uYXR0cignaWQnKTtcclxuXHJcbiAgaWYgKHZhbGlkYXRlRm9ybSh0aGlzKSkge1xyXG5cclxuICAgIC8vIERhdGEgcXVlIHNlIGVudmlhIGEgbGEgYmFzZSBkZSBkYXRvc1xyXG4gICAgdmFyIGRhdGEgPSAnaWRGb3JtPScgKyBpZEZvcm11bGFyaW8gKyAnJicgKyAkKGZvcm11bGFyaW8pLnNlcmlhbGl6ZSgpO1xyXG4gICAgY29uc29sZS5sb2coZGF0YSk7XHJcblxyXG4gICAgJC5hamF4KHtcclxuICAgICAgZGF0YTogZGF0YSxcclxuICAgICAgYmVmb3JlU2VuZDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgZm9ybXVsYXJpby5wYXJlbnQoKS5maW5kKCcubG9hZGluZycpLnNob3coKTtcclxuICAgICAgfSxcclxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICBmb3JtdWxhcmlvLnBhcmVudCgpLmZpbmQoJy5sb2FkaW5nJykuZmFkZU91dCgxMDAwKTtcclxuXHJcbiAgICAgICAgdmFyIGpzb25EYXRhID0gSlNPTi5wYXJzZShyZXNwb25zZSk7XHJcbiAgICAgICAgaWYgKGpzb25EYXRhLnN1Y2Nlc3MgPT0gXCIxXCIpIHtcclxuXHJcbiAgICAgICAgICBmb3JtdWxhcmlvLmNsb3Nlc3QoJy5tb2RhbCcpLmZhZGVPdXQoKTtcclxuICAgICAgICAgIGZvcm11bGFyaW8uY2xvc2VzdCgnLm1vZGFsJykuZmluZCgnZm9ybScpLmhpZGUoKTtcclxuICAgICAgICAgIGZvcm11bGFyaW8uY2xvc2VzdCgnLm1vZGFsJykuZmluZCgnZm9ybSNtYXRyaWN1bGEnKS5zaG93KCk7XHJcbiAgICAgICAgICBzaG93QWxlcnQoMSwgMTAwMCwgMzAwMCk7XHJcblxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBzaG93QWxlcnQoMiwgMTAwMCwgMzAwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxufSk7XHJcbiIsIiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xyXG4gIC8vVkFsaWRhciBzaSBlbCBuYXZlZ2Fkb3IgZXMgSUUuIFNpIGxvIGVzLCBkaXJlY2Npb25hcmxvIGEgb3RyYSBwYWdpbmFcclxuICBpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKFwiVHJpZGVudC9cIikgPiAtMSkge1xyXG4gICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS5teC9jaHJvbWUvP2JyYW5kPUNIQkYmZHNfa2lkPTQzNzAwMDM0NjMyNzQ4Njk0JnV0bV9zb3VyY2U9YmluZyZ1dG1fbWVkaXVtPWNwYyZ1dG1fY2FtcGFpZ249MTAwNTk5MiUyMCU3QyUyMENocm9tZSUyMFdpbjEwJTIwJTdDJTIwRFIlMjAlN0MlMjBFU1MwMSUyMCU3QyUyME5BJTIwJTdDJTIwTkElMjAlN0MlMjBlcyUyMCU3QyUyMERlc2slMjAlN0MlMjBCSU5HJTIwU0VNJTIwJTdDJTIwQktXUyUyMH4lMjBUb3AlMjBLV0RTJTIwLSUyMEV4YWN0JnV0bV90ZXJtPWRlc2NhcmdhciUyMGNocm9tZSZ1dG1fY29udGVudD1Eb3dubG9hZCUyMENocm9tZSUyMC0lMjBFeGFjdCZnY2xpZD1DTzcwbTZUVC1lVUNGVVRDRFFvZG1pd0RSUSZnY2xzcmM9ZHMnXHJcbiAgfVxyXG4gIC8vRmFkZSBpbiBkZSBsYSBww6FnaW5hIExvZ2luIGFsIGluaWNpYXIgZWwgbmF2ZWdhZG9yXHJcblxyXG4gIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAkKCdzZWN0aW9uI2xvZ2luJykuZmFkZUluKDE1MDApLmNzcyh7XHJcbiAgICAgIFwiZGlzcGxheVwiOiBcImZsZXhcIlxyXG4gICAgfSk7XHJcbiAgfSwgNTAwKTtcclxuICAvL0luaWNpYWxpemFyIGxhcyBhbmltYWNpb25lcyBkZSBsYSBsaWJyZXJpYSBXT1cgKGFuaW1hY2lvbmVzKVxyXG4gIHZhciB3b3cgPSBuZXcgV09XKCkuaW5pdCgpO1xyXG5cclxuICAvLyBIYWNlciBxdWUgbG9zIGNoZWNrYm94IGNvbiBlc3RpbG9zIGZ1bmNpb25lblxyXG4gICQoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgbGV0IGN1c3RvbUNoZWNrID0gJCh0aGlzKS5wYXJlbnQoKS5maW5kKCdkaXYuY3VzdG9tLWNoZWNrYm94Jyk7XHJcbiAgICAkKHRoaXMpLnByb3AoJ2NoZWNrZWQnKSA/IGN1c3RvbUNoZWNrLnRleHQoJ+KclCcpIDogY3VzdG9tQ2hlY2sudGV4dCgnJyk7XHJcbiAgfSk7XHJcblxyXG4gIC8vIEVmZWN0b3MgbWVudSBidXJndWVyXHJcbiAgJCgnZGl2Lmljb24tbWVudScpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgbGV0IG1lbnUgPSAkKCdkaXYubWVudS1jb250YWluZXInKTtcclxuICAgIGlmIChtZW51LmNzcygnZGlzcGxheScpID09IFwibm9uZVwiKSB7XHJcbiAgICAgIG1lbnUuc2xpZGVEb3duKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBtZW51LnNsaWRlVXAoKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgJCgnI2Fjb3VudGJ0bicpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgbGV0IGFjb3VudENvbnRhaW5lciA9ICQoJy5hY2NvdW50LWNvbnRhaW5lcicpO1xyXG4gICAgaWYgKGFjb3VudENvbnRhaW5lci5jc3MoJ2Rpc3BsYXknKSA9PSBcIm5vbmVcIikge1xyXG4gICAgICBhY291bnRDb250YWluZXIuc2xpZGVEb3duKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBhY291bnRDb250YWluZXIuc2xpZGVVcCgpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAvL01vZGFsZXNcclxuXHJcblxyXG4gICQoJyNidG4tbnVldm8nKS5jbGljayhmdW5jdGlvbigpIHtcclxuXHJcbiAgICAkKCcjbW9kYWxOdWV2bycpLmZhZGVJbigpLmNzcyh7XHJcbiAgICAgIFwiZGlzcGxheVwiOiBcImZsZXhcIlxyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG5cclxuICAkKCcuYnRuLWNhbmNlbCcpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgJCh0aGlzKS5jbG9zZXN0KCcubW9kYWwsLm1vZGFsLXRpdHRsZScpLmZhZGVPdXQoKTtcclxuICAgIC8vICQoJy5sb2FkaW5nJykuZmFkZU91dCgpO1xyXG4gICAgJCgnLmFsZXJ0LWNvbnRhaW5lcicpLmZhZGVPdXQoKTtcclxuICB9KTtcclxuXHJcbiAgJCgnc3Bhbi5pY29uLWJpbicpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgJCgnI21vZGFsRWxtaW5hcicpLmZhZGVJbigpLmNzcyh7XHJcbiAgICAgIFwiZGlzcGxheVwiOiBcImZsZXhcIlxyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gICQoJ3NwYW4uaWNvbi1wZW5jaWwnKS5jbGljayhmdW5jdGlvbigpIHtcclxuXHJcbiAgICBsZXQgbW9kYWxFZGl0ID0gJCgnI21vZGFsRWRpdE1vc3RyYXInKTtcclxuICAgIGxldCBib3RvbkVkaXQgPSBtb2RhbEVkaXQuZmluZCgnYnV0dG9uW3R5cGU9XCJzdWJtaXRcIl0nKVxyXG4gICAgbGV0IGlucHV0cyA9IG1vZGFsRWRpdC5maW5kKCdpbnB1dCxzZWxlY3QnKTtcclxuICAgIG1vZGFsRWRpdC5mYWRlSW4oKS5jc3Moe1xyXG4gICAgICBcImRpc3BsYXlcIjogXCJmbGV4XCJcclxuICAgIH0pO1xyXG4gICAgYm90b25FZGl0LnNob3coKTtcclxuICAgIGlucHV0cy5hdHRyKCdkaXNhYmxlZCcsZmFsc2UpO1xyXG4gIH0pO1xyXG5cclxuICAkKCdzcGFuLmljb24tZXllJykuY2xpY2soZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgbGV0IG1vZGFsRWRpdCA9ICQoJyNtb2RhbEVkaXRNb3N0cmFyJyk7XHJcbiAgICBsZXQgYm90b25FZGl0ID0gbW9kYWxFZGl0LmZpbmQoJ2J1dHRvblt0eXBlPVwic3VibWl0XCJdJylcclxuICAgIGxldCBpbnB1dHMgPSBtb2RhbEVkaXQuZmluZCgnaW5wdXQsc2VsZWN0Jyk7XHJcbiAgICBtb2RhbEVkaXQuZmFkZUluKCkuY3NzKHtcclxuICAgICAgXCJkaXNwbGF5XCI6IFwiZmxleFwiXHJcbiAgICB9KTtcclxuICAgIGJvdG9uRWRpdC5oaWRlKCk7XHJcbiAgICBpbnB1dHMuYXR0cignZGlzYWJsZWQnLHRydWUpO1xyXG4gIH0pO1xyXG5cclxuXHJcbiAgLy9UYWJsYXNcclxuICAkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoIDw9IDUyMCkge1xyXG4gICAgICAkKCd0YWJsZScpLmNzcyh7XHJcbiAgICAgICAgXCJvdmVyZmxvdy14XCI6IFwic2Nyb2xsXCJcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG5cclxuXHJcblxyXG59KTtcclxuIl19
