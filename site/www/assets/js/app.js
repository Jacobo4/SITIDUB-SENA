var e=3;function n(e,n){"error"===n?(e.addClass("error"),e.removeClass("correcto"),cumple=0):"valido"===n&&(e.addClass("correcto"),e.removeClass("error"),cumple=1)}function t(e,n,t){const i=$("div.alert-container");i.find("div.alert-content").empty(),i.removeClass(),i.addClass("alert-container"),1===e?i.addClass("alert-check").find("div.alert-content").text("Nice !"):2===e?i.addClass("alert-error").find("div.alert-content").text("Hmm, something went wrong"):3===e&&i.addClass("alert-server").find("div.alert-content").text("Maybe the server is down :("),i.fadeIn(n,"linear",(function(){setTimeout((function(){i.fadeOut().animate({bottom:"0%"},{duration:"slow",queue:!1})}),t)})).animate({bottom:"20vh"},{duration:"slow",queue:!1})}function i(e,n,t){return!!(e>=n&e<=t)}function o(e){event.preventDefault();var t=$(e).find("input,select").length,o=($(e).find('button[type="submit"]'),0);const a=/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/,s=/^\d+$/;return $(e).find("input,select").each((function(e,t){var c=$(t).attr("id");$(t).attr("name",c);var r=$(t).val(),d=$(t).prop("checked"),l=$(t).val(),f=$(t).parent().find("div.custom-checkbox");if(0!==$(t).length){switch($(t).attr("type")){case"text":case"password":case"date":n($(t),""!==r?"valido":"error");break;case"identification":s.test($(t).prop("value"))&i(r.length,10,10)?n($(t),"valido"):n($(t),"error");break;case"emailCustom":a.test($(t).prop("value"))?n($(t),"valido"):n($(t),"error");break;case"checkbox":n(f,!1!==d?"valido":"error");break;case"select":n($(t),1!=l?"valido":"error")}o+=cumple}})),o===t}$(document).ready((function(){navigator.userAgent.indexOf("Trident/")>-1&&(window.location.href="https://www.google.com.mx/chrome/?brand=CHBF&ds_kid=43700034632748694&utm_source=bing&utm_medium=cpc&utm_campaign=1005992%20%7C%20Chrome%20Win10%20%7C%20DR%20%7C%20ESS01%20%7C%20NA%20%7C%20NA%20%7C%20es%20%7C%20Desk%20%7C%20BING%20SEM%20%7C%20BKWS%20~%20Top%20KWDS%20-%20Exact&utm_term=descargar%20chrome&utm_content=Download%20Chrome%20-%20Exact&gclid=CO70m6TT-eUCFUTCDQodmiwDRQ&gclsrc=ds"),setTimeout((function(){$("section#login").fadeIn(1500).css({display:"flex"})}),500);(new WOW).init();$('input[type="checkbox"]').click((function(){let e=$(this).parent().find("div.custom-checkbox");$(this).prop("checked")?e.text("âœ”"):e.text("")})),$("div.icon-menu").click((function(){let e=$("div.menu-container");"none"==e.css("display")?e.slideDown():e.slideUp()})),$("#acountbtn").click((function(){let e=$(".account-container");"none"==e.css("display")?e.slideDown():e.slideUp()})),$("#editUser").click((function(){$("#modalEditUser").fadeIn().css({display:"flex"})})),$("#btn-nuevo").click((function(){$("#modalNuevo").fadeIn().css({display:"flex"})})),$(".btn-cancel").click((function(){$(this).closest(".modal,.modal-tittle").fadeOut(),$(".alert-container").fadeOut()})),$("span.icon-bin").click((function(){$("#modalElminar").fadeIn().css({display:"flex"})})),$("span.icon-pencil").click((function(){$("#modalEdit").fadeIn().css({display:"flex"})})),$("span.icon-eye").click((function(){$("#modalShow").fadeIn().css({display:"flex"})})),$("span.icon-plus").click((function(){$("#modalMatricula").fadeIn().css({display:"flex"})})),$(window).resize((function(){window.innerWidth<=520&&$("table").css({"overflow-x":"scroll"})}))})),$.ajaxSetup({url:"procesar.php",type:"POST",async:!0,error:function(e){console.log("response",e),t(3,1e3,3e3)}}),$("form#login").submit((function(e){e.preventDefault();var n=$(this),i=$(n).serialize();console.log(i),$.post("login.php?log=true",i,(function(e){"1"==JSON.parse(e).success?(t(1,1e3,3e3),location.href="home.php"):t(2,1e3,3e3)}))})),$("#logOut").click((function(){$.post("login.php?log=false",(function(e){"1"==JSON.parse(e).success?location.href="index.php":t(2,1e3,3e3)}))})),$("form#editUsername").submit((function(e){var n=$(this),i=n.attr("id");if(o(this)){var a="idForm="+i+"&"+$(n).serialize();console.log(a),$.post("procesar.php",a,(function(e){n.parent().find(".loading").show()})).done((function(e){n.parent().find(".loading").fadeOut(1e3),"1"==JSON.parse(e).success?t(1,1e3,3e3):t(2,1e3,3e3)}))}})),$("form#editPassword").submit((function(e){var n=$(this),i=n.attr("id");if(o(this)){var a="idForm="+i+"&"+$(n).serialize();console.log(a),$.post("procesar.php",a,(function(e){n.parent().find(".loading").show()})).done((function(e){n.parent().find(".loading").fadeOut(1e3),"1"==JSON.parse(e).success?t(1,1e3,3e3):t(2,1e3,3e3)}))}})),$("form.edit").submit((function(e){var n=$(this),i=n.attr("id");if(o(this)){var a="idForm="+i+"&"+$(n).serialize();console.log(a),$.post("procesar.php",a,(function(e){n.parent().find(".loading").show()})).done((function(e){n.parent().find(".loading").fadeOut(1e3),"1"==JSON.parse(e).success?t(1,1e3,3e3):t(2,1e3,3e3)}))}})),$("form#eliminar").submit((function(e){var n=$(this),i=n.attr("id");if(o(this)){var a="idForm="+i+"&"+$(n).serialize();console.log(a),$.ajax({data:a,beforeSend:function(){n.parent().find(".loading").show()},success:function(e){n.parent().find(".loading").fadeOut(1e3),"1"==JSON.parse(e).success?(n.closest(".modal").fadeOut(),t(1,1e3,3e3)):t(2,1e3,3e3)}})}})),$("form#matricula").submit((function(e){var n=$(this),i=n.attr("id");if(o(this)){var a="idForm="+i+"&"+$(n).serialize();console.log(a),$.ajax({data:a,beforeSend:function(){n.parent().find(".loading").show()},success:function(e){n.parent().find(".loading").fadeOut(1e3),"1"==JSON.parse(e).success?(n.closest(".modal").fadeOut(),t(1,1e3,3e3)):t(2,1e3,3e3)}})}})),$("form#estudiante").submit((function(e){var n=$(this),i=n.attr("id");if(o(this)){var a="idForm="+i+"&"+$(n).serialize();console.log(a),$.ajax({data:a,beforeSend:function(){n.parent().find(".loading").show()},success:function(e){n.parent().find(".loading").fadeOut(1e3),"1"==JSON.parse(e).success?(n.hide(),$("form#acudiente").show()):t(2,1e3,3e3)}})}})),$("form#acudiente").submit((function(e){var n=$(this),i=n.attr("id");if(o(this)){var a="idForm="+i+"&"+$(n).serialize();console.log(a),$.ajax({data:a,beforeSend:function(){n.parent().find(".loading").show()},success:function(e){n.parent().find(".loading").fadeOut(1e3),"1"==JSON.parse(e).success?(n.closest(".modal").fadeOut(),n.closest(".modal").find("form").hide(),n.closest(".modal").find("form#matricula").show(),t(1,1e3,3e3)):t(2,1e3,3e3)}})}}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImMuanMiLCJfX2Zvcm1zLmpzIiwiX2RvbS5qcyJdLCJuYW1lcyI6WyJjIiwicGludGFyU3RpbG9zIiwiZWxlbSIsInRpcG8iLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwiY3VtcGxlIiwic2hvd0FsZXJ0IiwidGltZUluIiwidGltZU91dCIsImRpdkFsZXJ0IiwiJCIsImZpbmQiLCJlbXB0eSIsInRleHQiLCJmYWRlSW4iLCJzZXRUaW1lb3V0IiwiZmFkZU91dCIsImFuaW1hdGUiLCJib3R0b20iLCJkdXJhdGlvbiIsInF1ZXVlIiwidmFsaWRhckxlbmd0aCIsInZhbG9yIiwibWluTGVuZ3RoIiwibWF4TGVuZ3RoIiwidmFsaWRhdGVGb3JtIiwiZm9ybSIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJjYW1wb3NPYmxpZ2EiLCJsZW5ndGgiLCJ0b3RhbCIsInJlZ0V4cEVtYWlsIiwicmVnRXhwTnVtYmVyIiwiZWFjaCIsImkiLCJlIiwiaWQiLCJhdHRyIiwidmFsb3JJbnB1dCIsInZhbCIsInZhbG9yQ2hlY2tib3giLCJwcm9wIiwidmFsb3JTZWxlY3QiLCJjdXN0b21EaXZDaGVjayIsInBhcmVudCIsInRlc3QiLCJkb2N1bWVudCIsInJlYWR5IiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwiaW5kZXhPZiIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsImNzcyIsImRpc3BsYXkiLCJXT1ciLCJpbml0IiwiY2xpY2siLCJjdXN0b21DaGVjayIsInRoaXMiLCJtZW51Iiwic2xpZGVEb3duIiwic2xpZGVVcCIsImFjb3VudENvbnRhaW5lciIsImNsb3Nlc3QiLCJyZXNpemUiLCJpbm5lcldpZHRoIiwib3ZlcmZsb3cteCIsImFqYXhTZXR1cCIsInVybCIsInR5cGUiLCJhc3luYyIsImVycm9yIiwicmVzcG9uc2UiLCJjb25zb2xlIiwibG9nIiwic3VibWl0IiwiZm9ybXVsYXJpbyIsImRhdGEiLCJzZXJpYWxpemUiLCJwb3N0IiwiSlNPTiIsInBhcnNlIiwic3VjY2VzcyIsImlkRm9ybXVsYXJpbyIsInNob3ciLCJkb25lIiwiYWpheCIsImJlZm9yZVNlbmQiLCJoaWRlIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFBQSxFQUFBLEVDQ0EsU0FBQUMsRUFBQUMsRUFBQUMsR0FFQSxVQUFBQSxHQUNBRCxFQUFBRSxTQUFBLFNBQ0FGLEVBQUFHLFlBQUEsWUFDQUMsT0FBQSxHQUVBLFdBQUFILElBQ0FELEVBQUFFLFNBQUEsWUFDQUYsRUFBQUcsWUFBQSxTQUNBQyxPQUFBLEdBTUEsU0FBQUMsRUFBQUQsRUFBQUUsRUFBQUMsR0FFQSxNQUFBQyxFQUFBQyxFQUFBLHVCQUdBRCxFQUFBRSxLQUFBLHFCQUFBQyxRQUNBSCxFQUFBTCxjQUNBSyxFQUFBTixTQUFBLG1CQUNBLElBQUFFLEVBRUFJLEVBQUFOLFNBQUEsZUFBQVEsS0FQQSxxQkFPQUUsS0FBQSxVQUVBLElBQUFSLEVBRUFJLEVBQUFOLFNBQUEsZUFBQVEsS0FYQSxxQkFXQUUsS0FBQSw2QkFDQSxJQUFBUixHQUNBSSxFQUFBTixTQUFBLGdCQUFBUSxLQWJBLHFCQWFBRSxLQUFBLCtCQUdBSixFQUFBSyxPQUFBUCxFQUFBLFVBQUEsV0FDQVEsWUFBQSxXQUNBTixFQUFBTyxVQUFBQyxRQUFBLENBQ0FDLE9BQUEsTUFDQSxDQUNBQyxTQUFBLE9BQ0FDLE9BQUEsTUFFQVosTUFDQVMsUUFBQSxDQUNBQyxPQUFBLFFBQ0EsQ0FDQUMsU0FBQSxPQUNBQyxPQUFBLElBU0EsU0FBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FDQSxTQUFBRixHQUFBQyxFQUFBRCxHQUFBRSxHQU9BLFNBQUFDLEVBQUFDLEdBRUFDLE1BQUFDLGlCQUVBLElBQUFDLEVBQUFuQixFQUFBZ0IsR0FBQWYsS0FBQSxnQkFBQW1CLE9BSUFDLEdBSEFyQixFQUFBZ0IsR0FBQWYsS0FBQSx5QkFHQSxHQUVBLE1BQUFxQixFQUFBLDBJQUNBQyxFQUFBLFFBdURBLE9BcERBdkIsRUFBQWdCLEdBQUFmLEtBQUEsZ0JBQUF1QixNQUFBLFNBQUFDLEVB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QUFBbkQsR0FFQSxJQUFBb0QsRUFBQXJFLEVBQUFtRCxNQUNBeUIsRUFBQVAsRUFBQXpDLEtBQUEsTUFFQSxHQUFBYixFQUFBb0MsTUFBQSxDQUdBLElBQUFtQixFQUFBLFVBQUFNLEVBQUEsSUFBQTVFLEVBQUFxRSxHQUFBRSxZQUNBTCxRQUFBQyxJQUFBRyxHQUVBdEUsRUFBQStFLEtBQUEsQ0FDQVQsS0FBQUEsRUFDQVUsV0FBQSxXQUNBWCxFQUFBbEMsU0FBQWxDLEtBQUEsWUFBQTRFLFFBRUFGLFFBQUEsU0FBQVYsR0FDQUksRUFBQWxDLFNBQUFsQyxLQUFBLFlBQUFLLFFBQUEsS0FHQSxLQURBbUUsS0FBQUMsTUFBQVQsR0FDQVUsU0FFQU4sRUFBQWIsUUFBQSxVQUFBbEQsVUFDQStELEVBQUFiLFFBQUEsVUFBQXZELEtBQUEsUUFBQWdGLE9BQ0FaLEVBQUFiLFFBQUEsVUFBQXZELEtBQUEsa0JBQUE0RSxPQUNBakYsRUFBQSxFQUFBLElBQUEsTUFHQUEsRUFBQSxFQUFBLElBQUEiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGMgPSAzO1xyXG4iLCIvLy8vLy8vLy8vLy8gUGludGEgZXN0aWxvcyBkZSBlcnJvciB5IHZhbGlkb1xyXG5mdW5jdGlvbiBwaW50YXJTdGlsb3MoZWxlbSwgdGlwbykge1xyXG5cclxuICBpZiAodGlwbyA9PT0gJ2Vycm9yJykge1xyXG4gICAgZWxlbS5hZGRDbGFzcygnZXJyb3InKTtcclxuICAgIGVsZW0ucmVtb3ZlQ2xhc3MoJ2NvcnJlY3RvJyk7XHJcbiAgICBjdW1wbGUgPSAwO1xyXG5cclxuICB9IGVsc2UgaWYgKHRpcG8gPT09ICd2YWxpZG8nKSB7XHJcbiAgICBlbGVtLmFkZENsYXNzKCdjb3JyZWN0bycpO1xyXG4gICAgZWxlbS5yZW1vdmVDbGFzcygnZXJyb3InKTtcclxuICAgIGN1bXBsZSA9IDE7XHJcbiAgfVxyXG5cclxufVxyXG5cclxuLy8vLy8vLy8vLy8vIE11ZXN0cmEgYWxlcnRhIGRlIGxvcyBmb3JtdWxhcmlvc1xyXG5mdW5jdGlvbiBzaG93QWxlcnQoY3VtcGxlLCB0aW1lSW4sIHRpbWVPdXQpIHtcclxuXHJcbiAgY29uc3QgZGl2QWxlcnQgPSAkKCdkaXYuYWxlcnQtY29udGFpbmVyJyk7XHJcbiAgY29uc3QgY29udGVudEFsZXJ0ID0gJ2Rpdi5hbGVydC1jb250ZW50JztcclxuXHJcbiAgZGl2QWxlcnQuZmluZCgnZGl2LmFsZXJ0LWNvbnRlbnQnKS5lbXB0eSgpO1xyXG4gIGRpdkFsZXJ0LnJlbW92ZUNsYXNzKCk7XHJcbiAgZGl2QWxlcnQuYWRkQ2xhc3MoJ2FsZXJ0LWNvbnRhaW5lcicpO1xyXG4gIGlmIChjdW1wbGUgPT09IDEpIHtcclxuXHJcbiAgICBkaXZBbGVydC5hZGRDbGFzcygnYWxlcnQtY2hlY2snKS5maW5kKGNvbnRlbnRBbGVydCkudGV4dCgnTmljZSAhJyk7XHJcblxyXG4gIH0gZWxzZSBpZiAoY3VtcGxlID09PSAyKSB7XHJcblxyXG4gICAgZGl2QWxlcnQuYWRkQ2xhc3MoJ2FsZXJ0LWVycm9yJykuZmluZChjb250ZW50QWxlcnQpLnRleHQoJ0htbSwgc29tZXRoaW5nIHdlbnQgd3JvbmcnKTtcclxuICB9IGVsc2UgaWYgKGN1bXBsZSA9PT0gMykge1xyXG4gICAgZGl2QWxlcnQuYWRkQ2xhc3MoJ2FsZXJ0LXNlcnZlcicpLmZpbmQoY29udGVudEFsZXJ0KS50ZXh0KCdNYXliZSB0aGUgc2VydmVyIGlzIGRvd24gOignKTtcclxuICB9XHJcblxyXG4gIGRpdkFsZXJ0LmZhZGVJbih0aW1lSW4sIFwibGluZWFyXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgZGl2QWxlcnQuZmFkZU91dCgpLmFuaW1hdGUoe1xyXG4gICAgICAgICdib3R0b20nOiAnMCUnXHJcbiAgICAgIH0sIHtcclxuICAgICAgICBkdXJhdGlvbjogJ3Nsb3cnLFxyXG4gICAgICAgIHF1ZXVlOiBmYWxzZVxyXG4gICAgICB9KTtcclxuICAgIH0sIHRpbWVPdXQpO1xyXG4gIH0pLmFuaW1hdGUoe1xyXG4gICAgJ2JvdHRvbSc6ICcyMHZoJ1xyXG4gIH0sIHtcclxuICAgIGR1cmF0aW9uOiAnc2xvdycsXHJcbiAgICBxdWV1ZTogZmFsc2VcclxuICB9KTtcclxuXHJcbn1cclxuXHJcblxyXG5cclxuXHJcbi8vLy8vLy8vLy8vLyBWYWxpZGEgbG9uZ2l0dWRcclxuZnVuY3Rpb24gdmFsaWRhckxlbmd0aCh2YWxvciwgbWluTGVuZ3RoLCBtYXhMZW5ndGgpIHtcclxuICBpZiAoKHZhbG9yID49IG1pbkxlbmd0aCkgJiAodmFsb3IgPD0gbWF4TGVuZ3RoKSkge1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHZhbGlkYXRlRm9ybShmb3JtKSB7XHJcblxyXG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gIHZhciBjYW1wb3NPYmxpZ2EgPSAkKGZvcm0pLmZpbmQoJ2lucHV0LHNlbGVjdCcpLmxlbmd0aDtcclxuICB2YXIgYm90b25TdWJtaXQgPSAkKGZvcm0pLmZpbmQoJ2J1dHRvblt0eXBlPVwic3VibWl0XCJdJyk7XHJcblxyXG4gIC8vVmFyaWFibGUgcGFyYSBjb21wcmFyIGxvcyBpbnB1dHMgcXVlIGVzdGFuIGJpZW4gY29uIGxhIGNhbnRpZGFkIGRlIGlucHV0cyBkZWwgZm9ybXVsYXJpb1xyXG4gIHZhciB0b3RhbCA9IDA7XHJcbiAgLy9leHByZXNpb25lcyBSZWd1bGFyZXNcclxuICBjb25zdCByZWdFeHBFbWFpbCA9IC9eW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKyg/OlxcLlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSspKkAoPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XFwuKStbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/JC87XHJcbiAgY29uc3QgcmVnRXhwTnVtYmVyID0gL15cXGQrJC87XHJcblxyXG4gIC8vLy9WYWxpZGFyIGxvcyBjYW1wb3NcclxuICAkKGZvcm0pLmZpbmQoJ2lucHV0LHNlbGVjdCcpLmVhY2goZnVuY3Rpb24oaSwgZSkge1xyXG5cclxuICAgIHZhciBpZCA9ICQoZSkuYXR0cignaWQnKVxyXG4gICAgLy9Qb25lciBlbCBpZCBlbiBlbCBuYW1lIHBhcmEgbWFuZGFyIGxvcyBkYXRvcyBwb3Igc2VyaWFsaXplXHJcbiAgICAkKGUpLmF0dHIoJ25hbWUnLCBpZCk7XHJcblxyXG4gICAgdmFyIHZhbG9ySW5wdXQgPSAkKGUpLnZhbCgpO1xyXG4gICAgdmFyIHZhbG9yQ2hlY2tib3ggPSAkKGUpLnByb3AoJ2NoZWNrZWQnKTtcclxuICAgIHZhciB2YWxvclNlbGVjdCA9ICQoZSkudmFsKCk7XHJcbiAgICB2YXIgY3VzdG9tRGl2Q2hlY2sgPSAkKGUpLnBhcmVudCgpLmZpbmQoJ2Rpdi5jdXN0b20tY2hlY2tib3gnKTtcclxuXHJcblxyXG4gICAgaWYgKCQoZSkubGVuZ3RoICE9PSAwKSB7XHJcbiAgICAgIHN3aXRjaCAoJChlKS5hdHRyKCd0eXBlJykpIHtcclxuXHJcbiAgICAgICAgY2FzZSBcInRleHRcIjpcclxuICAgICAgICAgIHZhbG9ySW5wdXQgIT09IFwiXCIgPyBwaW50YXJTdGlsb3MoJChlKSwgJ3ZhbGlkbycpIDogcGludGFyU3RpbG9zKCQoZSksICdlcnJvcicpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIGNhc2UgXCJwYXNzd29yZFwiOlxyXG4gICAgICAgICAgdmFsb3JJbnB1dCAhPT0gXCJcIiA/IHBpbnRhclN0aWxvcygkKGUpLCAndmFsaWRvJykgOiBwaW50YXJTdGlsb3MoJChlKSwgJ2Vycm9yJyk7XHJcbiAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgY2FzZSBcImRhdGVcIjpcclxuICAgICAgICAgIHZhbG9ySW5wdXQgIT09IFwiXCIgPyBwaW50YXJTdGlsb3MoJChlKSwgJ3ZhbGlkbycpIDogcGludGFyU3RpbG9zKCQoZSksICdlcnJvcicpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIGNhc2UgXCJpZGVudGlmaWNhdGlvblwiOlxyXG4gICAgICAgICAgaWYgKChyZWdFeHBOdW1iZXIudGVzdCgkKGUpLnByb3AoJ3ZhbHVlJykpKSAmICh2YWxpZGFyTGVuZ3RoKHZhbG9ySW5wdXQubGVuZ3RoLCAxMCwgMTApKSkge1xyXG4gICAgICAgICAgICBwaW50YXJTdGlsb3MoJChlKSwgJ3ZhbGlkbycpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcGludGFyU3RpbG9zKCQoZSksICdlcnJvcicpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIGNhc2UgXCJlbWFpbEN1c3RvbVwiOlxyXG4gICAgICAgICAgcmVnRXhwRW1haWwudGVzdCgkKGUpLnByb3AoJ3ZhbHVlJykpID8gcGludGFyU3RpbG9zKCQoZSksICd2YWxpZG8nKSA6IHBpbnRhclN0aWxvcygkKGUpLCAnZXJyb3InKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBjYXNlIFwiY2hlY2tib3hcIjpcclxuICAgICAgICAgIHZhbG9yQ2hlY2tib3ggIT09IGZhbHNlID8gcGludGFyU3RpbG9zKGN1c3RvbURpdkNoZWNrLCAndmFsaWRvJykgOiBwaW50YXJTdGlsb3MoY3VzdG9tRGl2Q2hlY2ssICdlcnJvcicpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIGNhc2UgXCJzZWxlY3RcIjpcclxuICAgICAgICAgIHZhbG9yU2VsZWN0ICE9IDEgPyBwaW50YXJTdGlsb3MoJChlKSwgJ3ZhbGlkbycpIDogcGludGFyU3RpbG9zKCQoZSksICdlcnJvcicpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgdG90YWwgPSB0b3RhbCArIGN1bXBsZTtcclxuICAgIH1cclxuXHJcbiAgfSk7XHJcblxyXG4gIGlmICh0b3RhbCA9PT0gY2FtcG9zT2JsaWdhKSB7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuXHJcbn1cclxuLy8gTk9URTogQ09ORklHIENPTlNVTFRBU1xyXG4kLmFqYXhTZXR1cCh7XHJcbiAgdXJsOiAncHJvY2VzYXIucGhwJyxcclxuICB0eXBlOiAnUE9TVCcsXHJcbiAgYXN5bmM6IHRydWUsXHJcbiAgZXJyb3I6IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICBjb25zb2xlLmxvZygncmVzcG9uc2UnLCByZXNwb25zZSk7XHJcbiAgICBzaG93QWxlcnQoMywgMTAwMCwgMzAwMCk7XHJcbiAgfVxyXG59KTtcclxuXHJcbi8vIE5PVEU6IENPTlNVTFRBIExPR0lOXHJcbiQoJ2Zvcm0jbG9naW4nKS5zdWJtaXQoZnVuY3Rpb24oZXZlbnQpIHtcclxuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICB2YXIgZm9ybXVsYXJpbyA9ICQodGhpcyk7XHJcbiAgdmFyIGRhdGEgPSAkKGZvcm11bGFyaW8pLnNlcmlhbGl6ZSgpO1xyXG4gIGNvbnNvbGUubG9nKGRhdGEpO1xyXG5cclxuICAkLnBvc3QoXCJsb2dpbi5waHA/bG9nPXRydWVcIiwgZGF0YSwgZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuXHJcbiAgICB2YXIganNvbkRhdGEgPSBKU09OLnBhcnNlKHJlc3BvbnNlKTtcclxuICAgIGlmIChqc29uRGF0YS5zdWNjZXNzID09IFwiMVwiKSB7XHJcblxyXG4gICAgICBzaG93QWxlcnQoMSwgMTAwMCwgMzAwMCk7XHJcbiAgICAgIGxvY2F0aW9uLmhyZWYgPSAnaG9tZS5waHAnO1xyXG5cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHNob3dBbGVydCgyLCAxMDAwLCAzMDAwKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbn0pO1xyXG5cclxuLy8gTk9URTogTE9HIE9VVFxyXG4kKCcjbG9nT3V0JykuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgJC5wb3N0KCBcImxvZ2luLnBocD9sb2c9ZmFsc2VcIiwgZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgIHZhciBqc29uRGF0YSA9IEpTT04ucGFyc2UocmVzcG9uc2UpO1xyXG4gICAgaWYgKGpzb25EYXRhLnN1Y2Nlc3MgPT0gXCIxXCIpIHtcclxuICAgICAgbG9jYXRpb24uaHJlZiA9ICdpbmRleC5waHAnO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc2hvd0FsZXJ0KDIsIDEwMDAsIDMwMDApO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59KTtcclxuXHJcbi8vIE5PVEU6IENPTlNVTFRBIEVESVRBUiBVU0VSTkFNRVxyXG4kKCdmb3JtI2VkaXRVc2VybmFtZScpLnN1Ym1pdChmdW5jdGlvbihldmVudCkge1xyXG5cclxuICB2YXIgZm9ybXVsYXJpbyA9ICQodGhpcyk7XHJcbiAgdmFyIGlkRm9ybXVsYXJpbyA9IGZvcm11bGFyaW8uYXR0cignaWQnKTtcclxuXHJcbiAgaWYgKHZhbGlkYXRlRm9ybSh0aGlzKSkge1xyXG5cclxuICAgIC8vIERhdGEgcXVlIHNlIGVudmlhIGEgbGEgYmFzZSBkZSBkYXRvc1xyXG4gICAgdmFyIGRhdGEgPSAnaWRGb3JtPScgKyBpZEZvcm11bGFyaW8gKyAnJicgKyAkKGZvcm11bGFyaW8pLnNlcmlhbGl6ZSgpO1xyXG4gICAgY29uc29sZS5sb2coZGF0YSk7XHJcblxyXG4gICAgJC5wb3N0KFwicHJvY2VzYXIucGhwXCIsIGRhdGEsIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgZm9ybXVsYXJpby5wYXJlbnQoKS5maW5kKCcubG9hZGluZycpLnNob3coKTtcclxuXHJcbiAgICAgIH0pXHJcbiAgICAgIC5kb25lKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcblxyXG4gICAgICAgIGZvcm11bGFyaW8ucGFyZW50KCkuZmluZCgnLmxvYWRpbmcnKS5mYWRlT3V0KDEwMDApO1xyXG4gICAgICAgIHZhciBqc29uRGF0YSA9IEpTT04ucGFyc2UocmVzcG9uc2UpO1xyXG4gICAgICAgIGlmIChqc29uRGF0YS5zdWNjZXNzID09IFwiMVwiKSB7XHJcbiAgICAgICAgICBzaG93QWxlcnQoMSwgMTAwMCwgMzAwMCk7XHJcblxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBzaG93QWxlcnQoMiwgMTAwMCwgMzAwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG59KTtcclxuXHJcbi8vIE5PVEU6IENPTlNVTFRBIEVESVRBUiBQQVNTV09SRFxyXG4kKCdmb3JtI2VkaXRQYXNzd29yZCcpLnN1Ym1pdChmdW5jdGlvbihldmVudCkge1xyXG5cclxuICB2YXIgZm9ybXVsYXJpbyA9ICQodGhpcyk7XHJcbiAgdmFyIGlkRm9ybXVsYXJpbyA9IGZvcm11bGFyaW8uYXR0cignaWQnKTtcclxuXHJcbiAgaWYgKHZhbGlkYXRlRm9ybSh0aGlzKSkge1xyXG5cclxuICAgIC8vIERhdGEgcXVlIHNlIGVudmlhIGEgbGEgYmFzZSBkZSBkYXRvc1xyXG4gICAgdmFyIGRhdGEgPSAnaWRGb3JtPScgKyBpZEZvcm11bGFyaW8gKyAnJicgKyAkKGZvcm11bGFyaW8pLnNlcmlhbGl6ZSgpO1xyXG4gICAgY29uc29sZS5sb2coZGF0YSk7XHJcblxyXG4gICAgJC5wb3N0KFwicHJvY2VzYXIucGhwXCIsIGRhdGEsIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgZm9ybXVsYXJpby5wYXJlbnQoKS5maW5kKCcubG9hZGluZycpLnNob3coKTtcclxuXHJcbiAgICAgIH0pXHJcbiAgICAgIC5kb25lKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcblxyXG4gICAgICAgIGZvcm11bGFyaW8ucGFyZW50KCkuZmluZCgnLmxvYWRpbmcnKS5mYWRlT3V0KDEwMDApO1xyXG4gICAgICAgIHZhciBqc29uRGF0YSA9IEpTT04ucGFyc2UocmVzcG9uc2UpO1xyXG4gICAgICAgIGlmIChqc29uRGF0YS5zdWNjZXNzID09IFwiMVwiKSB7XHJcbiAgICAgICAgICBzaG93QWxlcnQoMSwgMTAwMCwgMzAwMCk7XHJcblxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBzaG93QWxlcnQoMiwgMTAwMCwgMzAwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG59KTtcclxuXHJcblxyXG5cclxuLy8gTk9URTogQ09OU1VMVEEgRURJVFxyXG4kKCdmb3JtLmVkaXQnKS5zdWJtaXQoZnVuY3Rpb24oZXZlbnQpIHtcclxuXHJcbiAgdmFyIGZvcm11bGFyaW8gPSAkKHRoaXMpO1xyXG4gIHZhciBpZEZvcm11bGFyaW8gPSBmb3JtdWxhcmlvLmF0dHIoJ2lkJyk7XHJcblxyXG4gIGlmICh2YWxpZGF0ZUZvcm0odGhpcykpIHtcclxuXHJcbiAgICAvLyBEYXRhIHF1ZSBzZSBlbnZpYSBhIGxhIGJhc2UgZGUgZGF0b3NcclxuICAgIHZhciBkYXRhID0gJ2lkRm9ybT0nICsgaWRGb3JtdWxhcmlvICsgJyYnICsgJChmb3JtdWxhcmlvKS5zZXJpYWxpemUoKTtcclxuICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG5cclxuICAgICQucG9zdChcInByb2Nlc2FyLnBocFwiLCBkYXRhLCBmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgIGZvcm11bGFyaW8ucGFyZW50KCkuZmluZCgnLmxvYWRpbmcnKS5zaG93KCk7XHJcblxyXG4gICAgICB9KVxyXG4gICAgICAuZG9uZShmdW5jdGlvbihyZXNwb25zZSkge1xyXG5cclxuICAgICAgICBmb3JtdWxhcmlvLnBhcmVudCgpLmZpbmQoJy5sb2FkaW5nJykuZmFkZU91dCgxMDAwKTtcclxuICAgICAgICB2YXIganNvbkRhdGEgPSBKU09OLnBhcnNlKHJlc3BvbnNlKTtcclxuICAgICAgICBpZiAoanNvbkRhdGEuc3VjY2VzcyA9PSBcIjFcIikge1xyXG4gICAgICAgICAgc2hvd0FsZXJ0KDEsIDEwMDAsIDMwMDApO1xyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgc2hvd0FsZXJ0KDIsIDEwMDAsIDMwMDApO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gIH1cclxuXHJcbn0pO1xyXG5cclxuXHJcblxyXG5cclxuLy8gTk9URTogQ09OU1VMVEEgRUxJTUlOQVJcclxuJCgnZm9ybSNlbGltaW5hcicpLnN1Ym1pdChmdW5jdGlvbihldmVudCkge1xyXG5cclxuICB2YXIgZm9ybXVsYXJpbyA9ICQodGhpcyk7XHJcbiAgdmFyIGlkRm9ybXVsYXJpbyA9IGZvcm11bGFyaW8uYXR0cignaWQnKTtcclxuXHJcbiAgaWYgKHZhbGlkYXRlRm9ybSh0aGlzKSkge1xyXG5cclxuICAgIC8vIERhdGEgcXVlIHNlIGVudmlhIGEgbGEgYmFzZSBkZSBkYXRvc1xyXG4gICAgdmFyIGRhdGEgPSAnaWRGb3JtPScgKyBpZEZvcm11bGFyaW8gKyAnJicgKyAkKGZvcm11bGFyaW8pLnNlcmlhbGl6ZSgpO1xyXG4gICAgY29uc29sZS5sb2coZGF0YSk7XHJcblxyXG4gICAgJC5hamF4KHtcclxuICAgICAgZGF0YTogZGF0YSxcclxuICAgICAgYmVmb3JlU2VuZDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgZm9ybXVsYXJpby5wYXJlbnQoKS5maW5kKCcubG9hZGluZycpLnNob3coKTtcclxuICAgICAgfSxcclxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICBmb3JtdWxhcmlvLnBhcmVudCgpLmZpbmQoJy5sb2FkaW5nJykuZmFkZU91dCgxMDAwKTtcclxuICAgICAgICB2YXIganNvbkRhdGEgPSBKU09OLnBhcnNlKHJlc3BvbnNlKTtcclxuICAgICAgICBpZiAoanNvbkRhdGEuc3VjY2VzcyA9PSBcIjFcIikge1xyXG4gICAgICAgICAgZm9ybXVsYXJpby5jbG9zZXN0KCcubW9kYWwnKS5mYWRlT3V0KCk7XHJcbiAgICAgICAgICBzaG93QWxlcnQoMSwgMTAwMCwgMzAwMCk7XHJcblxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBzaG93QWxlcnQoMiwgMTAwMCwgMzAwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxufSk7XHJcblxyXG4vLyBOT1RFOiBDT05TVUxUQVMgTlVFVkEgTUFUUklDVUxBXHJcbiQoJ2Zvcm0jbWF0cmljdWxhJykuc3VibWl0KGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgdmFyIGZvcm11bGFyaW8gPSAkKHRoaXMpO1xyXG4gIHZhciBpZEZvcm11bGFyaW8gPSBmb3JtdWxhcmlvLmF0dHIoJ2lkJyk7XHJcblxyXG4gIGlmICh2YWxpZGF0ZUZvcm0odGhpcykpIHtcclxuXHJcbiAgICAvLyBEYXRhIHF1ZSBzZSBlbnZpYSBhIGxhIGJhc2UgZGUgZGF0b3NcclxuICAgIHZhciBkYXRhID0gJ2lkRm9ybT0nICsgaWRGb3JtdWxhcmlvICsgJyYnICsgJChmb3JtdWxhcmlvKS5zZXJpYWxpemUoKTtcclxuICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG5cclxuICAgICQuYWpheCh7XHJcbiAgICAgIGRhdGE6IGRhdGEsXHJcbiAgICAgIGJlZm9yZVNlbmQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGZvcm11bGFyaW8ucGFyZW50KCkuZmluZCgnLmxvYWRpbmcnKS5zaG93KCk7XHJcbiAgICAgIH0sXHJcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgZm9ybXVsYXJpby5wYXJlbnQoKS5maW5kKCcubG9hZGluZycpLmZhZGVPdXQoMTAwMCk7XHJcbiAgICAgICAgdmFyIGpzb25EYXRhID0gSlNPTi5wYXJzZShyZXNwb25zZSk7XHJcbiAgICAgICAgaWYgKGpzb25EYXRhLnN1Y2Nlc3MgPT0gXCIxXCIpIHtcclxuICAgICAgICAgIGZvcm11bGFyaW8uY2xvc2VzdCgnLm1vZGFsJykuZmFkZU91dCgpO1xyXG4gICAgICAgICAgc2hvd0FsZXJ0KDEsIDEwMDAsIDMwMDApO1xyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgc2hvd0FsZXJ0KDIsIDEwMDAsIDMwMDApO1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbn0pO1xyXG5cclxuXHJcblxyXG4kKCdmb3JtI2VzdHVkaWFudGUnKS5zdWJtaXQoZnVuY3Rpb24oZXZlbnQpIHtcclxuXHJcbiAgdmFyIGZvcm11bGFyaW8gPSAkKHRoaXMpO1xyXG4gIHZhciBpZEZvcm11bGFyaW8gPSBmb3JtdWxhcmlvLmF0dHIoJ2lkJyk7XHJcblxyXG4gIGlmICh2YWxpZGF0ZUZvcm0odGhpcykpIHtcclxuICAgIC8vIERhdGEgcXVlIHNlIGVudmlhIGEgbGEgYmFzZSBkZSBkYXRvc1xyXG4gICAgdmFyIGRhdGEgPSAnaWRGb3JtPScgKyBpZEZvcm11bGFyaW8gKyAnJicgKyAkKGZvcm11bGFyaW8pLnNlcmlhbGl6ZSgpO1xyXG4gICAgY29uc29sZS5sb2coZGF0YSk7XHJcblxyXG4gICAgJC5hamF4KHtcclxuICAgICAgZGF0YTogZGF0YSxcclxuICAgICAgYmVmb3JlU2VuZDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgZm9ybXVsYXJpby5wYXJlbnQoKS5maW5kKCcubG9hZGluZycpLnNob3coKTtcclxuICAgICAgfSxcclxuICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICBmb3JtdWxhcmlvLnBhcmVudCgpLmZpbmQoJy5sb2FkaW5nJykuZmFkZU91dCgxMDAwKTtcclxuICAgICAgICB2YXIganNvbkRhdGEgPSBKU09OLnBhcnNlKHJlc3BvbnNlKTtcclxuICAgICAgICBpZiAoanNvbkRhdGEuc3VjY2VzcyA9PSBcIjFcIikge1xyXG4gICAgICAgICAgZm9ybXVsYXJpby5oaWRlKCk7XHJcbiAgICAgICAgICAkKCdmb3JtI2FjdWRpZW50ZScpLnNob3coKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgc2hvd0FsZXJ0KDIsIDEwMDAsIDMwMDApO1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbn0pO1xyXG5cclxuJCgnZm9ybSNhY3VkaWVudGUnKS5zdWJtaXQoZnVuY3Rpb24oZXZlbnQpIHtcclxuXHJcbiAgdmFyIGZvcm11bGFyaW8gPSAkKHRoaXMpO1xyXG4gIHZhciBpZEZvcm11bGFyaW8gPSBmb3JtdWxhcmlvLmF0dHIoJ2lkJyk7XHJcblxyXG4gIGlmICh2YWxpZGF0ZUZvcm0odGhpcykpIHtcclxuXHJcbiAgICAvLyBEYXRhIHF1ZSBzZSBlbnZpYSBhIGxhIGJhc2UgZGUgZGF0b3NcclxuICAgIHZhciBkYXRhID0gJ2lkRm9ybT0nICsgaWRGb3JtdWxhcmlvICsgJyYnICsgJChmb3JtdWxhcmlvKS5zZXJpYWxpemUoKTtcclxuICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG5cclxuICAgICQuYWpheCh7XHJcbiAgICAgIGRhdGE6IGRhdGEsXHJcbiAgICAgIGJlZm9yZVNlbmQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGZvcm11bGFyaW8ucGFyZW50KCkuZmluZCgnLmxvYWRpbmcnKS5zaG93KCk7XHJcbiAgICAgIH0sXHJcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgZm9ybXVsYXJpby5wYXJlbnQoKS5maW5kKCcubG9hZGluZycpLmZhZGVPdXQoMTAwMCk7XHJcblxyXG4gICAgICAgIHZhciBqc29uRGF0YSA9IEpTT04ucGFyc2UocmVzcG9uc2UpO1xyXG4gICAgICAgIGlmIChqc29uRGF0YS5zdWNjZXNzID09IFwiMVwiKSB7XHJcblxyXG4gICAgICAgICAgZm9ybXVsYXJpby5jbG9zZXN0KCcubW9kYWwnKS5mYWRlT3V0KCk7XHJcbiAgICAgICAgICBmb3JtdWxhcmlvLmNsb3Nlc3QoJy5tb2RhbCcpLmZpbmQoJ2Zvcm0nKS5oaWRlKCk7XHJcbiAgICAgICAgICBmb3JtdWxhcmlvLmNsb3Nlc3QoJy5tb2RhbCcpLmZpbmQoJ2Zvcm0jbWF0cmljdWxhJykuc2hvdygpO1xyXG4gICAgICAgICAgc2hvd0FsZXJ0KDEsIDEwMDAsIDMwMDApO1xyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgc2hvd0FsZXJ0KDIsIDEwMDAsIDMwMDApO1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbn0pO1xyXG4iLCIkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcclxuICAvL1ZBbGlkYXIgc2kgZWwgbmF2ZWdhZG9yIGVzIElFLiBTaSBsbyBlcywgZGlyZWNjaW9uYXJsbyBhIG90cmEgcGFnaW5hXHJcbiAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIlRyaWRlbnQvXCIpID4gLTEpIHtcclxuICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJ2h0dHBzOi8vd3d3Lmdvb2dsZS5jb20ubXgvY2hyb21lLz9icmFuZD1DSEJGJmRzX2tpZD00MzcwMDAzNDYzMjc0ODY5NCZ1dG1fc291cmNlPWJpbmcmdXRtX21lZGl1bT1jcGMmdXRtX2NhbXBhaWduPTEwMDU5OTIlMjAlN0MlMjBDaHJvbWUlMjBXaW4xMCUyMCU3QyUyMERSJTIwJTdDJTIwRVNTMDElMjAlN0MlMjBOQSUyMCU3QyUyME5BJTIwJTdDJTIwZXMlMjAlN0MlMjBEZXNrJTIwJTdDJTIwQklORyUyMFNFTSUyMCU3QyUyMEJLV1MlMjB+JTIwVG9wJTIwS1dEUyUyMC0lMjBFeGFjdCZ1dG1fdGVybT1kZXNjYXJnYXIlMjBjaHJvbWUmdXRtX2NvbnRlbnQ9RG93bmxvYWQlMjBDaHJvbWUlMjAtJTIwRXhhY3QmZ2NsaWQ9Q083MG02VFQtZVVDRlVUQ0RRb2RtaXdEUlEmZ2Nsc3JjPWRzJ1xyXG4gIH1cclxuICAvL0ZhZGUgaW4gZGUgbGEgcMOhZ2luYSBMb2dpbiBhbCBpbmljaWFyIGVsIG5hdmVnYWRvclxyXG5cclxuICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgJCgnc2VjdGlvbiNsb2dpbicpLmZhZGVJbigxNTAwKS5jc3Moe1xyXG4gICAgICBcImRpc3BsYXlcIjogXCJmbGV4XCJcclxuICAgIH0pO1xyXG4gIH0sIDUwMCk7XHJcbiAgLy9JbmljaWFsaXphciBsYXMgYW5pbWFjaW9uZXMgZGUgbGEgbGlicmVyaWEgV09XIChhbmltYWNpb25lcylcclxuICB2YXIgd293ID0gbmV3IFdPVygpLmluaXQoKTtcclxuXHJcbiAgLy8gSGFjZXIgcXVlIGxvcyBjaGVja2JveCBjb24gZXN0aWxvcyBmdW5jaW9uZW5cclxuICAkKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgIGxldCBjdXN0b21DaGVjayA9ICQodGhpcykucGFyZW50KCkuZmluZCgnZGl2LmN1c3RvbS1jaGVja2JveCcpO1xyXG4gICAgJCh0aGlzKS5wcm9wKCdjaGVja2VkJykgPyBjdXN0b21DaGVjay50ZXh0KCfinJQnKSA6IGN1c3RvbUNoZWNrLnRleHQoJycpO1xyXG4gIH0pO1xyXG5cclxuICAvLyBFZmVjdG9zIG1lbnUgYnVyZ3VlclxyXG4gICQoJ2Rpdi5pY29uLW1lbnUnKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgIGxldCBtZW51ID0gJCgnZGl2Lm1lbnUtY29udGFpbmVyJyk7XHJcbiAgICBpZiAobWVudS5jc3MoJ2Rpc3BsYXknKSA9PSBcIm5vbmVcIikge1xyXG4gICAgICBtZW51LnNsaWRlRG93bigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgbWVudS5zbGlkZVVwKCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gICQoJyNhY291bnRidG4nKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgIGxldCBhY291bnRDb250YWluZXIgPSAkKCcuYWNjb3VudC1jb250YWluZXInKTtcclxuICAgIGlmIChhY291bnRDb250YWluZXIuY3NzKCdkaXNwbGF5JykgPT0gXCJub25lXCIpIHtcclxuICAgICAgYWNvdW50Q29udGFpbmVyLnNsaWRlRG93bigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYWNvdW50Q29udGFpbmVyLnNsaWRlVXAoKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgLy9Nb2RhbGVzXHJcblxyXG4gIC8vLy9FZGl0YXIgdXN1ZWFyaW9cclxuICAkKCcjZWRpdFVzZXInKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgICQoJyNtb2RhbEVkaXRVc2VyJykuZmFkZUluKCkuY3NzKHtcclxuICAgICAgXCJkaXNwbGF5XCI6IFwiZmxleFwiXHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgLy8vL051ZXZhIG1hdHJpY3VsYVxyXG4gICQoJyNidG4tbnVldm8nKS5jbGljayhmdW5jdGlvbigpIHtcclxuXHJcbiAgICAkKCcjbW9kYWxOdWV2bycpLmZhZGVJbigpLmNzcyh7XHJcbiAgICAgIFwiZGlzcGxheVwiOiBcImZsZXhcIlxyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIC8vLy9DZXJyYXIgbW9kYWxlc1xyXG4gICQoJy5idG4tY2FuY2VsJykuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAkKHRoaXMpLmNsb3Nlc3QoJy5tb2RhbCwubW9kYWwtdGl0dGxlJykuZmFkZU91dCgpO1xyXG4gICAgLy8gJCgnLmxvYWRpbmcnKS5mYWRlT3V0KCk7XHJcbiAgICAkKCcuYWxlcnQtY29udGFpbmVyJykuZmFkZU91dCgpO1xyXG4gIH0pO1xyXG4gIC8vLy9FbGltaW5hciBtYXRyaWN1bGFcclxuICAkKCdzcGFuLmljb24tYmluJykuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAkKCcjbW9kYWxFbG1pbmFyJykuZmFkZUluKCkuY3NzKHtcclxuICAgICAgXCJkaXNwbGF5XCI6IFwiZmxleFwiXHJcbiAgICB9KTtcclxuICB9KTtcclxuICAvLy8vRWRpdGFyIG1hdHJpY3VsYVxyXG4gICQoJ3NwYW4uaWNvbi1wZW5jaWwnKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgIGxldCBtb2RhbEVkaXQgPSAkKCcjbW9kYWxFZGl0Jyk7XHJcbiAgICBtb2RhbEVkaXQuZmFkZUluKCkuY3NzKHtcclxuICAgICAgXCJkaXNwbGF5XCI6IFwiZmxleFwiXHJcbiAgICB9KTtcclxuICB9KTtcclxuICAvLy8vTW9zdHJhciBJTkZPXHJcbiAgJCgnc3Bhbi5pY29uLWV5ZScpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIGxldCBtb2RhbFNob3cgPSAkKCcjbW9kYWxTaG93Jyk7XHJcblxyXG4gICAgbW9kYWxTaG93LmZhZGVJbigpLmNzcyh7XHJcbiAgICAgIFwiZGlzcGxheVwiOiBcImZsZXhcIlxyXG4gICAgfSk7XHJcblxyXG4gIH0pO1xyXG5cclxuICAvLy8vTW9zdHJhciBtYXRyaWN1bGFcclxuICAkKCdzcGFuLmljb24tcGx1cycpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIGxldCBtb2RhbE1hdHJpID0gJCgnI21vZGFsTWF0cmljdWxhJyk7XHJcblxyXG4gICAgbW9kYWxNYXRyaS5mYWRlSW4oKS5jc3Moe1xyXG4gICAgICBcImRpc3BsYXlcIjogXCJmbGV4XCJcclxuICAgIH0pO1xyXG5cclxuICB9KTtcclxuXHJcblxyXG4gIC8vVGFibGFzXHJcbiAgJCh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbigpIHtcclxuICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA8PSA1MjApIHtcclxuICAgICAgJCgndGFibGUnKS5jc3Moe1xyXG4gICAgICAgIFwib3ZlcmZsb3cteFwiOiBcInNjcm9sbFwiXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuXHJcblxyXG5cclxufSk7XHJcbiJdfQ==
